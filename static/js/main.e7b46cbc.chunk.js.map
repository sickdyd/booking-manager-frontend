{"version":3,"sources":["api/axios.js","notifications/handleError.js","api/client.js","classes/Authenticate.js","components/ProtectedRoute.js","pages/Login.js","components/Header.js","components/HeaderMenu.js","components/Button.js","components/Badge.js","components/DropDownUsersList.js","components/ModalAddUser.js","components/ScheduleAdminControls.js","components/ScheduleSlot.js","components/PointsDisplay.js","components/ScheduleTable.js","components/Spin.js","pages/Schedule.js","components/FormPassword.js","pages/ChangePassword.js","components/FormUser.js","components/FormEditUser.js","components/TableUsers.js","pages/Users.js","utilities/generatePassword.js","pages/CreateUser.js","components/FormCreateBooking.js","pages/CreateBookings.js","components/FormSettings.js","pages/Settings.js","routes/Routes.js","pages/Main.js","App.js","serviceWorker.js","index.js"],"names":["baseURL","console","log","axios","Axios","create","defaults","headers","post","interceptors","request","use","error","Promise","reject","response","newToken","authenticate","setAuthentication","localStorage","setItem","err","status","authenticated","window","location","reload","errortext","data","message","parseError","notification","warn","description","checkStatus","e","login","email","password","getSchedule","page","perPage","get","book","unix","user","getId","then","res","success","catch","handleError","deleteBooking","delete","getUserBookings","id","getPoints","getSettings","saveSettings","settings","put","getDaySlots","getBookings","getUsers","updateUser","userId","patch","deleteUser","createUser","changePassword","close","open","bookForUser","bookBatch","deleteUserBooking","this","token","getItem","client","jwt_decode","_id","admin","exp","common","isExpired","history","removeItem","undefined","push","moment","isBefore","name","Component","component","rest","children","render","props","isAuthenticated","isAdmin","to","pathname","state","from","layout","labelCol","span","wrapperCol","tailLayout","offset","useHistory","useState","loading","setLoading","onFinish","a","Wrapper","className","initialValues","remember","Item","label","rules","required","Password","type","htmlType","styled","div","Header","Layout","title","size","onClick","logout","shape","icon","LogoutOutlined","useEffect","setCurrent","replace","current","adminMenu","key","UserOutlined","UserAddOutlined","BookOutlined","SlidersOutlined","mode","selectedKeys","CalendarOutlined","KeyOutlined","map","item","style","margin","text","marginRight","setUser","options","setOptions","Option","Select","showSearch","width","placeholder","optionFilterProp","onChange","value","filterOption","input","option","toLowerCase","indexOf","slotId","onOk","fetchSchedule","show","setShow","toggle","childrenWithProps","React","Children","child","cloneElement","handleOk","finally","visible","onCancel","footer","disabled","DropDownUsersList","bookedAt","execute","action","CircleButton","forwardRef","ref","display","cancelLessonPopover","onConfirm","placement","locale","format","surname","okText","cancelText","viewUserPopover","LockOutlined","ModalAddUser","DeleteOutlined","UnlockOutlined","Menu","start","booking","setBooking","noop","availableButUncancellable","slotConfig","tagColor","popconfirm","tooltip","button","getConfig","TimeSlot","color","ScheduleAdminControls","Button","Badge","schedule","points","setPoints","getBookedSlots","slots","filter","slot","length","getFreeSlots","tableProps","expandable","expandedRowRender","record","justifyContent","i","ScheduleSlot","columns","PointsDisplay","dataIndex","Math","random","count","backgroundColor","pagination","pageSize","dataSource","pag","alignItems","height","setSchedule","convertToTableValues","result","day","Spin","ScheduleTable","onComplete","min","dependencies","hasFeedback","getFieldValue","validator","rule","resolve","flexDirection","FormPassword","checkAdmin","setCheckAdmin","checkDisabled","setCheckDisabled","verifyPoints","defaultChecked","fetchUsers","FormUser","deleteUserPopConfirm","DeleteButton","CloseCircleOutlined","FormEditUser","ellipsis","hideOnSmall","CheckOutlined","getResponsiveColumns","smallScreen","query","users","setUsers","convert","TableUsers","consonants","split","vowels","floor","toString","substr","createdUser","setCreatedUser","padding","marginBottom","userWithPassword","generatePassword","onSubmit","setUserId","setDay","setSlot","setFrom","add","setTo","defaultValue","dayIndex","date","allowClear","setSlots","FormCreateBooking","week","setDayIndex","startHours","startMinutes","slotNumber","off","weekSettings","setWeekSettings","handleChangeWeekSettings","field","index","newWeekSettings","Array","hours","minutes","target","checked","DaySettings","h","m","time","offet","lastBookableDay","cancelationNotice","interval","expireOffset","slotDuration","dailyLimit","validSettings","hidden","max","step","onSelect","setSettings","FormSettings","exact","path","Schedule","ChangePassword","Users","CreateUser","CreateBookings","Settings","HeaderMenu","Routes","basename","process","Login","ProtectedRoute","Main","Boolean","hostname","match","Sentry","dsn","ReactDOM","App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"+UAGIA,EAAU,4BAGZA,EAAU,oDAGZC,QAAQC,IAAI,wBAAyBF,GAErC,IAAMG,EAAQC,IAAMC,OAAO,CAAEL,YAE7BG,EAAMG,SAASC,QAAQC,KAAK,gBAAkB,mBAE9CL,EAAMM,aAAaC,QAAQC,KAAI,SAAAD,GAE7B,OADAT,QAAQC,IAAIQ,GACLA,KACN,SAAAE,GAED,OADAX,QAAQC,IAAIU,GACLC,QAAQC,OAAOF,MAGxBT,EAAMM,aAAaM,SAASJ,KAAI,SAAAI,GAE9B,IAAMC,EAAWD,EAASR,QAAQ,gBAQlC,OANIS,IACFC,EAAaC,kBAAkBF,GAC/BG,aAAaC,QAAQ,UAAWJ,IAGlCf,QAAQC,IAAIa,GACLA,KACN,SAAAH,GAED,OADAX,QAAQC,IAAIU,GACLC,QAAQC,OAAOF,MAGTT,Q,kBCJA,WAACkB,GACd,IAEE,OA3BgB,SAAAN,GAElB,IAAY,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUO,SAAU,MAAe,OAARP,QAAQ,IAARA,OAAA,EAAAA,EAAUO,QAAS,IAChD,OAAOP,EAGgB,OAAb,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUO,UACZL,EAAaM,eAAgB,EAC7BC,OAAOC,SAASC,UAGlB,IAAMC,EAnBW,SAAAZ,GAAa,IAAD,IACO,IAApC,cAAIA,QAAJ,IAAIA,GAAJ,UAAIA,EAAUa,YAAd,iBAAI,EAAgBhB,aAApB,aAAI,EAAuBiB,SACzB,OAAOd,QAAP,IAAOA,GAAP,UAAOA,EAAUa,YAAjB,iBAAO,EAAgBhB,aAAvB,aAAO,EAAuBiB,QAE9B,OAAOd,QAAP,IAAOA,OAAP,EAAOA,EAAUc,QAeDC,CAAWf,GAE7BgB,IAAaC,KAAK,CAChBH,QAAS,QACTI,YAAaN,IAWbO,EAAe,OAAHb,QAAG,IAAHA,OAAA,EAAAA,EAAKN,UAAL,OAAgBM,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAKN,SAAWM,GACrCR,QAAQC,SAEjB,MAAMqB,GAEJ,OADAlC,QAAQC,IAAIiC,GACLtB,QAAQC,WCrCJ,GAEbsB,MAFa,SAEPC,EAAOC,GACX,OAAOnC,EAAMK,KAAK,iBAAkB,CAAE6B,QAAOC,cAG/CC,YANa,SAMDC,EAAMC,GAChB,OAAOtC,EAAMuC,IAAI,eAGnBC,KAVa,SAURC,GACH,OAAOzC,EAAMK,KAAK,aAAc,CAAEoC,OAAMC,KAAM5B,EAAa6B,UACxDC,MAAK,SAAAC,GAAsC,OAA7BnB,IAAQoB,QAAQ,oDAAoBD,KAClDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9B+B,cAhBa,SAgBCR,GACZ,OAAOzC,EAAMkD,OAAO,aAAeT,GAChCG,MAAK,SAAAC,GAAyC,OAAhCnB,IAAQoB,QAAQ,sEAAuBD,KACrDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BiC,gBAtBa,SAsBGC,GACd,OAAOpD,EAAMuC,IAAI,UAAYa,EAAK,aAC/BR,MAAK,SAAAC,GAAG,OAAIA,KACZE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BmC,UA5Ba,SA4BHD,GACR,OAAOpD,EAAMuC,IAAI,UAAYa,EAAK,WAC/BR,MAAK,SAAAC,GAAG,OAAIA,KACZE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAK9BoC,YApCa,WAqCX,OAAOtD,EAAMuC,IAAI,cACdK,MAAK,SAAAC,GAAG,OAAIA,KACZE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BqC,aA1Ca,SA0CAC,GACX,OAAOxD,EAAMyD,IAAI,aAAcD,GAC5BZ,MAAK,SAAAC,GAA4C,OAAnCnB,IAAQoB,QAAQ,kBAA0BD,KACxDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BwC,YAhDa,WAiDX,OAAO1D,EAAMuC,IAAI,mBACdK,MAAK,SAAAC,GAAG,OAAIA,KACZE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9ByC,YAtDa,WAuDX,OAAO3D,EAAMuC,IAAI,aACdK,MAAK,SAAAC,GAAG,OAAIA,KACZE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9B0C,SA5Da,WA6DX,OAAO5D,EAAMuC,IAAI,WACdK,MAAK,SAAAC,GAAG,OAAIA,KACZE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9B2C,WAlEa,SAkEFnB,EAAMoB,GACf,OAAO9D,EAAM+D,MAAM,UAAYD,EAAQpB,GACpCE,MAAK,SAAAC,GAA+C,OAAtCnB,IAAQoB,QAAQ,qBAA6BD,KAC3DE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9B8C,WAxEa,SAwEFF,GACT,OAAO9D,EAAMkD,OAAO,UAAYY,GAC7BlB,MAAK,SAAAC,GAA0C,OAAjCnB,IAAQoB,QAAQ,gBAAwBD,KACtDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9B+C,WA9Ea,SA8EFvB,GACT,OAAO1C,EAAMK,KAAK,SAAUqC,GACzBE,MAAK,SAAAC,GAA0C,OAAjCnB,IAAQoB,QAAQ,gBAAwBD,KACtDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BgD,eApFa,SAoFE/B,EAAU2B,GACvB,OAAO9D,EAAM+D,MAAM,UAAYD,EAAQ,CAAE3B,aACtCS,MAAK,SAAAC,GAA8C,OAArCnB,IAAQoB,QAAQ,oBAA4BD,KAC1DE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BiD,MA1Fa,SA0FP1B,GACJ,OAAOzC,EAAMK,KAAK,kBAAmB,CAAEoC,SACpCG,MAAK,SAAAC,GAAyC,OAAhCnB,IAAQoB,QAAQ,eAAuBD,KACrDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BkD,KAhGa,SAgGR3B,GACH,OAAOzC,EAAMkD,OAAO,aAAeT,GAChCG,MAAK,SAAAC,GAAyC,OAAhCnB,IAAQoB,QAAQ,eAAuBD,KACrDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BmD,YAtGa,SAsGD5B,EAAMqB,GAChB,OAAO9D,EAAMK,KAAK,aAAc,CAAEoC,OAAMC,KAAMoB,IAC3ClB,MAAK,SAAAC,GAA2C,OAAlCnB,IAAQoB,QAAQ,iBAAyBD,KACvDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BoD,UA5Ga,SA4GH7C,GACR,OAAOzB,EAAMK,KAAK,kBAAX,eAAmCoB,IACvCmB,MAAK,SAAAC,GAA4C,OAAnCnB,IAAQoB,QAAQ,kBAA0BD,KACxDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,OAG9BqD,kBAlHa,SAkHK9B,GAChB,OAAOzC,EAAMkD,OAAO,aAAeT,GAClCG,MAAK,SAAAC,GAA6C,OAApCnB,IAAQoB,QAAQ,mBAA2BD,KACzDE,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,Q,iBCvCf,M,WA3Eb,aAAe,oBAEbsD,KAAKpD,eAAgB,EAErB,IAAMqD,EAAQzD,aAAa0D,QAAQ,WAE/BD,GAAOD,KAAKzD,kBAAkB0D,G,2FAGxBvC,EAAOC,G,qGAEVwC,EAAO1C,MAAMC,EAAOC,GACxBS,MAAK,SAAAC,GACJ,EAAK9B,kBAAkB8B,EAAIpB,MAC3BT,aAAaC,QAAQ,UAAW4B,EAAIpB,SAErCsB,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,O,4IAGZuD,GAAQ,IAAD,EAMnBG,IAAWH,GAHbI,EAHqB,EAGrBA,IACAC,EAJqB,EAIrBA,MACAC,EALqB,EAKrBA,IAGFP,KAAKC,MAAQA,EACbD,KAAKpB,GAAKyB,EACVL,KAAKM,MAAQA,EACbN,KAAKO,IAAMA,EAEX/E,EAAMG,SAASC,QAAQ4E,OAAO,gBAAkBP,EAE5CD,KAAKS,YACPT,KAAKpD,eAAgB,EAErBoD,KAAKpD,eAAgB,I,6BAKlB8D,GACLV,KAAKpD,eAAgB,EACrBJ,aAAamE,WAAW,WACxBnF,EAAMG,SAASC,QAAQ4E,OAAO,qBAAkBI,EAChDF,EAAQG,KAAK,Y,kCAIb,OAASC,MAASC,SAASD,IAAO7C,KAAK+B,KAAKO,Q,wCAI5C,OAAOP,KAAKpD,gB,gCAIZ,OAAOoD,KAAKM,Q,iCAIZ,OAAON,KAAKC,Q,8BAIZ,OAAOD,KAAKpB,K,gCAIZ,OAAOoB,KAAKgB,S,MC1ED,kBAAaC,EAAb,EAAEC,UAAsBZ,EAAxB,EAAwBA,MAAoBa,GAA5C,EAA+BC,SAA/B,wDACb,kBAAC,IAAD,iBAAWD,EAAX,CAAiBE,OACf,SAAAC,GAAK,OAAKhF,EAAaiF,oBAAsBjF,EAAakF,WAAclB,EAElE,kBAAC,IAAD,CAAUmB,GAAI,CAAEC,SAAU,SAAUC,MAAO,CAAEC,KAAMN,EAAMxE,aADzD,kBAACmE,EAAcK,Q,yZCDzB,IAAMO,EAAS,CACbC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAGhBE,EAAa,CACjBD,WAAY,CAAEE,OAAQ,EAAGH,KAAM,KAGlB,aAEb,IAAMrB,EAAUyB,cAFG,EAIWC,oBAAS,GAJpB,mBAIZC,EAJY,KAIHC,EAJG,KAMbC,EAAQ,uCAAG,+BAAAC,EAAA,sDAAQ9E,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SAC9B2E,GAAW,GACXhG,EAAamB,MAAMC,EAAOC,GACvBS,MAAK,kBAAMsC,EAAQG,KAAK,gBACxBtC,OAAM,kBAAM+D,GAAW,MAJX,2CAAH,sDAOd,OACE,kBAACG,EAAD,KACE,yBAAKC,UAAU,wBACb,yDACA,kBAAC,IAAD,iBACMb,EADN,CAEEb,KAAK,QACL2B,cAAe,CAAEC,UAAU,EAAMlF,MAAO,kBAAmBC,SAAU,cACrE4E,SAAUA,IAEV,kBAAC,IAAKM,KAAN,CACEC,MAAM,qBACN9B,KAAK,QACL+B,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,8BAEnC,kBAAC,IAAD,OAGF,kBAAC,IAAK2F,KAAN,CACEC,MAAM,iCACN9B,KAAK,WACL+B,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,iCAEnC,kBAAC,IAAM+F,SAAP,OAGF,kBAAC,IAAKJ,KAASZ,EACb,kBAAC,IAAD,CAAQiB,KAAK,UAAUC,SAAS,SAASd,QAASA,GAAlD,iCAUNI,EAAUW,IAAOC,IAAV,K,gUC1DLC,EAAWC,IAAXD,OAEO,aAEb,IAAM5C,EAAUyB,cAEhB,OACE,kBAAC,EAAD,KACE,kBAACmB,EAAD,CAAQZ,UAAU,UAChB,yBAAKA,UAAU,QAAf,WAEEpG,EAAaM,eACb,kBAAC,IAAD,CAAS4G,MAAM,kCACb,kBAAC,IAAD,CAAQC,KAAK,QAAQC,QAAS,kBAAMpH,EAAaqH,OAAOjD,IAAUkD,MAAM,SAASC,KAAM,kBAACC,EAAA,EAAD,YAQ7FrB,EAAUW,IAAOC,IAAV,K,kLCfE,kBAEb,IAAM3C,EAAUyB,cAGhB4B,qBAAU,WACRC,EAAWnH,OAAOC,SAAS4E,SAASuC,QAAQ,IAAK,QANhC,MASW7B,mBAAS,QATpB,mBASZ8B,EATY,KASHF,EATG,KAgBbG,EAAY,CAChB,kBAAC,IAAKtB,KAAN,CAAWuB,IAAI,SACb,kBAACC,EAAA,EAAD,MACA,0BAAM3B,UAAU,SAAhB,UAEF,kBAAC,IAAKG,KAAN,CAAWuB,IAAI,eACb,kBAACE,EAAA,EAAD,MACA,0BAAM5B,UAAU,SAAhB,gBAEF,kBAAC,IAAKG,KAAN,CAAWuB,IAAI,mBACb,kBAACG,EAAA,EAAD,MACA,0BAAM7B,UAAU,SAAhB,oBAEF,kBAAC,IAAKG,KAAN,CAAWuB,IAAI,YACb,kBAACI,EAAA,EAAD,MACA,0BAAM9B,UAAU,SAAhB,cAIJ,OACE,kBAAC,GAAD,KACE,kBAAC,IAAD,CAAM+B,KAAK,aAAaC,aAAcR,EAASR,QA1B/B,SAAAlG,GAClBwG,EAAWxG,EAAE4G,KACb1D,EAAQG,KAAK,IAAMrD,EAAE4G,OAyBjB,kBAAC,IAAKvB,KAAN,CAAWuB,IAAI,YACb,kBAACO,GAAA,EAAD,MACA,0BAAMjC,UAAU,SAAhB,aAEF,kBAAC,IAAKG,KAAN,CAAWuB,IAAI,mBACb,kBAACQ,GAAA,EAAD,MACA,0BAAMlC,UAAU,SAAhB,oBAEDpG,EAAakF,WAAa2C,EAAUU,KAAI,SAAAC,GAAI,OAAIA,QAMnDrC,GAAUW,IAAOC,IAAV,MC9DE,YAAC/B,GAAD,OACb,kBAAC,IAAD,eAAQsC,MAAM,QAAQH,KAAK,QAAQsB,MAAO,CAAEC,OAAQ,QAAc1D,GAC/DA,EAAMF,W,8BCFI,mBAAGyC,EAAH,EAAGA,KAAMoB,EAAT,EAASA,KAAT,OACb,kBAAC,KAAD,CAAOtI,OAAQkH,EAAMoB,KAAMA,EAAMF,MAAO,CAAEG,YAAa,U,kDCA1C,eAAkB,IAAfC,EAAc,EAAdA,QAAc,EAEA/C,mBAAS,IAFT,mBAEvBgD,EAFuB,KAEdC,EAFc,KAI9BtB,qBAAU,WACR5D,EAAOf,WACJhB,MAAK,SAAAC,GAAG,OAAIgH,EAAWhH,EAAIpB,SAC3BsB,OAAM,SAAA7B,GAAG,OAAIpB,QAAQC,IAAImB,QAC3B,IAR2B,IAUtB4I,EAAWC,KAAXD,OAMR,OACE,kBAAC,KAAD,CACEE,YAAU,EACVT,MAAO,CAAEU,MAAO,KAChBC,YAAY,gBACZC,iBAAiB,WACjBC,SAVJ,SAAkBC,GAChBV,EAAQU,IAUNC,aAAc,SAACC,EAAOC,GAAR,OACZA,EAAO5E,SAAS6E,cAAcC,QAAQH,EAAME,gBAAkB,IAG/Db,EAAQP,KAAI,SAAA3G,GAAI,OACf,kBAACoH,EAAD,CACElB,IAAKlG,EAAKR,MACVmI,MAAO3H,EAAKmC,KAEXnC,EAAKR,YChCD,eAAgD,IAA7C0D,EAA4C,EAA5CA,SAAU+E,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,cAAoB,EAEpCjE,oBAAS,GAF2B,mBAErDkE,EAFqD,KAE/CC,EAF+C,OAG9BnE,oBAAS,GAHqB,mBAGrDC,EAHqD,KAG5CC,EAH4C,OAIpCF,mBAAS,MAJ2B,mBAIrDlE,EAJqD,KAI/CiH,EAJ+C,KAMtDqB,EAAS,kBAAMD,GAASD,IAExBG,EAAoBC,IAAMC,SAAS9B,IAAIzD,GAAU,SAAAwF,GAAK,OAC1DC,uBAAaD,EAAO,CAAElD,QAAS8C,OAG3BM,EAAW,WACfxE,GAAW,GACX8D,EAAKD,EAAQjI,GACVE,MAAK,kBAAMiI,OACXU,SAAQ,WACPzE,GAAW,GACXiE,GAAQ,OAId,OACE,oCACGE,EACD,kBAAC,KAAD,CACEjD,MAAM,sBACNwD,QAASV,EACTF,KAAMU,EACNG,SAAUT,EACVU,OAAQ,CACN,kBAAC,IAAD,CAAQ9C,IAAI,OAAOV,QAAS8C,GAA5B,UAGA,kBAAC,IAAD,CAAQpC,IAAI,SAASlB,KAAK,UAAUb,QAASA,EAASqB,QAASoD,EAAUK,cAAmBvG,IAAT1C,GAAnF,QAKF,8CACA,kBAACkJ,GAAD,CAAmBjC,QAASA,OCrCrB,eAAsD,IAAnDxI,EAAkD,EAAlDA,OAAQ0K,EAA0C,EAA1CA,SAAUnJ,EAAgC,EAAhCA,KAAMD,EAA0B,EAA1BA,KAAMoI,EAAoB,EAApBA,cAAoB,EAEpCjE,oBAAS,GAF2B,mBAE3DC,EAF2D,KAElDC,EAFkD,KAM5DgF,EAAU,SAACC,GACfjF,GAAW,GACXiF,EAAOtJ,GAAM8I,SAAQ,WACnBV,QAKEmB,EAAeC,sBAAW,SAACnG,EAAOoG,GAAR,OAC9B,yBAAK3C,MAAO,CAAE4C,QAAS,gBAAkBD,IAAKA,GAC5C,kBAAC,IAAD,eAAQ9D,MAAM,SAASH,KAAK,QAAQsB,MAAO,CAAEG,YAAa,QAAa5D,QAGrEsG,EAAsB,CAC1BC,UAAW,kBAAMP,EAAQnH,EAAOJ,oBAChC+H,UAAW,MACXtE,MACE,oCACE,8CACA,2EACA,2BAAI1C,IAAO7C,KAAKA,GAAM8J,OAAO,MAAMC,OAAO,SAC1C,kCAAI9J,QAAJ,IAAIA,OAAJ,EAAIA,EAAM8C,KAAV,WAAiB9C,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAM+J,UAE3BC,OAAQ,KACRC,WAAY,UAGRC,EAAkB,CACtBP,UA9BW,aA+BXC,UAAW,MACXtE,MACE,oCACE,wCACA,2CACStF,QADT,IACSA,OADT,EACSA,EAAM8C,KADf,IACqB,6BADrB,mBAEY9C,QAFZ,IAEYA,OAFZ,EAEYA,EAAM+J,QAFlB,IAE2B,6BAF3B,iBAGU/J,QAHV,IAGUA,OAHV,EAGUA,EAAMR,MAHhB,IAGuB,6BAHvB,OAIOoD,IAAO7C,KAAKoJ,GAAUU,OAAO,MAAMC,OAAO,QAJjD,IAI0D,+BAG9DE,OAAQ,KACRC,WAAY,UAsCd,OAnCa,WACX,OAAQxL,GACN,IAAK,YACL,IAAK,yBACH,OACE,oCACE,kBAAC6K,EAAD,CAAc9D,QAAS,kBAAM4D,EAAQnH,EAAOR,QAAQkE,KAAM,kBAACwE,GAAA,EAAD,MAAkBlB,SAAU9E,IACtF,kBAACiG,GAAD,CAAcnC,OAAQlI,EAAMmI,KAAMjG,EAAON,YAAawG,cAAeA,GACjE,kBAACmB,EAAD,CAAc3D,KAAM,kBAACS,EAAA,EAAD,UAI9B,IAAK,SACL,IAAK,sBACH,OACE,oCACE,kBAAC,KAAesD,EACd,kBAACJ,EAAD,CAAc3D,KAAM,kBAAC0E,GAAA,EAAD,MAAoBpB,SAAU9E,KAEpD,kBAAC,KAAe+F,EACd,kBAACZ,EAAD,CAAc3D,KAAM,kBAACQ,EAAA,EAAD,MAAkB8C,SAAU9E,MAIxD,IAAK,cACH,OAAO,KACT,IAAK,SACH,OACE,kBAACmF,EAAD,CAAc9D,QAAS,kBAAM4D,EAAQnH,EAAOP,OAAOiE,KAAM,kBAAC2E,GAAA,EAAD,MAAoBrB,SAAU9E,IAE3F,QACE,OAAO,MAINoG,ICpFM,YAACnH,GAAW,IAEjBrD,EAAkEqD,EAAlErD,KAAMyK,EAA4DpH,EAA5DoH,MAAO/L,EAAqD2E,EAArD3E,OAAQuB,EAA6CoD,EAA7CpD,KAAMmI,EAAuC/E,EAAvC+E,cAAesC,EAAwBrH,EAAxBqH,QAASC,EAAetH,EAAfsH,WAFnC,EAGMxG,oBAAS,GAHf,mBAGjBC,EAHiB,KAGRC,EAHQ,KAKlBuG,EAAO,aAEPvB,EAAU,SAACC,GACfqB,GAAW,GACXtG,GAAW,GACXiF,EAAOtJ,GAAM8I,SAAQ,WACnBV,IACGU,SAAQ,WACP6B,GAAW,GACXtG,GAAW,UAKbwG,EAA4B,CAChCjB,UAAW,kBAAMP,EAAQnH,EAAOnC,OAChCmJ,UAAU,EACVW,UAAW,MACXtE,MAAO,0FAAa,6BAAM,6BAAnB,6HACP0E,OAAQ,eACRC,WAAY,kCAyGRY,EAtGY,SAAApM,GAEhB,GAAKL,EAAakF,UA6DhB,OAAQ7E,GACN,IAAK,YACL,IAAK,yBACH,MAAO,CACLqM,SAAU,QACVtF,QAASmF,EACTI,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,UACNoB,KAAM,aAEV,IAAK,SACL,IAAK,sBACH,MAAO,CACL+D,SAAU,MACVtF,QAASmF,EACTI,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,aACNoB,KAAK,GAAD,cAAK/G,QAAL,IAAKA,OAAL,EAAKA,EAAM+J,UAEnB,IAAK,cACH,MAAO,CACLe,SAAU,UACVtF,QAASmF,EACTI,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,UACNoB,KAAM,eAEV,QACE,MAAO,CACL+D,SAAU,WACVtF,QAASmF,EACTI,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,UACNoB,KAAM,eA5FZ,OAAQtI,GACN,IAAK,YACH,MAAO,CACLuM,QAAS,uCACTC,OAAQ,UACRzF,QAAS,kBAAM4D,EAAQnH,EAAOnC,OAC9BiL,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,UACNoB,KAAM,sBAEV,IAAK,yBACH,MAAO,CACLiE,QAAS,uCACTC,OAAQ,UACRzF,QAASmF,EACTI,WAAYH,EACZjF,KAAM,UACNoB,KAAM,sBAEV,IAAK,SACH,MAAO,CACLiE,QAAS,iCACTC,OAAQ,UACRzF,QAAS,kBAAM4D,EAAQnH,EAAO1B,gBAC9BwK,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,aACNoB,KAAM,gBAEV,IAAK,sBACH,MAAO,CACLiE,QAAS,+DACTC,OAAQ,SACRzF,QAASmF,EACTI,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,aACNoB,KAAM,gBAEV,IAAK,cASL,QACE,MAAO,CACLiE,QAAS,6CACTC,OAAQ,SACRzF,QAASmF,EACTI,WAAY,CAAE9B,UAAU,GACxBtD,KAAM,UACNoB,KAAM,iBA6CGmE,CAAUzM,GAEvB0M,EAAW,kBACf/M,EAAakF,UAET,oCACE,kBAAC,KAAD,CAAK8H,MAAOP,EAAWC,SAAUjE,MAAO,CAAEC,OAAQ,QAAU0D,GAC5D,kBAACa,GAA0BjI,IAG/B,kBAAC,KAAeyH,EAAWE,WACzB,kBAAC,IAAD,CAASnB,UAAU,OAAOtE,MAAOuF,EAAWG,SAC1C,kBAACM,GAAD,CAAQtG,KAAM6F,EAAWI,OAAQzF,QAASqF,EAAWrF,QAASrB,QAASA,EAAS8E,UAAW9E,GAAWsG,GACnGD,MAKX,OACE,oCACE,kBAACW,EAAD,MACA,kBAACI,GAAD,CAAO5F,KAAMkF,EAAWlF,KAAMoB,KAAM8D,EAAW9D,SC3JtC,eAAmB,IAAhByE,EAAe,EAAfA,SAAe,EAEDtH,oBAAS,GAFR,mBAExBC,EAFwB,KAEfC,EAFe,OAGHF,qBAHG,mBAGxBuH,EAHwB,KAGhBC,EAHgB,KAY/B,OAPA7F,qBAAU,WACR5D,EAAOtB,UAAUvC,EAAa6B,SAC3BC,MAAK,SAAAC,GAAG,aAAIuL,EAAS,OAACvL,QAAD,IAACA,GAAD,UAACA,EAAKpB,YAAN,aAAC,EAAW0M,WACjC5C,SAAQ,kBAAMzE,GAAW,QAE3B,CAACoH,IAGF,0CACW,4BAAQ3E,MAAO,CAAEuE,MAAkB,IAAXK,EAAe,MAAQ,UACrDtH,EAAU,MAAQsH,GAFvB,a,UCVW,eAAkC,IAA/BD,EAA8B,EAA9BA,SAAUrD,EAAoB,EAApBA,cAAoB,EAEhBjE,oBAAS,GAFO,mBAEvCuG,EAFuC,KAE9BC,EAF8B,KAkBxCiB,EAAiB,SAAAC,GAAK,OAC1BxN,EAAakF,UACTsI,EAAMC,QAAO,SAAAC,GAAI,OAAmB,QAAX,OAAJA,QAAI,IAAJA,OAAA,EAAAA,EAAM9L,SAAe+L,OAC1CH,EAAMC,QAAO,SAAAC,GAAI,aAAQ,OAAJA,QAAI,IAAJA,GAAA,UAAAA,EAAM9L,YAAN,eAAYmC,OAAQ/D,EAAa6B,WAAS8L,QAE/DC,EAAe,SAAAJ,GAAK,OAAIA,EAAMC,QAAO,SAAAC,GAAI,MAAqB,cAAhBA,EAAKrN,UAA6C,2BAAhBqN,EAAKrN,WAAsCsN,QAgC3HE,EAAa,CACjBC,WAPiB,CACjBC,kBAAmB,SAAAC,GAAM,OA9CbR,EA8CuBQ,EAAOR,OA7ChCG,OAAS,EAEf,yBAAKvH,UAAU,aAAaqC,MAAO,CAAE4C,QAAS,OAAQ4C,eAAgB,WACpE,6BACGT,EAAMjF,KAAI,SAACmF,EAAMQ,GAAP,OAAY,yBAAKpG,IAAKoG,GAAG,kBAACC,GAAD,iBAAmBT,EAAnB,CAA0B3D,cAAeA,EAAesC,QAASA,EAASC,WAAYA,WAKzH,kDAVG,IAAAkB,IAqDZY,QAhCc,CACd,CACElH,MAAOlH,EAAakF,UAAY,WAAa,kBAACmJ,GAAD,CAAejB,SAAUA,IACtEkB,UAAW,OACXxG,IAAK,MACL/C,OAAQ,SAAApD,GAAI,OACV,oCACE,gCAAS6C,IAAO7C,KAAKA,GAAM+J,OAAO,OADpC,iBACwDlH,IAAO7C,KAAKA,GAAM+J,OAAO,SAGrF,CACE4C,UAAW,QACXxG,IAAKyG,KAAKC,SACVrF,MAAO,KACPpE,OAAQ,SAAAyI,GAAK,OAAI,kBAAC,KAAD,CAAOtG,MAAM,eAAeuH,MAAOlB,EAAeC,GAAQ/E,MAAO,CAAEiG,gBAAiB,eAEvG,CACEJ,UAAW,QACXxG,IAAKyG,KAAKC,SACVrF,MAAO,KACPpE,OAAQ,SAAAyI,GAAK,OAAI,kBAAC,KAAD,CAAOtG,MAAM,aAAauH,MAAOb,EAAaJ,GAAQ/E,MAAO,CAAEiG,gBAAiB,gBAanGC,WAAY,CAAEC,SAAU,GACxBC,WAAYzB,EAEZ3E,MAAO,CAAEU,MAAO,QAChBG,SATqB,SAAAwF,GAAG,OAAI/E,EAAc+E,EAAIlH,QAASkH,EAAIF,YAY7D,OAAO,kBAAC,KAAWf,I,UCrEN,qBACb,yBAAKpF,MAAO,CACV4C,QAAS,OACT4C,eAAgB,SAChBc,WAAY,SACZC,OAAQ,SAER,kBAAC,KAAD,QCJW,cAAO,IAAD,EAEalJ,mBAAS,IAFtB,mBAEZsH,EAFY,KAEF6B,EAFE,OAGWnJ,oBAAS,GAHpB,mBAGZC,EAHY,KAGHC,EAHG,KAKbkJ,EAAuB,SAAAvO,GAE3B,IAAMwO,EAASxO,EAAK4H,KAAI,SAAA6G,GAAG,MAAK,CAC9BtH,IAAKsH,EAAIzN,KACTA,KAAMyN,EAAIzN,KACV6L,MAAO4B,EAAI5B,UAGbyB,EAAYE,IAIRpF,EAAa,uCAAG,sBAAA7D,EAAA,+EACpBrC,EAAOvC,cACJQ,MAAK,SAAAC,GAAG,OAAImN,GAAwB,OAAHnN,QAAG,IAAHA,OAAA,EAAAA,EAAKpB,OAAQ,OAC9CsB,OAAM,SAAA7B,GAAG,OAAI8B,EAAY9B,MACzBqK,SAAQ,kBAAMzE,GAAW,OAJR,2CAAH,qDAWnB,OALAyB,qBAAU,WACRsC,MAEC,IAEIhE,EACH,kBAACsJ,GAAD,MACA,kBAACC,GAAD,CAAelC,SAAUA,EAAUrD,cAAeA,KCjCzC,eAAkC,IAA/BzH,EAA8B,EAA9BA,GAAIiN,EAA0B,EAA1BA,WAAYxJ,EAAc,EAAdA,QAO1BJ,EAAa,CACjBD,WAAY,CAAEE,OAAQ,EAAGH,KAAM,KAKjC,OACE,kBAAC,IAAD,iBAZa,CACbD,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAUpB,CAEEf,KAAK,WACLuB,SANa,SAAC,GAAD,IAAG5E,EAAH,EAAGA,SAAH,OAAkBkO,EAAWlO,EAAUiB,MASpD,kBAAC,IAAKiE,KAAN,CACEC,MAAM,MACN9B,KAAK,WACL+B,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,wBAAyB4O,IAAK,KAEjE,kBAAC,IAAM7I,SAAP,OAGF,kBAAC,IAAKJ,KAAN,CACA7B,KAAK,UACL8B,MAAM,UACNiJ,aAAc,CAAC,YACfC,aAAW,EACXjJ,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,gCACjC,gBAAG+O,EAAH,EAAGA,cAAH,MAAwB,CACtBC,UADsB,SACZC,EAAMtG,GACd,OAAKA,GAASoG,EAAc,cAAgBpG,EAGrC3J,QAAQC,OAAO,oDAFbD,QAAQkQ,eAOrB,kBAAC,IAAMnJ,SAAP,OAGF,kBAAC,IAAKJ,KAASZ,EACb,kBAAC,IAAD,CAAQiB,KAAK,UAAUC,SAAS,SAASd,QAASA,GAAlD,sBC7CO,cAEb,IAAM3B,EAAUyB,cAFG,EAIWC,oBAAS,GAJpB,mBAIZC,EAJY,KAIHC,EAJG,KAYnB,OACE,yBAAKyC,MAAO,CAAE4C,QAAS,OAAQ0E,cAAe,SAAUhB,WAAY,YAClE,wBAAItG,MAAO,CAAEC,OAAQ,KAArB,mBACA,kBAACsH,GAAD,CACEjK,QAASA,EACTwJ,WAXiB,SAAAlO,GACrBwC,EAAOT,eAAe/B,EAAUrB,EAAa6B,SAC1CC,MAAK,kBAAMsC,EAAQG,KAAK,gBACxBtC,OAAM,kBAAM+D,GAAW,W,kDCZf,eAAiF,IAA9E1D,EAA6E,EAA7EA,GAAIoC,EAAyE,EAAzEA,KAAMiH,EAAmE,EAAnEA,QAASvK,EAA0D,EAA1DA,MAAOiM,EAAmD,EAAnDA,OAAQrJ,EAA2C,EAA3CA,MAAO6G,EAAoC,EAApCA,SAAU9E,EAA0B,EAA1BA,QAASwJ,EAAiB,EAAjBA,WAAiB,EAEzDzJ,mBAAS9B,GAFgD,mBAEtFiM,EAFsF,KAE1EC,EAF0E,OAGnDpK,mBAAS+E,GAH0C,mBAGtFsF,EAHsF,KAGvEC,EAHuE,KAKvFC,EAAehD,EAOf1H,EAAa,CACjBD,WAAY,CAAEE,OAAQ,EAAGH,KAAM,KAYjC,OACE,kBAAC,IAAD,iBAnBa,CACbD,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAiBpB,CAEEf,KAAK,OACL2B,cAAe,CAAEC,UAAU,EAAO5B,OAAMiH,UAASvK,QAAOiM,UACxDpH,SAda,SAAArE,GACf2N,EAAW,eACN3N,EADK,CAERoC,MAAOiM,EACPpF,SAAUsF,EACVE,iBACC/N,MAUD,kBAAC,IAAKiE,KAAN,CACEC,MAAM,OACN9B,KAAK,OACL+B,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,4BAEnC,kBAAC,IAAD,OAGF,kBAAC,IAAK2F,KAAN,CACEC,MAAM,UACN9B,KAAK,UACL+B,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,+BAEnC,kBAAC,IAAD,OAGF,kBAAC,IAAK2F,KAAN,CACEC,MAAM,QACN9B,KAAK,QACL+B,MAAO,CAAC,CAAEC,UAAU,EAAM9F,QAAS,6BAA8BgG,KAAM,WAEvE,kBAAC,IAAD,OAGF,kBAAC,IAAKL,KAAN,CACEC,MAAM,SACN9B,KAAK,SACL+B,MAAO,CAAC,CAAEC,UAAU,KAEpB,kBAAC,KAAD,CAAa8I,IAAK,KAGpB,kBAAC,IAAKjJ,KAAN,CACEC,MAAM,SAEN,kBAAC,KAAD,CACE8C,SAAU,kBAAM4G,GAAeD,IAC/BK,eAAgBL,KAIpB,kBAAC,IAAK1J,KAAN,CACEC,MAAM,YAEN,kBAAC,KAAD,CACE8C,SAAU,kBAAM8G,GAAkBD,IAClCG,eAAgBH,KAIpB,kBAAC,IAAK5J,KAASZ,EACb,kBAAC,IAAD,CACEiB,KAAK,UACLb,QAASA,EACTc,SAAS,UAHX,W,+PC/EO,gBAAC7B,GAEd,IAAMZ,EAAUyB,cAER0K,EAAevL,EAAfuL,WAJgB,EAMMzK,oBAAS,GANf,mBAMjBC,EANiB,KAMRC,EANQ,KAQlBgF,EAAO,uCAAG,WAAMC,GAAN,SAAA/E,EAAA,sDACd+E,EACGnJ,MAAK,kBAAMyO,OACXtO,OAAM,kBAAMmC,EAAQG,KAAK,aACzBkG,SAAQ,kBAAMzE,GAAW,MAJd,2CAAH,sDAUb,OACE,kBAAC,GAAD,KACE,kBAACwK,GAAD,iBAAcxL,EAAd,CAAqBuK,WALR,SAAC3N,EAAMoB,GAAP,OAAkBgI,EAAQnH,EAAOd,WAAWnB,EAAMoB,KAKpB+C,QAASA,KACpD,kBAACiK,GAAD,CAAc1N,GAAI0C,EAAM1C,GAAIiN,WALT,SAAClO,EAAU2B,GAAX,OAAsBgI,EAAQnH,EAAOT,eAAe/B,EAAU2B,KAKzB+C,QAASA,MAKjEI,GAAUW,IAAOC,IAAV,MCzBE,eAAoC,IAAjCpG,EAAgC,EAAhCA,KAAMoF,EAA0B,EAA1BA,QAASwK,EAAiB,EAAjBA,WAEzBE,EAAuB,CAC3B5F,UAAU,EACVW,UAAW,OACXtE,MAAO,0CAAe,6BAAM,6BAArB,kCACP0E,OAAQ,KACRC,WAAY,UAGR6E,EAAe,SAAC,GAAD,IAAG1N,EAAH,EAAGA,OAAH,OACnB,kBAAC,KAAD,iBAAiByN,EAAjB,CAAwClF,UAAW,kBAAM1H,EAAOX,WAAWF,GAAQlB,MAAK,kBAAMyO,UAC5F,kBAACI,GAAA,EAAD,QAGE7C,EAAa,CACjBC,kBAAmB,SAAAC,GAAM,OAAI,kBAAC4C,GAAD,iBAAkB5C,EAAlB,CAA0BuC,WAAYA,OAG/DnC,EAAU,CACd,CACElH,MAAO,OACPoH,UAAW,OACXxG,IAAK,OACL+I,UAAU,EACV1H,MAAO,MACP2H,aAAa,GAEf,CACE5J,MAAO,UACPoH,UAAW,UACXxG,IAAK,UACL+I,UAAU,EACV1H,MAAO,OAET,CACEjC,MAAO,QACPoH,UAAW,QACXxG,IAAK,QACL+I,UAAU,EACV1H,MAAO,OAET,CACEjC,MAAO,kBAAC6E,GAAA,EAAD,MACPjE,IAAK,WACL/C,OAAQ,SAAAwE,GAAK,OAAIA,EAAQ,kBAACwH,GAAA,EAAD,MAAoB,IAC7CzC,UAAW,WACXnF,MAAO,OAET,CACEjC,MAAO,kBAACoB,GAAA,EAAD,MACPR,IAAK,QACL/C,OAAQ,SAAAwE,GAAK,OAAIA,EAAQ,kBAACwH,GAAA,EAAD,MAAoB,IAC7CzC,UAAW,QACXnF,MAAO,OAET,CACEjC,MAAO,GACPY,IAAK,KACLwG,UAAW,KACXvJ,OAAQ,SAAAwE,GAAK,OAAIvJ,EAAa6B,UAAY0H,EAAQ,KAAO,kBAACmH,EAAD,CAAc1N,OAAQuG,KAC/EJ,MAAO,QAIL6H,EAAuB,SAAAC,GAAW,OACtC7C,EAAQX,QAAO,oBAAGqD,YAAH,QAA+BG,SAA/B,eAEXpD,EAAa,CACjBC,aACAe,WAAYlO,EACZoF,QAASA,EACToB,KAAM,SAGR,OACE,kBAAC,KAAD,CAAO+J,MAAM,uBACT,SAAAD,GAAW,OAAI,kBAAC,KAAD,iBAAWpD,EAAX,CAAuBO,QAAS4C,EAAqBC,UCjF7D,cAAO,IAAD,EAEWnL,oBAAS,GAFpB,mBAEZC,EAFY,KAEHC,EAFG,OAGOF,mBAAS,IAHhB,mBAGZqL,EAHY,KAGLC,EAHK,KAqBbb,EAAa,kBACjB1M,EAAOf,WACJhB,MAAK,SAAAC,GAAG,OAlBG,SAAApB,GAEd,IAAMwO,EAASxO,EAAK4H,KAAI,SAAA3G,GAAI,MAAK,CAC/BkG,IAAKlG,EAAKmC,IACVzB,GAAIV,EAAKmC,IACTW,KAAM9C,EAAK8C,KACXiH,QAAS/J,EAAK+J,QACdvK,MAAOQ,EAAKR,MACZiM,OAAQzL,EAAKyL,OACbrJ,MAAOpC,EAAKoC,MACZ6G,SAAUjJ,EAAKiJ,aAGjBuG,EAASjC,GAKMkC,EAAW,OAAHtP,QAAG,IAAHA,OAAA,EAAAA,EAAKpB,OAAQ,OACjC8J,SAAQ,kBAAMzE,GAAW,OAI9B,OAFAyB,qBAAU,WAAQ8I,MAAgB,IAE3B,kBAACe,GAAD,CAAY3Q,KAAMwQ,EAAOpL,QAASA,EAASwK,WAAYA,KChCjD,cAIb,IAHA,IAAMgB,EAAa,wBAAwBC,MAAM,IAC3CC,EAAS,QAAQD,MAAM,IACzBnQ,EAAW,GACN6M,EAAI,EAAGA,EAAI,EAAGA,IACrB7M,GAAYkQ,EAAWhD,KAAKmD,MAAMnD,KAAKC,SAAW+C,EAAW5D,SAC7DtM,GAAYoQ,EAAOlD,KAAKmD,MAAMnD,KAAKC,SAAWiD,EAAO9D,SAGvD,OADAtM,GAAYkN,KAAKC,SAASmD,WAAWC,OAAO,EAAG,ICDlC,cAEb,IAAMxN,EAAUyB,cAFG,EAIWC,oBAAS,GAJpB,mBAIZC,EAJY,KAIHC,EAJG,OAKmBF,mBAAS,MAL5B,mBAKZ+L,EALY,KAKCC,EALD,KAgBnB,OACED,EAEI,yBAAKpJ,MAAO,CAAE4C,QAAS,OAAQ0E,cAAe,SAAUhB,WAAY,SAAUgD,QAAS,KACrF,wBAAItJ,MAAO,CAAEuJ,aAAc,KAA3B,gBACA,oCAAUH,EAAYnN,MACtB,uCAAamN,EAAYlG,SACzB,qCAAU,gCAASkG,EAAYzQ,QAC/B,wCAAa,gCAASyQ,EAAYxQ,WAClC,6BACA,kBAAC,IAAD,CAAQuF,KAAK,UAAUQ,QAAS,kBAAMhD,EAAQG,KAAK,YAAnD,OAIJ,yBAAKkE,MAAO,CAAE4C,QAAS,OAAQ0E,cAAe,SAAUhB,WAAY,YAClE,wBAAItG,MAAO,CAAEC,OAAQ,KAArB,eACA,kBAAC8H,GAAD,CAAUjB,WAzBG,SAAA3N,GACjBoE,GAAW,GACX,IAAMiM,EAAgB,eAAQrQ,EAAR,CAAcP,SAAU6Q,OAC9CrO,EAAOV,WAAW8O,GACfnQ,MAAK,kBAAMgQ,EAAeG,MAC1BhQ,OAAM,kBAAM6P,EAAe,SAC3BrH,SAAQ,kBAAMzE,GAAW,OAmBUD,QAASA,M,8KCjC3CiD,GAAWC,KAAXD,OAEFzD,GAAS,CACbC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAGhBE,GAAa,CACjBD,WAAY,CAAEE,OAAQ,EAAGH,KAAM,KAGlB,eAAmC,IAAD,EAA/B+H,EAA+B,EAA/BA,MAAOzH,EAAwB,EAAxBA,QAASoM,EAAe,EAAfA,SAAe,EAEnBrM,qBAFmB,mBAExC9C,EAFwC,KAEhCoP,EAFgC,OAGzBtM,mBAAS,GAHgB,mBAGxCsJ,EAHwC,KAGnCiD,EAHmC,OAIvBvM,oBAAS,UAAA0H,EAAM,GAAG,UAAT,eAAa7L,OAAQ,GAJP,mBAIxC+L,EAJwC,KAIlC4E,EAJkC,OAKvBxM,mBAAStB,OALc,mBAKxCc,EALwC,KAKlCiN,EALkC,OAM3BzM,mBAAStB,MAASgO,IAAI,EAAG,WANE,mBAMxCrN,EANwC,KAMpCsN,EANoC,KAUzCxM,EAAQ,uCAAG,sBAAAC,EAAA,sDACfiM,EAASnP,EAAQoM,EAAK1B,EAAMpI,EAAK3D,OAAQwD,EAAGxD,QAD7B,2CAAH,qDAId,OACE,kBAAC,GAAD,KACE,kBAAC,IAAD,iBACM4D,GADN,CAEEb,KAAK,QACLuB,SAAUA,IAGV,kBAAC,IAAKM,KAAN,CAAWC,MAAM,OAAO9B,KAAK,QAC3B,kBAACoG,GAAD,CAAmBjC,QAASuJ,KAG9B,kBAAC,IAAK7L,KAAN,CAAWC,MAAM,OACf,kBAAC,KAAD,CAAQkM,aAAc,EAAGpJ,SAAU,SAAAqJ,GAAQ,OAAIN,EAAOM,KAnBjD,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAoBhEpK,KAAI,SAAC6G,EAAKlB,GAAN,OAAY,kBAAC,GAAD,CAAQpG,IAAKyG,KAAKC,SAAUjF,MAAO2E,GAAIkB,QAIjE,kBAAC,IAAK7I,KAAN,CAAWC,MAAM,QACf,kBAAC,KAAD,CAAQsB,IAAK0F,EAAM4B,GAAK,GAAGzN,KAAM+Q,aAAclF,EAAM4B,GAAK,GAAG7F,MAAOD,SAAU,SAAAoE,GAAI,OAAI4E,EAAQ5E,KAC3FF,EAAM4B,GAAK7G,KAAI,gBAAG5G,EAAH,EAAGA,KAAM4H,EAAT,EAASA,MAAT,OAAqB,kBAAC,GAAD,CAAQzB,IAAKnG,EAAM4H,MAAO5H,GAAQ4H,QAI3E,kBAAC,IAAKhD,KAAN,CAAWC,MAAM,QACf,kBAAC,KAAD,CAAY+C,MAAOjE,EAAMgE,SAAU,SAAAsJ,GAAI,OAAIL,EAAQK,IAAOC,YAAY,KAGxE,kBAAC,IAAKtM,KAAN,CAAWC,MAAM,MACf,kBAAC,KAAD,CAAY+C,MAAOpE,EAAImE,SAAU,SAAAsJ,GAAI,OAAIH,EAAMG,IAAOC,YAAY,KAGpE,kBAAC,IAAKtM,KAASZ,GACb,kBAAC,IAAD,CAAQiB,KAAK,UAAUC,SAAS,SAASd,QAASA,GAAlD,cASJI,GAAUW,IAAOC,IAAV,MCnEE,cAEb,IAAM3C,EAAUyB,cAFG,EAIWC,oBAAS,GAJpB,mBAIZC,EAJY,KAIHC,EAJG,OAMOF,qBANP,mBAMZ0H,EANY,KAMLsF,EANK,KAQnBrL,qBAAU,WACR5D,EAAOjB,cACJd,MAAK,SAAAC,GACJ+Q,EAAS/Q,EAAIpB,MACbqF,GAAW,MAEZ/D,OAAM,kBAAMmC,EAAQG,KAAK,UAE3B,IAEH,IAAM4N,EAAQ,uCAAG,WAAMnP,EAAQoM,EAAK1B,EAAMpI,EAAMH,GAA/B,SAAAe,EAAA,sDACfrC,EAAOL,UAAU,CAAER,SAAQoM,MAAK1B,OAAMpI,OAAMH,OAD7B,2CAAH,8DAId,OACEY,EACE,kBAACsJ,GAAD,MAEA,yBAAK5G,MAAO,CAAE4C,QAAS,OAAQ0E,cAAe,SAAUhB,WAAY,YAClE,wBAAItG,MAAO,CAAEC,OAAQ,KAArB,mBACA,kBAACqK,GAAD,CAAmBZ,SAAUA,EAAU3E,MAAOA,M,+LC7BvC,mBAAwC,IAArC+B,EAAoC,EAApCA,WAAYxJ,EAAwB,EAAxBA,QAASrD,EAAe,EAAfA,SAO/BiD,EAAa,CACjBD,WAAY,CAAEE,OAAQ,GAAIH,KAAM,KAG5BuN,EAAO,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAX5B,EAapBlN,mBAAS,GAbW,mBAa7C6M,EAb6C,KAanCM,EAbmC,OAeZnN,mBACtCpD,EAASsQ,KAAKzK,KAAI,SAAA6G,GAAG,MAClB,CACC8D,WAAY9D,EAAI8D,WAChBC,aAAc/D,EAAI+D,aAClBC,WAAYhE,EAAIgE,WAChBC,IAAKjE,EAAIiE,SArBqC,mBAe7CC,EAf6C,KAe/BC,EAf+B,KA0B9CC,EAA2B,SAACtS,EAAGuS,EAAOC,GAE1C,IAAMC,EAAe,aAAOC,MAAP,aAAgBN,IAErC,OAAQG,GACN,IAAK,OACHE,EAAgBD,GAAOR,WAAahS,EAAE2S,QACtCF,EAAgBD,GAAOP,aAAcjS,EAAE4S,UACvC,MACF,IAAK,QACHH,EAAgBD,GAAON,WAAalS,EACpC,MACF,IAAK,MACHyS,EAAgBD,GAAOL,IAAMnS,EAAE6S,OAAOC,QAM1CT,EAAgBI,IA8BZM,EAAc,WAElB,IA7BuBC,EAAGC,EA8BpBC,GA9BiBF,EA8BMZ,EAAaX,GAAUO,WA9B1BiB,EA8BsCb,EAAaX,GAAUQ,aA9BvD3O,IAAO0P,EAAI,IAAMC,EAAG,UA+BpD,OACE,6BACE,kBAAC,IAAD,CAAS3I,UAAU,QAAQtE,MAAO,qBAAuB8L,EAAKL,IAC5D,kBAAC,KAAD,CACED,aAAc0B,EACd1I,OAPO,QAQPmH,YAAY,EACZpK,MAAO,CAAEuJ,aAAc,GACvB1I,SAAU,SAAApI,GAAC,OAAIsS,EAAyBtS,EAAG,OAAQyR,IACnDvM,UAAU,YAEJ,6BACV,kBAAC,IAAD,CAASoF,UAAU,QAAQtE,MAAO,uBAAyB8L,EAAKL,IAC9D,kBAAC,KAAD,CACEvJ,YAAY,QACZsJ,aAAcY,EAAaX,GAAUS,WACrC3K,MAAO,CAAEuJ,aAAc,GACvBxC,IAAK,EACLlG,SAAU,SAAApI,GAAC,OAAIsS,EAAyBtS,EAAG,QAASyR,IACpDvM,UAAU,YAEJ,6BACV,kBAAC,KAAD,CACEkK,eAAgBgD,EAAaX,GAAUU,IACvC/J,SAAU,SAAApI,GAAC,OAAIsS,EAAyBtS,EAAG,MAAOyR,KAFpD,aAUN,OACE,kBAAC,GAAD,KACA,kBAAC,IAAD,iBA/Ga,CACbnN,SAAU,CAAEI,OAAQ,EAAGH,KAAM,IAC7BC,WAAY,CAAE2O,MAAO,GAAI5O,KAAM,KA6G/B,CAEEf,KAAK,WACL2B,cAAa,aACXC,UAAU,GACP5D,EAFQ,CAGX4R,gBAAiB9P,IAAO7C,KAAKe,EAAS4R,iBACtClF,IAAK,IAEPnJ,SAtEa,SAAAvD,GAAa,IAG1B6R,EAKE7R,EALF6R,kBACAC,EAIE9R,EAJF8R,SACAC,EAGE/R,EAHF+R,aACAC,EAEEhS,EAFFgS,aACAC,EACEjS,EADFiS,WAGIC,EAAgB,CACpBL,oBACAC,WACAC,eACAC,eACAJ,gBAAiB5R,EAAS4R,gBAAgB3S,OAC1CgT,aACA3B,KAAMM,GAGR/D,EAAWqF,IAmDTxO,UAAU,kBAGV,kBAAC,IAAKG,KAAN,CAAW7B,KAAK,kBAAkB8B,MAAM,YACtC,kBAAC,KAAD,CAAYqM,YAAY,EAAOzM,UAAU,YAG3C,kBAAC,IAAKG,KAAN,CAAW7B,KAAK,eAAe8B,MAAM,uBAAuBqO,QAAQ,GAClE,kBAAC,KAAD,CAAarF,IAAK,EAAGsF,IAAK,KAAMC,KAAM,EAAG3O,UAAU,SAASyE,UAAQ,KAGtE,kBAAC,IAAKtE,KAAN,CAAW7B,KAAK,WAAW8B,MAAM,eAAeqO,QAAQ,GACtD,kBAAC,KAAD,CAAarF,IAAK,EAAGsF,IAAK,KAAMC,KAAM,EAAG3O,UAAU,SAASyE,UAAQ,KAGtE,kBAAC,IAAKtE,KAAN,CAAW7B,KAAK,eAAe8B,MAAM,kBACnC,kBAAC,KAAD,CAAagJ,IAAK,EAAGsF,IAAK,KAAMC,KAAM,EAAG3O,UAAU,YAGrD,kBAAC,IAAKG,KAAN,CAAW7B,KAAK,oBAAoB8B,MAAM,oBACxC,kBAAC,KAAD,CAAagJ,IAAK,EAAGsF,IAAK,IAAKC,KAAM,EAAG3O,UAAU,YAGpD,kBAAC,IAAKG,KAAN,CAAW7B,KAAK,aAAa8B,MAAM,aACjC,kBAAC,KAAD,CAAagJ,IAAK,EAAGuF,KAAM,EAAG3O,UAAU,YAG1C,kBAAC,IAAKG,KAAN,CAAW7B,KAAK,MAAM8B,MAAM,gBAC1B,kBAAC,KAAD,CACEwO,SAtGY,SAAAtB,GAAK,OAAIT,EAAYS,IAuGjC5K,QAASkK,EAAKzK,KAAI,SAAC6G,EAAKlB,GAAN,MAAa,CAAE1H,MAAO4I,EAAK7F,MAAO2E,SAGxD,kBAAC,IAAK3H,KAAN,CAAWC,MAAM,eACf,kBAACyN,EAAD,CAAatB,SAAUA,EAAUvM,UAAU,YAG7C,kBAAC,IAAKG,KAASZ,EACb,kBAAC,IAAD,CACEiB,KAAK,UACLb,QAASA,EACTc,SAAS,UAHX,YAcFV,GAAUW,IAAOC,IAAV,MC9KE,cAEb,IAAM3C,EAAUyB,cAFG,EAIWC,oBAAS,GAJpB,mBAIZC,EAJY,KAIHC,EAJG,OAKaF,qBALb,mBAKZpD,EALY,KAKFuS,EALE,KA6BnB,OALAxN,qBAAU,WATRzB,GAAW,GACXnC,EAAOrB,cACJV,MAAK,SAAAC,GACJkT,EAAYlT,EAAIpB,MAChBqF,GAAW,MAEZ/D,OAAM,kBAAMmC,EAAQG,KAAK,UAM3B,IAGDwB,EAEE,kBAACsJ,GAAD,MAEA,yBAAK5G,MAAO,CAAE4C,QAAS,OAAQ0E,cAAe,SAAUhB,WAAY,YAClE,wBAAItG,MAAO,CAAEC,OAAQ,KAArB,YACA,kBAACwM,GAAD,CACExS,SAAUA,EACVqD,QAASA,EACTwJ,WAhCa,SAAA7M,GACnBsD,GAAW,GACXnC,EAAOpB,aAAaC,GACjBZ,MAAK,SAAAC,GAAG,OAAIkT,EAAYlT,EAAIpB,SAC5B8J,SAAQ,kBAAMzE,GAAW,WCRjB,qBACb,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOmP,OAAK,EAACC,KAAM,CAAC,IAAK,aAAcxQ,UAAW,kBAAM,kBAACyQ,GAAD,SACxD,kBAAC,IAAD,CAAOF,OAAK,EAACC,KAAM,mBAAoBxQ,UAAW,kBAAM,kBAAC0Q,GAAD,SAExD,kBAAC,IAAD,CAAOH,OAAK,EAACC,KAAM,SAAUxQ,UAAW,kBAAM,kBAAC2Q,GAAD,SAC9C,kBAAC,IAAD,CAAOJ,OAAK,EAACC,KAAM,eAAgBxQ,UAAW,kBAAM,kBAAC4Q,GAAD,SACpD,kBAAC,IAAD,CAAOL,OAAK,EAACC,KAAM,mBAAoBxQ,UAAW,kBAAM,kBAAC6Q,GAAD,SACxD,kBAAC,IAAD,CAAON,OAAK,EAACC,KAAM,YAAaxQ,UAAW,kBAAM,kBAAC8Q,GAAD,W,wkBCXxC,yBACb,kBAAC,GAAD,KACE,6BACE,kBAAC,EAAD,MACA,kBAACC,GAAD,MACA,yBAAKvP,UAAU,WACb,yBAAKA,UAAU,WACb,kBAACwP,GAAD,WAMJzP,GAAUW,IAAOC,IAAV,MCZE,qBACb,kBAAC,IAAD,CAAQ8O,SAAUC,6BAChB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOX,OAAK,EAACC,KAAK,UAAS,kBAACW,EAAD,OAC3B,kBAACC,EAAD,CAAgBZ,KAAK,IAAIxQ,UAAW,kBAAM,kBAACqR,GAAD,YCC5BC,QACW,cAA7B3V,OAAOC,SAAS2V,UAEe,UAA7B5V,OAAOC,SAAS2V,UAEhB5V,OAAOC,SAAS2V,SAASC,MACvB,2D,qBCVNC,KAAY,CAACC,IAAK,8EAElBC,IAASxR,OAKL,kBAACyR,GAAD,MAEFC,SAASC,eAAe,SDkHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB/U,MAAK,SAAAgV,GACJA,EAAaC,gBAEd9U,OAAM,SAAAtC,GACLX,QAAQW,MAAMA,EAAMiB,c","file":"static/js/main.e7b46cbc.chunk.js","sourcesContent":["import Axios from \"axios\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nlet baseURL = \"http://localhost:3333/api\";\r\n\r\nif (process.env.NODE_ENV === \"production\") {\r\n  baseURL = \"https://sickdyd-booking-manager.herokuapp.com/api\"\r\n}\r\n\r\nconsole.log(\"Sending requests to: \", baseURL);\r\n\r\nconst axios = Axios.create({ baseURL });\r\n\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n\r\naxios.interceptors.request.use(request => {\r\n  console.log(request);\r\n  return request;\r\n}, error => {\r\n  console.log(error);\r\n  return Promise.reject(error);\r\n});\r\n\r\naxios.interceptors.response.use(response => {\r\n  \r\n  const newToken = response.headers[\"x-auth-token\"];\r\n\r\n  if (newToken) {\r\n    authenticate.setAuthentication(newToken);\r\n    localStorage.setItem(\"bmtoken\", newToken);\r\n  }\r\n\r\n  console.log(response);\r\n  return response;\r\n}, error => {\r\n  console.log(error);\r\n  return Promise.reject(error);\r\n});\r\n\r\nexport default axios;","import { notification } from \"antd\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nconst parseError = response => {\r\n  if (response?.data?.error?.message) {\r\n    return response?.data?.error?.message;\r\n  } else {\r\n    return response?.message;\r\n  }\r\n}\r\n\r\nconst checkStatus = response => {\r\n\r\n  if (response?.status >= 200 && response?.status < 300) {\r\n    return response;\r\n  }\r\n\r\n  if (response?.status === 401) {\r\n    authenticate.authenticated = false;\r\n    window.location.reload();\r\n  }\r\n\r\n  const errortext = parseError(response);\r\n\r\n  notification.warn({\r\n    message: \"Error\",\r\n    description: errortext,\r\n  });\r\n  \r\n  // const error = new Error(errortext);\r\n  // error.name = response?.status || response;\r\n  // error.response = response;\r\n  // throw error;\r\n};\r\n\r\nexport default (err) => {\r\n  try {\r\n    checkStatus(err?.response ? err?.response : err)\r\n    return Promise.reject();\r\n  }\r\n  catch(e) {\r\n    console.log(e);\r\n    return Promise.reject();\r\n  };\r\n}","import axios from \"../api/axios\";\r\nimport { message } from \"antd\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport handleError from \"../notifications/handleError\";\r\n\r\nexport default {\r\n\r\n  login(email, password) {\r\n    return axios.post(\"/authenticate/\", { email, password })\r\n  },\r\n\r\n  getSchedule(page, perPage) {\r\n    return axios.get(\"/schedule/\")\r\n  },\r\n\r\n  book(unix) {\r\n    return axios.post(\"/bookings/\", { unix, user: authenticate.getId() })\r\n      .then(res => { message.success(\"予約をしました。\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  deleteBooking(unix) {\r\n    return axios.delete(\"/bookings/\" + unix)\r\n      .then(res => { message.success(\"予約が削除されました。\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getUserBookings(id) {\r\n    return axios.get(\"/users/\" + id + \"/bookings\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getPoints(id) {\r\n    return axios.get(\"/users/\" + id + \"/points\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  // Admin\r\n\r\n  getSettings() {\r\n    return axios.get(\"/settings/\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  saveSettings(settings) {\r\n    return axios.put(\"/settings/\", settings)\r\n      .then(res => { message.success(\"Settings saved\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getDaySlots() {\r\n    return axios.get(\"/schedule/slots\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getBookings() {\r\n    return axios.get(\"/bookings\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getUsers() {\r\n    return axios.get(\"/users/\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  updateUser(user, userId) {\r\n    return axios.patch(\"/users/\" + userId, user)\r\n      .then(res => { message.success(\"User data udpated\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  deleteUser(userId) {\r\n    return axios.delete(\"/users/\" + userId)\r\n      .then(res => { message.success(\"User deleted\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  createUser(user) {\r\n    return axios.post(\"/users\", user)\r\n      .then(res => { message.success(\"User created\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  changePassword(password, userId) {\r\n    return axios.patch(\"/users/\" + userId, { password })\r\n      .then(res => { message.success(\"Password changed\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  close(unix) {\r\n    return axios.post(\"/bookings/close\", { unix })\r\n      .then(res => { message.success(\"Slot closed\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  open(unix) {\r\n    return axios.delete(\"/bookings/\" + unix)\r\n      .then(res => { message.success(\"Slot opened\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  bookForUser(unix, userId) {\r\n    return axios.post(\"/bookings/\", { unix, user: userId })\r\n      .then(res => { message.success(\"Slot assigned\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  bookBatch(data) {\r\n    return axios.post(\"/bookings/batch\", { ...data })\r\n      .then(res => { message.success(\"Slots assigned\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  deleteUserBooking(unix) {\r\n    return axios.delete(\"/bookings/\" + unix)\r\n    .then(res => { message.success(\"Booking deleted\"); return res; })\r\n    .catch(err => handleError(err))\r\n  }\r\n}","import jwt_decode from \"jwt-decode\";\r\nimport client from \"../api/client\";\r\nimport handleError from \"../notifications/handleError\";\r\nimport axios from \"../api/axios\";\r\nimport moment from \"moment\";\r\n\r\nclass Authenticate {\r\n\r\n  constructor() {\r\n\r\n    this.authenticated = false;\r\n\r\n    const token = localStorage.getItem(\"bmtoken\");\r\n\r\n    if (token) this.setAuthentication(token);\r\n  }\r\n\r\n  async login(email, password) {\r\n\r\n    return client.login(email, password)\r\n      .then(res => {\r\n        this.setAuthentication(res.data);\r\n        localStorage.setItem(\"bmtoken\", res.data);\r\n      })\r\n      .catch(err => handleError(err));\r\n  }\r\n\r\n  setAuthentication(token) {\r\n\r\n    const {\r\n      _id,\r\n      admin,\r\n      exp,\r\n    } = jwt_decode(token);\r\n\r\n    this.token = token;\r\n    this.id = _id;\r\n    this.admin = admin;\r\n    this.exp = exp;\r\n\r\n    axios.defaults.headers.common[\"x-auth-token\"] = token;\r\n\r\n    if (this.isExpired()) {\r\n      this.authenticated = false;\r\n    } else {\r\n      this.authenticated = true;\r\n    }\r\n\r\n  }\r\n\r\n  logout(history) {\r\n    this.authenticated = false;\r\n    localStorage.removeItem(\"bmtoken\");\r\n    axios.defaults.headers.common[\"x-auth-token\"] = undefined;\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  isExpired() {\r\n    return (!moment().isBefore(moment.unix(this.exp)));\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n\r\n  isAdmin() {\r\n    return this.admin;\r\n  }\r\n\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n}\r\n\r\nexport default new Authenticate();","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nexport default ({component: Component, admin, children, ...rest}) => \r\n  <Route {...rest} render={\r\n    props => (authenticate.isAuthenticated() && (authenticate.isAdmin() || !admin))\r\n        ? <Component {...props} />\r\n        : <Redirect to={{ pathname: \"/login\", state: { from: props.location } }} />\r\n    }\r\n  />","import React, { useState } from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 16 },\r\n};\r\n\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 8, span: 16 },\r\n};\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onFinish = async({ email, password }) => {\r\n    setLoading(true);\r\n    authenticate.login(email, password)\r\n      .then(() => history.push(\"/schedule\"))\r\n      .catch(() => setLoading(false))\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"container defaultBox\">\r\n        <h2>ようこそ!</h2>\r\n        <Form\r\n          {...layout}\r\n          name=\"basic\"\r\n          initialValues={{ remember: true, email: \"admin@gmail.com\", password: \"testing123\" }}\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item\r\n            label=\"マイル\"\r\n            name=\"email\"\r\n            rules={[{ required: true, message: \"Please input your email.\" }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"パスワード\"\r\n            name=\"password\"\r\n            rules={[{ required: true, message: \"Please input your password.\" }]}\r\n          >\r\n            <Input.Password />\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n              ログイン\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n\r\n  .container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding: 2em;\r\n    box-shadow: var(--box-shadow);\r\n\r\n    h2 {\r\n      margin: 16px 0 32px 0;\r\n    }\r\n  }\r\n`","import React from \"react\";\r\nimport { Layout, Tooltip, Button } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport { LogoutOutlined } from \"@ant-design/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst { Header } = Layout;\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Header className=\"header\">\r\n        <div className=\"logo\">Booking</div>\r\n        {\r\n          authenticate.authenticated &&\r\n          <Tooltip title=\"ログアウト\">\r\n            <Button size=\"small\" onClick={() => authenticate.logout(history)} shape=\"circle\" icon={<LogoutOutlined />} />\r\n          </Tooltip>\r\n        }\r\n      </Header>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n\r\n  .logo {\r\n    color: white;\r\n    font-size: 1.1rem;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .header {\r\n    padding: 32px !important;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport styled from \"styled-components\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Menu } from \"antd\";\r\nimport {\r\n  UserOutlined,\r\n  CalendarOutlined,\r\n  KeyOutlined,\r\n  UserAddOutlined,\r\n  SlidersOutlined,\r\n  BookOutlined } from \"@ant-design/icons\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  // eslint-disable-next-line\r\n  useEffect(() => {\r\n    setCurrent(window.location.pathname.replace(\"/\", \"\"));\r\n  })\r\n\r\n  const [current, setCurrent] = useState(\"home\");\r\n\r\n  const handleClick = e => {\r\n    setCurrent(e.key);\r\n    history.push(\"/\" + e.key);\r\n  }\r\n\r\n  const adminMenu = [\r\n    <Menu.Item key=\"users\">\r\n      <UserOutlined />\r\n      <span className=\"label\">Users</span>\r\n    </Menu.Item>,\r\n    <Menu.Item key=\"create-user\">\r\n      <UserAddOutlined />\r\n      <span className=\"label\">Create user</span>\r\n    </Menu.Item>,\r\n    <Menu.Item key=\"create-bookings\">\r\n      <BookOutlined />\r\n      <span className=\"label\">Create bookings</span>\r\n    </Menu.Item>,\r\n    <Menu.Item key=\"settings\">\r\n      <SlidersOutlined />\r\n      <span className=\"label\">Settings</span>\r\n    </Menu.Item>\r\n  ]\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Menu mode=\"horizontal\" selectedKeys={current} onClick={handleClick}>\r\n        <Menu.Item key=\"schedule\">\r\n          <CalendarOutlined />\r\n          <span className=\"label\">Schedule</span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"change-password\">\r\n          <KeyOutlined />\r\n          <span className=\"label\">Change password</span>\r\n        </Menu.Item>\r\n        {authenticate.isAdmin() && adminMenu.map(item => item)}\r\n      </Menu>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  @media (max-width: 575.28px) {\r\n\r\n  }\r\n`","import React from \"react\";\r\nimport { Button } from \"antd\";\r\n\r\nexport default (props) =>\r\n  <Button shape=\"round\" size=\"small\" style={{ margin: \"8px\" }} { ...props }>\r\n    {props.children}\r\n  </Button>","import React from \"react\";\r\nimport { Badge } from \"antd\";\r\n\r\nexport default ({ icon, text }) =>\r\n  <Badge status={icon} text={text} style={{ marginRight: \"8px\" }} />","import React, { useEffect, useState } from \"react\";\r\nimport client from \"../api/client\";\r\nimport { Select } from \"antd\";\r\n\r\nexport default ({ setUser }) => {\r\n\r\n  const [options, setOptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    client.getUsers()\r\n      .then(res => setOptions(res.data))\r\n      .catch(err => console.log(err))\r\n  }, []);\r\n\r\n  const { Option } = Select;\r\n\r\n  function onChange(value) {\r\n    setUser(value);\r\n  }\r\n  \r\n  return(\r\n    <Select\r\n      showSearch\r\n      style={{ width: 200 }}\r\n      placeholder=\"Select a user\"\r\n      optionFilterProp=\"children\"\r\n      onChange={onChange}\r\n      filterOption={(input, option) =>\r\n        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n      }\r\n    >\r\n      {options.map(user =>\r\n        <Option\r\n          key={user.email}\r\n          value={user._id}\r\n        >\r\n          {user.email}\r\n        </Option>)}\r\n    </Select>\r\n  )\r\n}\r\n\r\n\r\n","import React, { useState, cloneElement } from \"react\";\r\nimport { Modal, Button } from \"antd\";\r\nimport DropDownUsersList from \"./DropDownUsersList\";\r\n\r\nexport default ({ children, slotId, onOk, fetchSchedule }) => {\r\n  \r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n\r\n  const toggle = () => setShow(!show);\r\n\r\n  const childrenWithProps = React.Children.map(children, child =>\r\n    cloneElement(child, { onClick: toggle })\r\n  );\r\n\r\n  const handleOk = () => {\r\n    setLoading(true);\r\n    onOk(slotId, user)\r\n      .then(() => fetchSchedule())\r\n      .finally(() => {\r\n        setLoading(false);\r\n        setShow(false);\r\n      })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {childrenWithProps}\r\n      <Modal\r\n        title=\"Assign slot to user\"\r\n        visible={show}\r\n        onOk={handleOk}\r\n        onCancel={toggle}\r\n        footer={[\r\n          <Button key=\"back\" onClick={toggle}>\r\n            Cancel\r\n          </Button>,\r\n          <Button key=\"submit\" type=\"primary\" loading={loading} onClick={handleOk} disabled={user === undefined}>\r\n            Ok\r\n          </Button>,\r\n        ]}\r\n      >\r\n        <p>Select the user</p>\r\n        <DropDownUsersList setUser={setUser} />\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, forwardRef } from \"react\";\r\nimport moment from \"moment\";\r\nimport client from \"../api/client\";\r\nimport { Button, Popconfirm } from \"antd\";\r\nimport { LockOutlined, UnlockOutlined, DeleteOutlined, UserOutlined, UserAddOutlined } from \"@ant-design/icons\";\r\nimport ModalAddUser from \"./ModalAddUser\";\r\n\r\nexport default ({ status, bookedAt, user, unix, fetchSchedule }) => {\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const noop = () => {};\r\n\r\n  const execute = (action) => {\r\n    setLoading(true);\r\n    action(unix).finally(() => {\r\n      fetchSchedule()\r\n        //.finally(() => setLoading(false));\r\n    });\r\n  }\r\n\r\n  const CircleButton = forwardRef((props, ref) => // doesn't give the warning\r\n    <div style={{ display: \"inline-block\" }} ref={ref}>\r\n      <Button shape=\"circle\" size=\"small\" style={{ marginRight: \"8px\" }} {...props} />\r\n    </div>)\r\n\r\n  const cancelLessonPopover = {\r\n    onConfirm: () => execute(client.deleteUserBooking),\r\n    placement: \"top\",\r\n    title:\r\n      <>\r\n        <p>Cancel booking?</p>\r\n        <p>If you proceed you will cancel this booking:</p>\r\n        <p>{moment.unix(unix).locale(\"en\").format(\"LLLL\")}</p>\r\n        <p>{user?.name} {user?.surname}</p>\r\n      </>,\r\n    okText: \"Ok\",\r\n    cancelText: \"Cancel\"\r\n  };\r\n\r\n  const viewUserPopover = {\r\n    onConfirm: noop,\r\n    placement: \"top\",\r\n    title:\r\n      <>\r\n        <p>Booked by</p>\r\n        <p>\r\n          Name: {user?.name} <br />\r\n          Surname: {user?.surname} <br />\r\n          Email: {user?.email} <br />\r\n          at: {moment.unix(bookedAt).locale(\"en\").format(\"LLLL\")} <br />\r\n        </p>\r\n      </>,\r\n    okText: \"Ok\",\r\n    cancelText: \"Cancel\"\r\n  };\r\n\r\n  const Menu = () => {\r\n    switch (status) {\r\n      case \"available\":\r\n      case \"availableUncancellable\":\r\n        return (\r\n          <>\r\n            <CircleButton onClick={() => execute(client.close)} icon={<LockOutlined />} disabled={loading} />\r\n            <ModalAddUser slotId={unix} onOk={client.bookForUser} fetchSchedule={fetchSchedule}>\r\n                <CircleButton icon={<UserAddOutlined />} />\r\n            </ModalAddUser>\r\n          </>\r\n        )\r\n      case \"booked\":\r\n      case \"bookedUncancellable\":\r\n        return (\r\n          <>\r\n            <Popconfirm {...cancelLessonPopover}>\r\n              <CircleButton icon={<DeleteOutlined />} disabled={loading} />\r\n            </Popconfirm>\r\n            <Popconfirm {...viewUserPopover}>\r\n              <CircleButton icon={<UserOutlined />} disabled={loading} />\r\n            </Popconfirm>\r\n          </>\r\n        )\r\n      case \"unavailable\":\r\n        return null;\r\n      case \"closed\":\r\n        return (\r\n          <CircleButton onClick={() => execute(client.open)} icon={<UnlockOutlined />} disabled={loading} />\r\n        )\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  return Menu()\r\n}","import React, { useState } from \"react\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport client from \"../api/client\";\r\nimport Button from \"./Button\";\r\nimport { Tooltip, Popconfirm, Tag } from \"antd\";\r\nimport Badge from \"./Badge\";\r\nimport ScheduleAdminControls from \"./ScheduleAdminControls\";\r\n\r\nexport default (props) => {\r\n\r\n  const { unix, start, status, user, fetchSchedule, booking, setBooking } = props;\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const noop = () => {};\r\n\r\n  const execute = (action) => {\r\n    setBooking(true);\r\n    setLoading(true);\r\n    action(unix).finally(() => {\r\n      fetchSchedule()\r\n        .finally(() => {\r\n          setBooking(false);\r\n          setLoading(false);\r\n        });\r\n    });\r\n  }\r\n\r\n  const availableButUncancellable = {\r\n    onConfirm: () => execute(client.book),\r\n    disabled: false,\r\n    placement: \"top\",\r\n    title: <p>予約をしたいですか？<br /><br /> 予約をしましたらキャンセルができません。</p>,\r\n    okText: \"はい\",\r\n    cancelText: \"キャンセル\"\r\n  }\r\n\r\n  const getConfig = status => {\r\n\r\n    if (!authenticate.isAdmin()) {\r\n\r\n      switch (status) {\r\n        case \"available\":\r\n          return {\r\n            tooltip: \"予約をします\",\r\n            button: \"default\",\r\n            onClick: () => execute(client.book),\r\n            popconfirm: { disabled: true },\r\n            icon: \"success\",\r\n            text: \"フリー\",\r\n          }\r\n        case \"availableUncancellable\": \r\n          return {\r\n            tooltip: \"予約をします\",\r\n            button: \"default\",\r\n            onClick: noop,\r\n            popconfirm: availableButUncancellable,\r\n            icon: \"warning\",\r\n            text: \"フリー\", \r\n          }\r\n        case \"booked\":\r\n          return {\r\n            tooltip: \"キャンせル\",\r\n            button: \"primary\",\r\n            onClick: () => execute(client.deleteBooking),\r\n            popconfirm: { disabled: true },\r\n            icon: \"processing\",\r\n            text: \"予約\",\r\n          }\r\n        case \"bookedUncancellable\":\r\n          return {\r\n            tooltip: \"キャンせルできません\",\r\n            button: \"danger\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"processing\",\r\n            text: \"予約\",\r\n          }\r\n        case \"unavailable\":\r\n          return {\r\n            tooltip: \"利用できません\",\r\n            button: \"dashed\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"無効\",\r\n          }\r\n        default: // \"closed\"\r\n          return {\r\n            tooltip: \"利用できません\",\r\n            button: \"dashed\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"無効\",\r\n          }\r\n      }\r\n\r\n    } else {\r\n\r\n      switch (status) {\r\n        case \"available\":\r\n        case \"availableUncancellable\":\r\n          return {\r\n            tagColor: \"green\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"success\",\r\n            text: \"Available\",\r\n          }\r\n        case \"booked\":\r\n        case \"bookedUncancellable\":\r\n          return {\r\n            tagColor: \"red\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"processing\",\r\n            text: `${user?.surname}`,\r\n          }\r\n        case \"unavailable\":\r\n          return {\r\n            tagColor: \"default\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"unavailable\",\r\n          }\r\n        default: // \"closed\"\r\n          return {\r\n            tagColor: \"geekblue\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"Closed\",\r\n          }\r\n      }\r\n    }\r\n  }\r\n\r\n  const slotConfig = getConfig(status);\r\n\r\n  const TimeSlot = () =>\r\n    authenticate.isAdmin()\r\n      ?\r\n        <>\r\n          <Tag color={slotConfig.tagColor} style={{ margin: \"8px\" }}>{start}</Tag>\r\n          <ScheduleAdminControls {...props} />\r\n        </>\r\n      :\r\n      <Popconfirm {...slotConfig.popconfirm}>\r\n        <Tooltip placement=\"left\" title={slotConfig.tooltip}>\r\n          <Button type={slotConfig.button} onClick={slotConfig.onClick} loading={loading} disabled={!loading && booking} >\r\n            {start}\r\n          </Button>\r\n        </Tooltip>\r\n      </Popconfirm>\r\n\r\n  return (\r\n    <>\r\n      <TimeSlot />\r\n      <Badge icon={slotConfig.icon} text={slotConfig.text}/>\r\n    </>\r\n  )\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport client from \"../api/client\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nexport default ({ schedule }) => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [points, setPoints] = useState();\r\n\r\n  useEffect(() => {\r\n    client.getPoints(authenticate.getId())\r\n      .then(res => setPoints(res?.data?.points))\r\n      .finally(() => setLoading(false))\r\n  // eslint-disable-next-line\r\n  }, [schedule]);\r\n\r\n  return (\r\n    <span>\r\n      You have <strong style={{ color: points === 0 ? \"red\" : \"green\" }}>\r\n        {loading ? \"...\" : points}\r\n      </strong> points.\r\n    </span>\r\n  )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport moment from \"moment\";\r\nimport ScheduleSlot from \"./ScheduleSlot\";\r\nimport PointsDisplay from \"./PointsDisplay\";\r\nimport { Table, Badge } from \"antd\";\r\n\r\nexport default ({ schedule, fetchSchedule }) => {\r\n\r\n  const [booking, setBooking] = useState(false);\r\n\r\n  const slots = slots => {\r\n    if (slots.length > 0) {\r\n      return (\r\n        <div className=\"defaultBox\" style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <div>\r\n            {slots.map((slot, i) =><div key={i}><ScheduleSlot { ...slot } fetchSchedule={fetchSchedule} booking={booking} setBooking={setBooking} /></div>)}\r\n          </div>\r\n        </div>\r\n      )\r\n    } else {\r\n      return <i>No slots available.</i>\r\n    }\r\n  }\r\n\r\n  const getBookedSlots = slots =>\r\n    authenticate.isAdmin()\r\n      ? slots.filter(slot => slot?.user !== null).length\r\n      : slots.filter(slot => slot?.user?._id === authenticate.getId()).length\r\n    \r\n  const getFreeSlots = slots => slots.filter(slot => (slot.status === \"available\") !== (slot.status === \"availableUncancellable\")).length;\r\n\r\n  const columns = [\r\n    {\r\n      title: authenticate.isAdmin() ? \"Schedule\" : <PointsDisplay schedule={schedule} />,\r\n      dataIndex: \"unix\",\r\n      key: \"day\",\r\n      render: unix =>\r\n        <>\r\n          <strong>{moment.unix(unix).format(\"dd\")}</strong> 📅 {moment.unix(unix).format(\"LL\")}\r\n        </>\r\n    },\r\n    {\r\n      dataIndex: \"slots\",\r\n      key: Math.random(),\r\n      width: \"5%\",\r\n      render: slots => <Badge title=\"Reservations\" count={getBookedSlots(slots)} style={{ backgroundColor: \"#108ee9\" }} />\r\n    },\r\n    {\r\n      dataIndex: \"slots\",\r\n      key: Math.random(),\r\n      width: \"5%\",\r\n      render: slots => <Badge title=\"Free slots\" count={getFreeSlots(slots)} style={{ backgroundColor: \"#52c41a\" }} />\r\n    },\r\n  ];\r\n  \r\n  const expandable = {\r\n    expandedRowRender: record => slots(record.slots)\r\n  };\r\n\r\n  const handleOnChange = pag => fetchSchedule(pag.current, pag.pageSize);\r\n  \r\n  const tableProps = {\r\n    expandable,\r\n    columns,\r\n    pagination: { pageSize: 7 },\r\n    dataSource: schedule,\r\n    // size: \"small\",\r\n    style: { width: \"100%\" },\r\n    onChange: handleOnChange\r\n  }\r\n\r\n  return <Table { ...tableProps } />\r\n}","import React from \"react\";\r\nimport { Spin } from \"antd\";\r\n\r\nexport default () =>\r\n  <div style={{\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: \"40vh\"\r\n  }}>\r\n    <Spin />\r\n  </div>","import React, { useState, useEffect } from \"react\";\r\nimport client from \"../api/client\";\r\nimport handleError from \"../notifications/handleError\";\r\nimport ScheduleTable from \"../components/ScheduleTable\";\r\nimport Spin from \"../components/Spin\";\r\n\r\nexport default () => {\r\n\r\n  const [schedule, setSchedule] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const convertToTableValues = data => {\r\n\r\n    const result = data.map(day => ({\r\n      key: day.unix,\r\n      unix: day.unix,\r\n      slots: day.slots\r\n    }));\r\n\r\n    setSchedule(result);\r\n\r\n  }\r\n\r\n  const fetchSchedule = async() => \r\n    client.getSchedule()\r\n      .then(res => convertToTableValues(res?.data || []))\r\n      .catch(err => handleError(err))\r\n      .finally(() => setLoading(false))\r\n\r\n  useEffect(() => {\r\n    fetchSchedule()\r\n  // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return loading\r\n    ? <Spin />\r\n    : <ScheduleTable schedule={schedule} fetchSchedule={fetchSchedule} />\r\n}","import React from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\n\r\nexport default ({ id, onComplete, loading }) => {\r\n\r\n  const layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 },\r\n  };\r\n  \r\n  const tailLayout = {\r\n    wrapperCol: { offset: 6, span: 12 },\r\n  };\r\n\r\n  const onFinish = ({ password }) => onComplete(password, id);\r\n\r\n  return (\r\n    <Form\r\n      {...layout}\r\n      name=\"password\"\r\n      onFinish={onFinish}\r\n    >\r\n\r\n      <Form.Item\r\n        label=\"New\"\r\n        name=\"password\"\r\n        rules={[{ required: true, message: \"Minimum 8 characters.\", min: 8 }]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n      name=\"confirm\"\r\n      label=\"Confirm\"\r\n      dependencies={[\"password\"]}\r\n      hasFeedback\r\n      rules={[{ required: true, message: \"Please confirm the password!\" },\r\n        ({ getFieldValue }) => ({\r\n          validator(rule, value) {\r\n            if (!value || getFieldValue(\"password\") === value) {\r\n              return Promise.resolve();\r\n            }\r\n            return Promise.reject(\"The two passwords that you entered do not match!\");\r\n          },\r\n        }),\r\n      ]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n          Change password\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport client from \"../api/client\";\r\nimport FormPassword from \"../components/FormPassword\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const changePassword = password => {\r\n    client.changePassword(password, authenticate.getId())\r\n      .then(() => history.push(\"/schedule\"))\r\n      .catch(() => setLoading(false))\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center \"}}>\r\n      <h2 style={{ margin: 32 }}>Change password</h2>\r\n      <FormPassword\r\n        loading={loading}\r\n        onComplete={changePassword}\r\n      />\r\n    </div>\r\n  )\r\n}","import React, { useState } from \"react\";\r\nimport { Form, Input, Button, Checkbox, InputNumber } from \"antd\";\r\n\r\nexport default ({ id, name, surname, email, points, admin, disabled, loading, onComplete }) => {\r\n\r\n  const [checkAdmin, setCheckAdmin] = useState(admin);\r\n  const [checkDisabled, setCheckDisabled] = useState(disabled);\r\n\r\n  const verifyPoints = points;\r\n\r\n  const layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 },\r\n  };\r\n  \r\n  const tailLayout = {\r\n    wrapperCol: { offset: 8, span: 12 },\r\n  };\r\n\r\n  const onFinish = user => {\r\n    onComplete({\r\n      ...user,\r\n      admin: checkAdmin,\r\n      disabled: checkDisabled,\r\n      verifyPoints\r\n    }, id);\r\n  }\r\n\r\n  return (\r\n    <Form\r\n      {...layout}\r\n      name=\"user\"\r\n      initialValues={{ remember: false, name, surname, email, points }}\r\n      onFinish={onFinish}\r\n    >\r\n      <Form.Item\r\n        label=\"Name\"\r\n        name=\"name\"\r\n        rules={[{ required: true, message: \"Please input the name.\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Surname\"\r\n        name=\"surname\"\r\n        rules={[{ required: true, message: \"Please input the surname.\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Email\"\r\n        name=\"email\"\r\n        rules={[{ required: true, message: \"Please type a valid email.\", type: \"email\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Points\"\r\n        name=\"points\"\r\n        rules={[{ required: true }]}\r\n      >\r\n        <InputNumber min={0} />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Admin\"\r\n      >\r\n        <Checkbox\r\n          onChange={() => setCheckAdmin(!checkAdmin)}\r\n          defaultChecked={checkAdmin}\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Disabled\"\r\n      >\r\n        <Checkbox\r\n          onChange={() => setCheckDisabled(!checkDisabled)}\r\n          defaultChecked={checkDisabled}\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button\r\n          type=\"primary\"\r\n          loading={loading}\r\n          htmlType=\"submit\"\r\n        >\r\n          Save\r\n        </Button>\r\n      </Form.Item>\r\n\r\n    </Form>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport client from \"../api/client\";\r\nimport styled from \"styled-components\";\r\nimport FormUser from \"../components/FormUser\"\r\nimport FormPassword from \"../components/FormPassword\";\r\n\r\nexport default (props) => {\r\n\r\n  const history = useHistory();\r\n\r\n  const { fetchUsers } = props;\r\n\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const execute = async(action) => {\r\n    action\r\n      .then(() => fetchUsers())\r\n      .catch(() => history.push(\"/users\"))\r\n      .finally(() => setLoading(false))\r\n  }\r\n\r\n  const saveUser = (user, userId) => execute(client.updateUser(user, userId));\r\n  const changePassword = (password, userId) => execute(client.changePassword(password, userId));\r\n\r\n  return (\r\n    <Wrapper>\r\n      <FormUser {...props} onComplete={saveUser} loading={loading} />\r\n      <FormPassword id={props.id} onComplete={changePassword} loading={loading} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  margin-top: 24px;\r\n\r\n  .ant-btn {\r\n    margin-right: 8px;  \r\n  }\r\n`","import React from \"react\";\r\nimport client from \"../api/client\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport { Table, Popconfirm } from \"antd\";\r\nimport { KeyOutlined, LockOutlined, CheckOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\r\nimport Media from \"react-media\"\r\nimport FormEditUser from \"../components/FormEditUser\";\r\n\r\nexport default ({ data, loading, fetchUsers }) => {\r\n\r\n  const deleteUserPopConfirm = {\r\n    disabled: false,\r\n    placement: \"left\",\r\n    title: <p>Delete user?<br /><br />Delete user and all boookings.</p>,\r\n    okText: \"OK\",\r\n    cancelText: \"Cancel\"\r\n  }\r\n\r\n  const DeleteButton = ({ userId }) =>\r\n    <Popconfirm { ...deleteUserPopConfirm } onConfirm={() => client.deleteUser(userId).then(() => fetchUsers())} >\r\n      <CloseCircleOutlined />\r\n    </Popconfirm>\r\n\r\n  const expandable = {\r\n    expandedRowRender: record => <FormEditUser {...record} fetchUsers={fetchUsers} />\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      ellipsis: true,\r\n      width: \"20%\",\r\n      hideOnSmall: true\r\n    },\r\n    {\r\n      title: \"Surname\",\r\n      dataIndex: \"surname\",\r\n      key: \"surname\",\r\n      ellipsis: true,\r\n      width: \"20%\"\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      dataIndex: \"email\",\r\n      key: \"email\",\r\n      ellipsis: true,\r\n      width: \"20%\",\r\n    },\r\n    {\r\n      title: <LockOutlined />,\r\n      key: \"disabled\",\r\n      render: value => value ? <CheckOutlined /> : \"\",\r\n      dataIndex: \"disabled\",\r\n      width: \"10%\"\r\n    },\r\n    {\r\n      title: <KeyOutlined />,\r\n      key: \"admin\",\r\n      render: value => value ? <CheckOutlined /> : \"\",\r\n      dataIndex: \"admin\",\r\n      width: \"10%\"\r\n    },\r\n    {\r\n      title: \"\",\r\n      key: \"id\",\r\n      dataIndex: \"id\",\r\n      render: value => authenticate.getId() === value ? null : <DeleteButton userId={value} />,\r\n      width: \"10%\"\r\n    },\r\n  ];\r\n\r\n  const getResponsiveColumns = smallScreen =>\r\n    columns.filter(({ hideOnSmall = false }) => !(smallScreen && hideOnSmall));\r\n\r\n  const tableProps = {\r\n    expandable,\r\n    dataSource: data,\r\n    loading: loading,\r\n    size: \"small\"\r\n  }\r\n\r\n  return (\r\n    <Media query=\"(max-width: 599px)\">\r\n      { smallScreen => <Table {...tableProps} columns={getResponsiveColumns(smallScreen)} /> }\r\n    </Media>\r\n  )\r\n\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport client from \"../api/client\";\r\nimport TableUsers from \"../components/TableUsers\";\r\n\r\nexport default () => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const convert = data => {\r\n\r\n    const result = data.map(user => ({\r\n      key: user._id,\r\n      id: user._id,\r\n      name: user.name,\r\n      surname: user.surname,\r\n      email: user.email,\r\n      points: user.points,\r\n      admin: user.admin,\r\n      disabled: user.disabled,\r\n    }));\r\n\r\n    setUsers(result);\r\n  }\r\n\r\n  const fetchUsers = () =>\r\n    client.getUsers()\r\n      .then(res => convert(res?.data || []))\r\n      .finally(() => setLoading(false))\r\n  // eslint-disable-next-line\r\n  useEffect(() => { fetchUsers() }, []);\r\n\r\n  return <TableUsers data={users} loading={loading} fetchUsers={fetchUsers} />\r\n\r\n}","export default () => {\r\n  const consonants = \"bcdfghjklmnpqrstvwxyz\".split(\"\");\r\n  const vowels = \"aeiou\".split(\"\");\r\n  let password = \"\";\r\n  for (let i = 0; i < 3; i++) {\r\n    password += consonants[Math.floor(Math.random() * consonants.length)];\r\n    password += vowels[Math.floor(Math.random() * vowels.length)];\r\n  }\r\n  password += Math.random().toString().substr(2, 2);\r\n  return password;\r\n}","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport client from \"../api/client\";\r\nimport FormUser from \"../components/FormUser\";\r\nimport generatePassword from \"../utilities/generatePassword\";\r\nimport { Button } from \"antd\"\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false)\r\n  const [createdUser, setCreatedUser] = useState(null);\r\n\r\n  const createUser = user => {\r\n    setLoading(true);\r\n    const userWithPassword = { ...user, password: generatePassword() }\r\n    client.createUser(userWithPassword)\r\n      .then(() => setCreatedUser(userWithPassword))\r\n      .catch(() => setCreatedUser(null))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  return (\r\n    createdUser\r\n      ? \r\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", padding: 32 }}>\r\n          <h3 style={{ marginBottom: 32 }}>User created</h3>\r\n          <p>Name: {createdUser.name}</p>\r\n          <p>Surname: {createdUser.surname}</p>\r\n          <p>Email: <strong>{createdUser.email}</strong></p>\r\n          <p>Password: <strong>{createdUser.password}</strong></p>\r\n          <br />\r\n          <Button type=\"primary\" onClick={() => history.push(\"/users\")}>OK</Button>\r\n        </div>\r\n      :\r\n\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center \"}}>\r\n        <h2 style={{ margin: 32 }}>Create user</h2>\r\n        <FormUser onComplete={createUser} loading={loading} />\r\n      </div>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Form, Button, DatePicker, Select } from \"antd\";\r\nimport DropDownUsersList from \"../components/DropDownUsersList\";\r\nimport styled from \"styled-components\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 12 },\r\n};\r\n\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 8, span: 12 },\r\n};\r\n\r\nexport default ({ slots, loading, onSubmit }) => {\r\n\r\n  const [userId, setUserId] = useState();\r\n  const [day, setDay] = useState(0);\r\n  const [slot, setSlot] = useState(slots[0][0]?.unix || 0);\r\n  const [from, setFrom] = useState(moment());\r\n  const [to, setTo] = useState(moment().add(1, \"months\"));\r\n\r\n  const week = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n\r\n  const onFinish = async () => {\r\n    onSubmit(userId, day, slot, from.unix(), to.unix());\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Form\r\n        {...layout}\r\n        name=\"basic\"\r\n        onFinish={onFinish}\r\n      >\r\n\r\n        <Form.Item label=\"User\" name=\"user\" >    \r\n          <DropDownUsersList setUser={setUserId} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Day\" >\r\n          <Select defaultValue={0} onChange={dayIndex => setDay(dayIndex)}>\r\n            {week.map((day, i) => <Option key={Math.random()} value={i}>{day}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Slot\" >\r\n          <Select key={slots[day][0].unix} defaultValue={slots[day][0].value} onChange={slot => setSlot(slot)}>\r\n            {slots[day].map(({ unix, value }) => <Option key={unix} value={unix} >{value}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"From\" >\r\n          <DatePicker value={from} onChange={date => setFrom(date)} allowClear={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"To\" >\r\n          <DatePicker value={to} onChange={date => setTo(date)} allowClear={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n            Create\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Spin from \"../components/Spin\";\r\nimport client from \"../api/client\";\r\nimport FormCreateBooking from \"../components/FormCreateBooking\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  // To show the possible slots to assign\r\n  const [slots, setSlots] = useState();\r\n\r\n  useEffect(() => {\r\n    client.getDaySlots()\r\n      .then(res => {\r\n        setSlots(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => history.push(\"/\"))\r\n  // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const onSubmit = async(userId, day, slot, from, to) => {\r\n    client.bookBatch({ userId, day, slot, from, to })\r\n  };\r\n\r\n  return (\r\n    loading\r\n    ? <Spin />\r\n    : \r\n      <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center \"}}>\r\n        <h2 style={{ margin: 32 }}>Create bookings</h2>\r\n        <FormCreateBooking onSubmit={onSubmit} slots={slots} />\r\n      </div>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Form, Button, TimePicker, DatePicker, InputNumber, Checkbox, Select, Tooltip } from \"antd\";\r\nimport styled from \"styled-components\";\r\n\r\nexport default ({ onComplete, loading, settings }) => {\r\n\r\n  const layout = {\r\n    labelCol: { offset: 1, span: 10 },\r\n    wrapperCol: { offet: 10, span: 24 },\r\n  };\r\n  \r\n  const tailLayout = {\r\n    wrapperCol: { offset: 10, span: 14 },\r\n  };\r\n\r\n  const week = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n\r\n  const [dayIndex, setDayIndex] = useState(0);\r\n\r\n  const [weekSettings, setWeekSettings] = useState(\r\n    settings.week.map(day =>\r\n      ({\r\n        startHours: day.startHours,\r\n        startMinutes: day.startMinutes,\r\n        slotNumber: day.slotNumber,\r\n        off: day.off\r\n      })\r\n    )\r\n  );\r\n\r\n  const handleChangeWeekSettings = (e, field, index) => {\r\n\r\n    const newWeekSettings = new Array(...weekSettings);\r\n\r\n    switch (field) {\r\n      case \"time\":\r\n        newWeekSettings[index].startHours = e.hours();\r\n        newWeekSettings[index].startMinutes= e.minutes();\r\n        break;\r\n      case \"slots\":\r\n        newWeekSettings[index].slotNumber = e;\r\n        break;\r\n      case \"off\":\r\n        newWeekSettings[index].off = e.target.checked;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setWeekSettings(newWeekSettings);\r\n  }\r\n\r\n  const convertToMoment = (h, m) => moment(h + \":\" + m, \"HH:mm\");\r\n\r\n  const onDaySelect = index => setDayIndex(index);\r\n\r\n  const onFinish = settings => {\r\n\r\n    const {\r\n      cancelationNotice,\r\n      interval,\r\n      expireOffset,\r\n      slotDuration,\r\n      dailyLimit\r\n    } = settings;\r\n\r\n    const validSettings = {\r\n      cancelationNotice,\r\n      interval,\r\n      expireOffset,\r\n      slotDuration,\r\n      lastBookableDay: settings.lastBookableDay.unix(),\r\n      dailyLimit,\r\n      week: weekSettings\r\n    }\r\n\r\n    onComplete(validSettings);\r\n  }\r\n\r\n  const DaySettings = () => {\r\n\r\n    const format = \"HH:mm\";\r\n    const time = convertToMoment(weekSettings[dayIndex].startHours, weekSettings[dayIndex].startMinutes);\r\n    return (\r\n      <div>\r\n        <Tooltip placement=\"right\" title={\"Starting time for \" + week[dayIndex]}>\r\n          <TimePicker\r\n            defaultValue={time}\r\n            format={format}\r\n            allowClear={false}\r\n            style={{ marginBottom: 8 }}\r\n            onChange={e => handleChangeWeekSettings(e, \"time\", dayIndex)}\r\n            className=\"expand\" \r\n          />\r\n        </Tooltip><br />\r\n        <Tooltip placement=\"right\" title={\"Number of slots for \" + week[dayIndex]}>\r\n          <InputNumber\r\n            placeholder=\"slots\"\r\n            defaultValue={weekSettings[dayIndex].slotNumber}\r\n            style={{ marginBottom: 8 }}\r\n            min={1}\r\n            onChange={e => handleChangeWeekSettings(e, \"slots\", dayIndex)}\r\n            className=\"expand\" \r\n          />\r\n        </Tooltip><br />\r\n        <Checkbox\r\n          defaultChecked={weekSettings[dayIndex].off}\r\n          onChange={e => handleChangeWeekSettings(e, \"off\", dayIndex)}\r\n        >\r\n          Day off\r\n        </Checkbox>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n    <Form\r\n      {...layout}\r\n      name=\"settings\"\r\n      initialValues={{\r\n        remember: false,\r\n        ...settings,\r\n        lastBookableDay: moment.unix(settings.lastBookableDay),\r\n        day: 0,\r\n      }}\r\n      onFinish={onFinish}\r\n      className=\"form-settings\"\r\n    >\r\n\r\n      <Form.Item name=\"lastBookableDay\" label=\"Last day\">\r\n        <DatePicker allowClear={false} className=\"expand\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"slotDuration\" label=\"Slot duration (mins)\" hidden={true}>\r\n        <InputNumber min={5} max={1440} step={5} className=\"expand\" disabled />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"interval\" label=\"Interval (m)\" hidden={true}>\r\n        <InputNumber min={0} max={1440} step={5} className=\"expand\" disabled />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"expireOffset\" label=\"Expiration (m)\">\r\n        <InputNumber min={0} max={1440} step={5} className=\"expand\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"cancelationNotice\" label=\"Cancellation (h)\">\r\n        <InputNumber min={0} max={365} step={1} className=\"expand\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"dailyLimit\" label=\"Bookings \">\r\n        <InputNumber min={0} step={1} className=\"expand\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"day\" label=\"Day settings\">\r\n        <Select\r\n          onSelect={onDaySelect}\r\n          options={week.map((day, i) => ({ label: day, value: i }))} />\r\n      </Form.Item>\r\n    \r\n      <Form.Item label=\"Day options\">\r\n        <DaySettings dayIndex={dayIndex} className=\"expand\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button\r\n          type=\"primary\"\r\n          loading={loading}\r\n          htmlType=\"submit\"\r\n        >\r\n          Save\r\n        </Button>\r\n      </Form.Item>\r\n\r\n    </Form>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n\r\n  .expand {\r\n    width: 100%;\r\n  }\r\n\r\n  .form-settings {\r\n    min-width: 120px;\r\n  }\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport client from \"../api/client\";\r\nimport FormSettings from \"../components/FormSettings\";\r\nimport Spin from \"../components/Spin\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [settings, setSettings] = useState();\r\n\r\n  const saveSettings = settings => {\r\n    setLoading(true);\r\n    client.saveSettings(settings)\r\n      .then(res => setSettings(res.data))\r\n      .finally(() => setLoading(false))\r\n  }\r\n\r\n  const getSettings = () => {\r\n    setLoading(true);\r\n    client.getSettings()\r\n      .then(res => {\r\n        setSettings(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => history.push(\"/\"))\r\n  }\r\n\r\n  useEffect(() => {\r\n    getSettings();\r\n  // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    loading\r\n    ?\r\n      <Spin />\r\n    :\r\n      <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center \"}}>\r\n        <h2 style={{ margin: 32 }}>Settings</h2>\r\n        <FormSettings\r\n          settings={settings}\r\n          loading={loading}\r\n          onComplete={saveSettings}\r\n          />\r\n      </div>\r\n  )\r\n}","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Schedule from \"../pages/Schedule\";\r\nimport ChangePassword from \"../pages/ChangePassword\";\r\nimport Users from \"../pages/Users\";\r\nimport CreateUser from \"../pages/CreateUser\";\r\nimport CreateBookings from \"../pages/CreateBookings\";\r\nimport Settings from \"../pages/Settings\";\r\n\r\nexport default () =>\r\n  <Switch>\r\n      <Route exact path={[\"/\", \"/schedule\"]} component={() => <Schedule />} />\r\n      <Route exact path={\"/change-password\"} component={() => <ChangePassword />} />\r\n\r\n      <Route exact path={\"/users\"} component={() => <Users />} />\r\n      <Route exact path={\"/create-user\"} component={() => <CreateUser />} />\r\n      <Route exact path={\"/create-bookings\"} component={() => <CreateBookings />} />\r\n      <Route exact path={\"/settings\"} component={() => <Settings />} />\r\n  </Switch>","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../components/Header\";\r\nimport HeaderMenu from \"../components/HeaderMenu\";\r\nimport Routes from \"../routes/Routes\";\r\n\r\nexport default () =>\r\n  <Wrapper>\r\n    <div>\r\n      <Header />\r\n      <HeaderMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"content\">\r\n          <Routes />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Wrapper>\r\n\r\nconst Wrapper = styled.div`\r\n\r\n  height: 100%;\r\n\r\n  .wrapper {\r\n    \r\n    padding: 4em 5vw 0 5vw;\r\n    min-height: 100%;\r\n  }\r\n\r\n  .content {\r\n    display: flex;\r\n    justify-content: center;\r\n    background-color: rgb(250, 250, 250);\r\n    border-radius: var(--border-radius);\r\n    box-shadow: var(--box-shadow);\r\n    margin-bottom: 4em;\r\n  }\r\n\r\n  .footer {\r\n    font-size: 11px;\r\n  }\r\n\r\n  @media only screen and (max-width: 800px) {\r\n\r\n    .wrapper {\r\n      padding: 1em;\r\n    }\r\n\r\n    .content {\r\n      margin-bottom: 1em;\r\n    }\r\n  }\r\n\r\n`","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"moment/locale/ja\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport Login from \"./pages/Login\";\r\nimport Main from \"./pages/Main\";\r\n\r\nexport default () =>\r\n  <Router basename={process.env.PUBLIC_URL}>\r\n    <Switch>\r\n      <Route exact path=\"/login\"><Login /></Route>\r\n      <ProtectedRoute path=\"/\" component={() => <Main />} />\r\n    </Switch>\r\n  </Router>","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport * as Sentry from '@sentry/browser';\r\nimport 'antd/dist/antd.css';\r\n\r\nSentry.init({dsn: \"https://9e88b37548ca41e1808ff6bedf7219f3@o381096.ingest.sentry.io/5207910\"});\r\n\r\nReactDOM.render(\r\n  // Strict mode is a recent feature and when used with ant design it creates the following warning:\r\n  // Warning: findDOMNode is deprecated in StrictMode\r\n  // More info here: https://github.com/ant-design/ant-design/issues/22493\r\n  // <React.StrictMode>\r\n    <App />,\r\n  // </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}