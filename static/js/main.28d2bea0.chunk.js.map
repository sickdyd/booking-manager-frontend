{"version":3,"sources":["api/axios.js","notifications/handleError.js","api/client.js","classes/Authenticate.js","components/ProtectedRoute.js","pages/Login.js","components/Header.js","components/HeaderMenu.js","pages/Home.js","components/Button.js","components/Badge.js","components/DropDownUsersList.js","components/ModalAddUser.js","components/CalendarAdminControls.js","components/CalendarTimeSlot.js","components/Calendar.js","pages/Schedule.js","components/FormPassword.js","pages/ChangePassword.js","components/FormUser.js","components/FormEditUser.js","components/TableUsers.js","pages/Users.js","utilities/generatePassword.js","pages/CreateUser.js","components/FormSettings.js","pages/Settings.js","routes/Routes.js","pages/Main.js","App.js","serviceWorker.js","index.js"],"names":["axios","Axios","create","baseURL","defaults","headers","post","interceptors","request","use","console","log","error","Promise","reject","response","err","status","errortext","data","message","parseError","notification","description","Error","name","checkStatus","e","login","email","password","getSchedule","get","book","slotId","id","user","authenticate","getId","then","res","success","catch","handleError","deleteBooking","delete","getUserBookings","getSettings","saveSettings","settings","put","getUsers","updateUser","userId","patch","createUser","changePassword","close","open","bookForUser","deleteUserBooking","this","authenticated","token","localStorage","getItem","setAuthentication","client","setItem","jwt_decode","_id","admin","common","history","removeItem","undefined","push","Component","component","rest","children","render","props","isAuthenticated","isAdmin","to","pathname","state","from","location","layout","labelCol","span","wrapperCol","tailLayout","offset","useHistory","useState","loading","setLoading","onFinish","a","Wrapper","initialValues","remember","Item","label","rules","required","Password","type","htmlType","styled","div","Header","Layout","className","title","size","onClick","logout","shape","icon","LogoutOutlined","useEffect","setCurrent","window","replace","current","mode","selectedKeys","key","HomeOutlined","CalendarOutlined","KeyOutlined","UserOutlined","UserAddOutlined","SlidersOutlined","bookings","setBookings","nextBookings","setNextBookings","columns","dataIndex","ellipsis","width","value","moment","unix","format","tableProps","dataSource","rowKey","handleBookings","filter","booking","isBefore","getNextBookings","finally","NextBookings","length","map","style","marginBottom","marginTop","margin","text","marginRight","setUser","options","setOptions","Option","Select","showSearch","placeholder","optionFilterProp","onChange","filterOption","input","option","toLowerCase","indexOf","onOk","fetchSchedule","show","setShow","toggle","childrenWithProps","React","Children","child","cloneElement","handleOk","visible","onCancel","footer","disabled","DropDownUsersList","bookedAt","execute","action","CircleButton","forwardRef","ref","display","cancelLessonPopover","onConfirm","placement","locale","surname","okText","cancelText","viewUserPopover","LockOutlined","ModalAddUser","DeleteOutlined","UnlockOutlined","Menu","start","noop","availableButUncancellable","slotConfig","tagColor","popconfirm","tooltip","button","getConfig","TimeSlot","color","CalendarAdminControls","Button","Badge","schedule","day","slots","slot","CalendarTimeSlot","setSchedule","Calendar","onComplete","dependencies","hasFeedback","getFieldValue","validator","rule","resolve","paddingTop","FormPassword","checkAdmin","setCheckAdmin","checkDisabled","setCheckDisabled","defaultChecked","fetchUsers","FormUser","expandable","expandedRowRender","record","FormEditUser","hideOnSmall","CheckOutlined","getResponsiveColumns","smallScreen","query","users","setUsers","result","convert","TableUsers","consonants","split","vowels","i","Math","floor","random","toString","substr","createdUser","setCreatedUser","userWithPassword","generatePassword","week","dayIndex","setDayIndex","startHours","startMinutes","slotNumber","off","weekSettings","setWeekSettings","handleChangeWeekSettings","field","index","newWeekSettings","Array","hours","minutes","target","checked","DaySettings","h","m","time","defaultValue","allowClear","min","lastBookableDay","validSettings","cancelationNotice","interval","expireOffset","slotDuration","textAlign","max","step","onSelect","setSettings","FormSettings","exact","path","Home","Schedule","ChangePassword","Users","CreateUser","Settings","Content","Footer","theme","HeaderMenu","padding","Routes","Login","ProtectedRoute","Main","Boolean","hostname","match","ReactDOM","App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.28d2bea0.chunk.js","sourcesContent":["import Axios from \"axios\";\r\n\r\nconst axios = Axios.create({\r\n    // baseURL: \"http://localhost:3333/api\",\r\n    baseURL: \"https://sickdyd-booking-manager.herokuapp.com/api\"\r\n});\r\n\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n\r\naxios.interceptors.request.use(request => {\r\n  console.log(request);\r\n  return request;\r\n}, error => {\r\n  console.log(error);\r\n  return Promise.reject(error);\r\n});\r\n\r\naxios.interceptors.response.use(response => {\r\n  console.log(response);\r\n  return response;\r\n}, error => {\r\n  console.log(error);\r\n  return Promise.reject(error);\r\n});\r\n\r\nexport default axios;","import { notification } from \"antd\";\r\n\r\nconst parseError = response => {\r\n  if (response?.data?.error?.message) {\r\n    return response?.data?.error?.message;\r\n  } else {\r\n    return response?.message;\r\n  }\r\n}\r\n\r\nconst checkStatus = response => {\r\n  if (response?.status >= 200 && response?.status < 300) {\r\n    return response;\r\n  }\r\n\r\n  const errortext = parseError(response);\r\n\r\n  notification.error({\r\n    message: \"Error\",\r\n    description: errortext,\r\n  });\r\n  \r\n  const error = new Error(errortext);\r\n  error.name = response?.status || response;\r\n  error.response = response;\r\n  throw error;\r\n};\r\n\r\nexport default (err) => {\r\n  try {\r\n    checkStatus(err?.response ? err?.response : err)\r\n  }\r\n  catch(e) {\r\n    console.log(e);\r\n    return Promise.reject();\r\n  };\r\n}","import axios from \"../api/axios\";\r\nimport { message } from \"antd\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport handleError from \"../notifications/handleError\";\r\n\r\nexport default {\r\n\r\n  // Authentication\r\n  login(email, password) {\r\n    return axios.post(\"/authenticate/\", { email, password })\r\n  },\r\n\r\n  // Schedule\r\n  getSchedule() {\r\n    return axios.get(\"/schedule/\")\r\n  },\r\n\r\n  // User\r\n  book(slotId) {\r\n    return axios.post(\"/bookings/\", { id: slotId, user: authenticate.getId() })\r\n      .then(res => { message.success(\"予約をしました。\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  deleteBooking(id) {\r\n    return axios.delete(\"/bookings/\" + id)\r\n      .then(res => { message.success(\"予約が削除されました。\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getUserBookings(id) {\r\n    return axios.get(\"/users/\" + id + \"/bookings\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  // Admin\r\n\r\n  getSettings() {\r\n    return axios.get(\"/settings/\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  saveSettings(settings) {\r\n    return axios.put(\"/settings/\", settings)\r\n      .then(res => { message.success(\"Settings saved\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  getUsers() {\r\n    return axios.get(\"/users/\")\r\n      .then(res => res)\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  updateUser(user, userId) {\r\n    return axios.patch(\"/users/\" + userId, user)\r\n      .then(res => { message.success(\"User data udpated\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  createUser(user) {\r\n    return axios.post(\"/users\", user)\r\n      .then(res => { message.success(\"User created\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  changePassword(password, userId) {\r\n    return axios.patch(\"/users/\" + userId, { password })\r\n      .then(res => { message.success(\"Password changed\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  close(slotId) {\r\n    return axios.post(\"/bookings/close\", { id: slotId })\r\n      .then(res => { message.success(\"Slot closed\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  open(id) {\r\n    return axios.delete(\"/bookings/\" + id)\r\n      .then(res => { message.success(\"Slot opened\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  bookForUser(slotId, user) {\r\n    return axios.post(\"/bookings/\", { id: slotId, user: user })\r\n      .then(res => { message.success(\"Slot assigned\"); return res; })\r\n      .catch(err => handleError(err))\r\n  },\r\n\r\n  deleteUserBooking(id) {\r\n    return axios.delete(\"/bookings/\" + id)\r\n    .then(res => { message.success(\"Booking deleted\"); return res; })\r\n    .catch(err => handleError(err))\r\n  }\r\n}","import jwt_decode from \"jwt-decode\";\r\nimport client from \"../api/client\";\r\nimport handleError from \"../notifications/handleError\";\r\nimport axios from \"../api/axios\";\r\n\r\nclass Authenticate {\r\n\r\n  constructor() {\r\n\r\n    this.authenticated = false;\r\n\r\n    const token = localStorage.getItem(\"bmtoken\");\r\n\r\n    if (token) {\r\n     this.setAuthentication(token);\r\n     this.authenticated = true;\r\n    }\r\n  }\r\n\r\n  async login(email, password) {\r\n\r\n    return client.login(email, password)\r\n      .then(res => {\r\n        this.setAuthentication(res.data.token);\r\n        localStorage.setItem(\"bmtoken\", res.data.token);\r\n      })\r\n      .catch(err => handleError(err));\r\n  }\r\n\r\n  setAuthentication(token) {\r\n\r\n    this.authenticated = true;\r\n    this.token = token;\r\n\r\n    const {\r\n      _id,\r\n      name,\r\n      admin,\r\n    } = jwt_decode(token);\r\n\r\n    this.id = _id;\r\n    this.name = name;\r\n    this.admin = admin;\r\n\r\n    axios.defaults.headers.common[\"x-auth-token\"] = token;\r\n\r\n  }\r\n\r\n  logout(history) {\r\n    this.authenticated = false;\r\n    localStorage.removeItem(\"bmtoken\");\r\n    axios.defaults.headers.common[\"x-auth-token\"] = undefined;\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n\r\n  isAdmin() {\r\n    return this.admin;\r\n  }\r\n\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n}\r\n\r\nexport default new Authenticate();","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nexport default ({component: Component, admin, children, ...rest}) => \r\n  <Route {...rest} render={\r\n    props => (authenticate.isAuthenticated() && (authenticate.isAdmin() || !admin))\r\n        ? <Component {...props} />\r\n        : <Redirect to={{ pathname: \"/login\", state: { from: props.location } }} />\r\n    }\r\n  />","import React, { useState } from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport authenticate from \"../classes/Authenticate\";\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 16 },\r\n};\r\n\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 8, span: 16 },\r\n};\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const onFinish = async({ email, password }) => {\r\n    setLoading(true);\r\n    authenticate.login(email, password)\r\n      .then(() => history.push(\"/home\"))\r\n      .catch(() => setLoading(false))\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Form\r\n        {...layout}\r\n        name=\"basic\"\r\n        initialValues={{ remember: true, email: \"test@gmail.com\", password: \"testing123\" }}\r\n        onFinish={onFinish}\r\n      >\r\n        <Form.Item\r\n          label=\"マイル\"\r\n          name=\"email\"\r\n          rules={[{ required: true, message: \"Please input your email.\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"パスワード\"\r\n          name=\"password\"\r\n          rules={[{ required: true, message: \"Please input your password.\" }]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n            ログイン\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n`","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Layout, Tooltip, Button } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport { LogoutOutlined } from \"@ant-design/icons\";\r\n\r\nconst { Header } = Layout;\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory()\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Header className=\"header\">\r\n        <div className=\"logo\">予約マネージャー</div>\r\n        {\r\n          authenticate.authenticated &&\r\n          <Tooltip title=\"ログアウト\">\r\n            <Button size=\"small\" onClick={() => authenticate.logout(history)} shape=\"circle\" icon={<LogoutOutlined />} />\r\n          </Tooltip>\r\n        }\r\n      </Header>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n\r\n  .logo {\r\n    color: white;\r\n    font-size: 1.1rem;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .header {\r\n    padding: 32px !important;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport styled from \"styled-components\";\r\nimport { Menu } from \"antd\";\r\nimport { HomeOutlined, UserOutlined, CalendarOutlined, KeyOutlined, UserAddOutlined, SlidersOutlined } from \"@ant-design/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  // eslint-disable-next-line\r\n  useEffect(() => {\r\n    setCurrent(window.location.pathname.replace(\"/\", \"\"));\r\n  })\r\n\r\n  const [current, setCurrent] = useState(\"home\");\r\n\r\n  const handleClick = e => {\r\n    setCurrent(e.key);\r\n    history.push(e.key);\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Menu mode=\"horizontal\" selectedKeys={current} onClick={handleClick}>\r\n        <Menu.Item key=\"home\">\r\n          <HomeOutlined />\r\n          <span className=\"label\">Home</span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"schedule\">\r\n          <CalendarOutlined />\r\n          <span className=\"label\">Schedule</span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"change-password\">\r\n          <KeyOutlined />\r\n          <span className=\"label\">Change password</span>\r\n        </Menu.Item>\r\n        {\r\n          authenticate.isAdmin()\r\n          ?\r\n            <Menu.Item key=\"users\">\r\n              <UserOutlined />\r\n              <span className=\"label\">Users</span>\r\n            </Menu.Item>\r\n          :\r\n            null\r\n        }\r\n        {\r\n          authenticate.isAdmin()\r\n          ?\r\n            <Menu.Item key=\"create-user\">\r\n              <UserAddOutlined />\r\n              <span className=\"label\">Create user</span>\r\n            </Menu.Item>\r\n          :\r\n            null\r\n        }\r\n        {\r\n          authenticate.isAdmin()\r\n          ?\r\n            <Menu.Item key=\"settings\">\r\n              <SlidersOutlined />\r\n              <span className=\"label\">Settings</span>\r\n            </Menu.Item>\r\n          :\r\n            null\r\n        }\r\n      </Menu>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  @media (max-width: 575.28px) {\r\n\r\n  }\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport moment from \"moment\";\r\nimport client from \"../api/client\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport { Spin, Alert, Table } from \"antd\";\r\n\r\nexport default () => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [nextBookings, setNextBookings] = useState([]);\r\n\r\n  const format = \"MMMM Do YYYY, h:mm\"\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Booking date\",\r\n      dataIndex: \"id\",\r\n      key: \"id\",\r\n      ellipsis: true,\r\n      width: \"50%\",\r\n      render: value => moment.unix(value).format(format),\r\n    },\r\n    {\r\n      title: \"Booked at\",\r\n      dataIndex: \"bookedAt\",\r\n      key: \"bookedAt\",\r\n      ellipsis: true,\r\n      width: \"50%\",\r\n      render: value => moment.unix(value).format(format),\r\n    },\r\n  ];\r\n\r\n  const tableProps = {\r\n    dataSource: bookings,\r\n    loading: loading,\r\n    size: \"small\",\r\n    rowKey: \"id\"\r\n  }\r\n\r\n  const getNextBookings = bookings =>\r\n    bookings.filter(booking => !moment.unix(booking.id).isBefore(moment()))\r\n\r\n  const handleBookings = bookings => {\r\n    setNextBookings(getNextBookings(bookings));\r\n    setBookings(bookings);\r\n  }\r\n\r\n  useEffect(() => {\r\n    client.getUserBookings(authenticate.getId())\r\n      .then(res => handleBookings(res.data))\r\n      .finally(() => setLoading(false))\r\n  // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const NextBookings = () => {\r\n    if (nextBookings.length > 0) {\r\n      return nextBookings.map(booking =>\r\n        <Alert\r\n          key={booking.id}\r\n          message={moment.unix(booking?.id).format(\"LLLL\")}\r\n          type=\"success\"\r\n          style={{ marginBottom: 8 }}\r\n        />)\r\n    } else {\r\n      return <p><i>No future bookings.</i></p>\r\n    }      \r\n  }\r\n\r\n  return (\r\n    loading\r\n      ? <Spin />\r\n      :\r\n        <>\r\n          <h3>Future bookings:</h3>\r\n          <NextBookings />\r\n          <h3 style={{ marginTop: 32 }}>All bookings</h3>\r\n          <Table {...tableProps} columns={columns} />\r\n        </>\r\n  )\r\n}","import React from \"react\";\r\nimport { Button } from \"antd\";\r\n\r\nexport default (props) =>\r\n  <Button shape=\"round\" size=\"small\" style={{ margin: \"8px\" }} { ...props }>\r\n    {props.children}\r\n  </Button>","import React from \"react\";\r\nimport { Badge } from \"antd\";\r\n\r\nexport default ({ icon, text }) =>\r\n  <Badge status={icon} text={text} style={{ marginRight: \"8px\" }} />","import React, { useEffect, useState } from \"react\";\r\nimport client from \"../api/client\";\r\nimport { Select } from \"antd\";\r\n\r\nexport default ({ setUser }) => {\r\n\r\n  const [options, setOptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    client.getUsers()\r\n      .then(res => setOptions(res.data))\r\n      .catch(err => console.log(err))\r\n  }, []);\r\n\r\n  const { Option } = Select;\r\n\r\n  function onChange(value) {\r\n    setUser(value);\r\n  }\r\n  \r\n  return(\r\n    <Select\r\n      showSearch\r\n      style={{ width: 200 }}\r\n      placeholder=\"Select a user\"\r\n      optionFilterProp=\"children\"\r\n      onChange={onChange}\r\n      filterOption={(input, option) =>\r\n        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n      }\r\n    >\r\n      {options.map(user =>\r\n        <Option\r\n          key={user.email}\r\n          value={user._id}\r\n        >\r\n          {user.email}\r\n        </Option>)}\r\n    </Select>\r\n  )\r\n}\r\n\r\n\r\n","import React, { useState, cloneElement } from \"react\";\r\nimport { Modal, Button } from \"antd\";\r\nimport DropDownUsersList from \"./DropDownUsersList\";\r\n\r\nexport default ({ children, slotId, onOk, fetchSchedule }) => {\r\n  \r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n\r\n  const toggle = () => setShow(!show);\r\n\r\n  const childrenWithProps = React.Children.map(children, child =>\r\n    cloneElement(child, { onClick: toggle })\r\n  );\r\n\r\n  const handleOk = () => {\r\n    setLoading(true);\r\n    onOk(slotId, user)\r\n      .then(() => fetchSchedule())\r\n      .finally(() => {\r\n        setShow(false);\r\n        toggle();\r\n      })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {childrenWithProps}\r\n      <Modal\r\n        title=\"Assign slot to user\"\r\n        visible={show}\r\n        onOk={handleOk}\r\n        onCancel={toggle}\r\n        footer={[\r\n          <Button key=\"back\" onClick={toggle}>\r\n            Cancel\r\n          </Button>,\r\n          <Button key=\"submit\" type=\"primary\" loading={loading} onClick={handleOk} disabled={user === undefined}>\r\n            Ok\r\n          </Button>,\r\n        ]}\r\n      >\r\n        <p>Select the user</p>\r\n        <DropDownUsersList setUser={setUser} />\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, forwardRef } from \"react\";\r\nimport moment from \"moment\";\r\nimport client from \"../api/client\";\r\nimport { Button, Popconfirm } from \"antd\";\r\nimport { LockOutlined, UnlockOutlined, DeleteOutlined, UserOutlined, UserAddOutlined } from \"@ant-design/icons\";\r\nimport ModalAddUser from \"./ModalAddUser\";\r\n\r\nexport default ({ status, bookedAt, user, id, fetchSchedule }) => {\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const noop = () => {};\r\n\r\n  const execute = (action) => {\r\n    setLoading(true);\r\n    action(id).finally(() => {\r\n      fetchSchedule()\r\n        .finally(() => setLoading(false));\r\n    });\r\n  }\r\n\r\n  // const CircleButton = props =>\r\n  //   <Button shape=\"circle\" size=\"small\" style={{ marginRight: \"8px\" }} {...props} />\r\n\r\n  const CircleButton = forwardRef((props, ref) => // doesn't give the warning\r\n    <div style={{ display: \"inline-block\" }} ref={ref}>\r\n      <Button shape=\"circle\" size=\"small\" style={{ marginRight: \"8px\" }} {...props} />\r\n    </div>)\r\n\r\n  const cancelLessonPopover = {\r\n    onConfirm: () => execute(client.deleteUserBooking),\r\n    placement: \"top\",\r\n    title:\r\n      <>\r\n        <p>Cancel booking?</p>\r\n        <p>If you proceed you will cancel this booking:</p>\r\n        <p>{moment.unix(id).locale(\"en\").format(\"LLLL\")}</p>\r\n        <p>{user?.name} {user?.surname}</p>\r\n      </>,\r\n    okText: \"Ok\",\r\n    cancelText: \"Cancel\"\r\n  };\r\n\r\n  const viewUserPopover = {\r\n    onConfirm: noop,\r\n    placement: \"top\",\r\n    title:\r\n      <>\r\n        <p>Booked by</p>\r\n        <p>\r\n          Name: {user?.name} <br />\r\n          Surname: {user?.surname} <br />\r\n          Email: {user?.email} <br />\r\n          at: {moment.unix(bookedAt).locale(\"en\").format(\"LLLL\")} <br />\r\n        </p>\r\n      </>,\r\n    okText: \"Ok\",\r\n    cancelText: \"Cancel\"\r\n  };\r\n\r\n  const Menu = () => {\r\n    switch (status) {\r\n      case \"available\":\r\n      case \"availableUncancellable\":\r\n        return (\r\n          <>\r\n            <CircleButton onClick={() => execute(client.close)} icon={<LockOutlined />} disabled={loading} />\r\n            <ModalAddUser slotId={id} onOk={client.bookForUser} fetchSchedule={fetchSchedule}>\r\n                <CircleButton icon={<UserAddOutlined />} />\r\n            </ModalAddUser>\r\n          </>\r\n        )\r\n      case \"booked\":\r\n      case \"bookedUncancellable\":\r\n        return (\r\n          <>\r\n            <Popconfirm {...cancelLessonPopover}>\r\n              <CircleButton icon={<DeleteOutlined />} disabled={loading} />\r\n            </Popconfirm>\r\n            <Popconfirm {...viewUserPopover}>\r\n              <CircleButton icon={<UserOutlined />} disabled={loading} />\r\n            </Popconfirm>\r\n          </>\r\n        )\r\n      case \"unavailable\":\r\n        return null;\r\n      case \"closed\":\r\n        return (\r\n          <CircleButton onClick={() => execute(client.open)} icon={<UnlockOutlined />} disabled={loading} />\r\n        )\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  return Menu()\r\n}","import React, { useState } from \"react\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport client from \"../api/client\";\r\nimport Button from \"./Button\";\r\nimport { Tooltip, Popconfirm, Tag } from \"antd\";\r\nimport Badge from \"./Badge\";\r\nimport CalendarAdminControls from \"./CalendarAdminControls\";\r\n\r\nexport default (props) => {\r\n\r\n  const { id, start, status, user, fetchSchedule } = props;\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const noop = () => {};\r\n\r\n  const execute = (action) => {\r\n    setLoading(true);\r\n    action(id).finally(() => {\r\n      fetchSchedule()\r\n        .finally(() => setLoading(false));\r\n    });\r\n  }\r\n\r\n  const availableButUncancellable = {\r\n    onConfirm: () => execute(client.book),\r\n    disabled: false,\r\n    placement: \"top\",\r\n    title: <p>予約をしたいですか？<br /><br /> 予約をしましたらキャンセルができません。</p>,\r\n    okText: \"はい\",\r\n    cancelText: \"キャンセル\"\r\n  }\r\n\r\n  const getConfig = status => {\r\n\r\n    if (!authenticate.isAdmin()) {\r\n\r\n      switch (status) {\r\n        case \"available\":\r\n          return {\r\n            tooltip: \"予約をします\",\r\n            button: \"default\",\r\n            onClick: () => execute(client.book),\r\n            popconfirm: { disabled: true },\r\n            icon: \"success\",\r\n            text: \"フリー\",\r\n          }\r\n        case \"availableUncancellable\": \r\n          return {\r\n            tooltip: \"予約をします\",\r\n            button: \"default\",\r\n            onClick: noop,\r\n            popconfirm: availableButUncancellable,\r\n            icon: \"warning\",\r\n            text: \"フリー\", \r\n          }\r\n        case \"booked\":\r\n          return {\r\n            tooltip: \"キャンせル\",\r\n            button: \"primary\",\r\n            onClick: () => execute(client.deleteBooking),\r\n            popconfirm: { disabled: true },\r\n            icon: \"processing\",\r\n            text: \"予約\",\r\n          }\r\n        case \"bookedUncancellable\":\r\n          return {\r\n            tooltip: \"キャンせルできません\",\r\n            button: \"danger\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"processing\",\r\n            text: \"予約\",\r\n          }\r\n        case \"unavailable\":\r\n          return {\r\n            tooltip: \"利用できません\",\r\n            button: \"dashed\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"無効\",\r\n          }\r\n        default: // \"closed\"\r\n          return {\r\n            tooltip: \"利用できません\",\r\n            button: \"dashed\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"無効\",\r\n          }\r\n      }\r\n\r\n    } else {\r\n\r\n      switch (status) {\r\n        case \"available\":\r\n        case \"availableUncancellable\":\r\n          return {\r\n            tagColor: \"green\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"success\",\r\n            text: \"Available\",\r\n          }\r\n        case \"booked\":\r\n        case \"bookedUncancellable\":\r\n          return {\r\n            tagColor: \"red\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"processing\",\r\n            text: `${user?.name} ${user?.surname}`,\r\n          }\r\n        case \"unavailable\":\r\n          return {\r\n            tagColor: \"default\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"unavailable\",\r\n          }\r\n        default: // \"closed\"\r\n          return {\r\n            tagColor: \"geekblue\",\r\n            onClick: noop,\r\n            popconfirm: { disabled: true },\r\n            icon: \"default\",\r\n            text: \"Closed\",\r\n          }\r\n      }\r\n    }\r\n  }\r\n\r\n  const slotConfig = getConfig(status);\r\n\r\n  const TimeSlot = () =>\r\n    authenticate.isAdmin()\r\n      ?\r\n        <>\r\n          <Tag color={slotConfig.tagColor} style={{ margin: \"8px\" }}>{start}</Tag>\r\n          <CalendarAdminControls {...props} />\r\n        </>\r\n      :\r\n      <Popconfirm {...slotConfig.popconfirm}>\r\n        <Tooltip placement=\"left\" title={slotConfig.tooltip}>\r\n          <Button type={slotConfig.button} onClick={slotConfig.onClick} loading={loading}>\r\n            {start}\r\n          </Button>\r\n        </Tooltip>\r\n      </Popconfirm>\r\n\r\n  return (\r\n    <>\r\n      <TimeSlot />\r\n      <Badge icon={slotConfig.icon} text={slotConfig.text}/>\r\n    </>\r\n  )\r\n}","import React from \"react\";\r\nimport moment from \"moment\";\r\nimport styled from \"styled-components\";\r\nimport CalendarTimeSlot from \"./CalendarTimeSlot\";\r\n\r\nexport default ({ schedule, fetchSchedule }) => {\r\n\r\n  return (    \r\n    <Wrapper>\r\n      {\r\n        schedule.map(day =>\r\n          <div className=\"day\" key={day.unix}>\r\n            <p className=\"date\">{moment.unix(day.unix).locale(\"en\").format(\"LL\")}</p>\r\n            <div className=\"slots\">\r\n            {\r\n              day.slots.length > 0\r\n              ?\r\n                day.slots.map(slot =>\r\n                  <div key={slot.id}>\r\n                    <CalendarTimeSlot\r\n                      key={slot.id}\r\n                      fetchSchedule={fetchSchedule}\r\n                      {...slot}\r\n                    />\r\n                  </div>\r\n                )\r\n              :\r\n                <i>No slots available.</i>\r\n            }\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n  margin: 8px;\r\n\r\n  .day {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin: 16px;\r\n    padding: 16px 16px 24px 16px;\r\n    border-radius: 4px;\r\n    background-color: white;\r\n    border: 1px solid #ddd;\r\n    min-width: 330px;\r\n  }\r\n\r\n  .date {\r\n    font-weight: bolder;\r\n    padding-bottom: 16px;\r\n    border-bottom: 1px solid #ddd;\r\n  }\r\n\r\n  .slots {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n`","import React, { useState, useEffect } from \"react\";\r\nimport client from \"../api/client\";\r\nimport { Spin } from \"antd\";\r\nimport handleError from \"../notifications/handleError\";\r\nimport Calendar from \"../components/Calendar\";\r\n\r\nexport default () => {\r\n\r\n  const [schedule, setSchedule] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchSchedule = async() => \r\n    client.getSchedule()\r\n      .then(res => setSchedule(res?.data || []))\r\n      .catch(err => handleError(err))\r\n      .finally(() => setLoading(false))\r\n\r\n  useEffect(() => {\r\n    fetchSchedule()\r\n  }, []);\r\n\r\n  return loading ? <Spin /> : <Calendar schedule={schedule} fetchSchedule={fetchSchedule} />\r\n}","import React from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\n\r\nexport default ({ id, onComplete, loading }) => {\r\n\r\n  const layout = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 16 },\r\n  };\r\n  \r\n  const tailLayout = {\r\n    wrapperCol: { offset: 6, span: 12 },\r\n  };\r\n\r\n  const onFinish = ({ password }) => onComplete(password, id);\r\n\r\n  return (\r\n    <Form\r\n      {...layout}\r\n      name=\"password\"\r\n      onFinish={onFinish}\r\n    >\r\n      <Form.Item\r\n        label=\"New\"\r\n        name=\"password\"\r\n        rules={[{ required: true, message: \"Please input the password.\" }]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n      name=\"confirm\"\r\n      label=\"Confirm\"\r\n      dependencies={[\"password\"]}\r\n      hasFeedback\r\n      rules={[\r\n        {\r\n          required: true,\r\n          message: \"Please confirm the password!\",\r\n        },\r\n        ({ getFieldValue }) => ({\r\n          validator(rule, value) {\r\n            if (!value || getFieldValue(\"password\") === value) {\r\n              return Promise.resolve();\r\n            }\r\n            return Promise.reject(\"The two passwords that you entered do not match!\");\r\n          },\r\n        }),\r\n      ]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button size=\"small\" type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n          Change password\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport authenticate from \"../classes/Authenticate\";\r\nimport client from \"../api/client\";\r\nimport styled from \"styled-components\";\r\nimport FormPassword from \"../components/FormPassword\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const changePassword = password => {\r\n    client.changePassword(password, authenticate.getId())\r\n      .then(() => history.push(\"/home\"))\r\n      .finally(() => setLoading(false))\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"form\" style={{ paddingTop: 48 }}>\r\n        <FormPassword\r\n          loading={loading}\r\n          onComplete={changePassword}\r\n          />\r\n      </div>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n`","import React, { useState } from \"react\";\r\nimport { Form, Input, Button, Checkbox } from \"antd\";\r\n\r\nexport default ({ id, name, surname, email, admin, disabled, loading, onComplete }) => {\r\n\r\n  const [checkAdmin, setCheckAdmin] = useState(admin);\r\n  const [checkDisabled, setCheckDisabled] = useState(disabled);\r\n\r\n  const layout = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 14 },\r\n  };\r\n  \r\n  const tailLayout = {\r\n    wrapperCol: { offset: 10, span: 12 },\r\n  };\r\n\r\n  const onFinish = user => {\r\n    console.log(user);\r\n    onComplete(user, id);\r\n  }\r\n\r\n  return (\r\n    <Form\r\n      {...layout}\r\n      name=\"user\"\r\n      initialValues={{ remember: false, name, surname, email }}\r\n      onFinish={onFinish}\r\n    >\r\n      <Form.Item\r\n        label=\"Name\"\r\n        name=\"name\"\r\n        rules={[{ required: true, message: \"Please input the name.\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Surname\"\r\n        name=\"surname\"\r\n        rules={[{ required: true, message: \"Please input the surname.\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Email\"\r\n        name=\"email\"\r\n        rules={[{ required: true, message: \"Please type a valid email.\", type: \"email\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Admin\"\r\n      >\r\n        <Checkbox\r\n          onChange={() => setCheckAdmin(!checkAdmin)}\r\n          defaultChecked={checkAdmin}\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Disabled\"\r\n      >\r\n        <Checkbox\r\n          onChange={() => setCheckDisabled(!checkDisabled)}\r\n          defaultChecked={checkDisabled}\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          loading={loading}\r\n          htmlType=\"submit\"\r\n        >\r\n          Save\r\n        </Button>\r\n      </Form.Item>\r\n\r\n    </Form>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport client from \"../api/client\";\r\nimport styled from \"styled-components\";\r\nimport FormUser from \"../components/FormUser\"\r\nimport FormPassword from \"../components/FormPassword\";\r\n\r\nexport default (props) => {\r\n\r\n  const { fetchUsers } = props;\r\n\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const execute = async(action) => {\r\n    action\r\n      .then(() => fetchUsers())\r\n      .finally(() => setLoading(false))\r\n  }\r\n\r\n  const saveUser = (user, userId) => execute(client.updateUser(user, userId));\r\n  const changePassword = (password, userId) => execute(client.changePassword(password, userId));\r\n\r\n  return (\r\n    <Wrapper>\r\n      <FormUser {...props} onComplete={saveUser} loading={loading} />\r\n      <FormPassword id={props.id} onComplete={changePassword} loading={loading} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  margin-top: 24px;\r\n\r\n  .ant-btn {\r\n    margin-right: 8px;  \r\n  }\r\n`","import React from \"react\";\r\nimport { Table } from \"antd\";\r\nimport { KeyOutlined, LockOutlined, CheckOutlined } from \"@ant-design/icons\";\r\nimport Media from \"react-media\"\r\nimport FormEditUser from \"../components/FormEditUser\";\r\n\r\nexport default ({ data, loading, fetchUsers }) => {\r\n\r\n  const expandable = {\r\n    expandedRowRender: record => <FormEditUser {...record} fetchUsers={fetchUsers} />\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      ellipsis: true,\r\n      width: \"20%\",\r\n      hideOnSmall: true\r\n    },\r\n    {\r\n      title: \"Surname\",\r\n      dataIndex: \"surname\",\r\n      key: \"surname\",\r\n      ellipsis: true,\r\n      width: \"20%\"\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      dataIndex: \"email\",\r\n      key: \"email\",\r\n      ellipsis: true,\r\n      width: \"30%\",\r\n    },\r\n    {\r\n      title: <LockOutlined />,\r\n      key: \"disabled\",\r\n      render: value => value ? <CheckOutlined /> : \"\",\r\n      dataIndex: \"disabled\",\r\n      width: \"10%\"\r\n    },\r\n    {\r\n      title: <KeyOutlined />,\r\n      key: \"admin\",\r\n      render: value => value ? <CheckOutlined /> : \"\",\r\n      dataIndex: \"admin\",\r\n      width: \"10%\"\r\n    },\r\n  ];\r\n\r\n  const getResponsiveColumns = smallScreen =>\r\n    columns.filter(({ hideOnSmall = false }) => !(smallScreen && hideOnSmall));\r\n\r\n  const tableProps = {\r\n    expandable,\r\n    dataSource: data,\r\n    loading: loading,\r\n    size: \"small\"\r\n  }\r\n\r\n  return (\r\n    <Media query=\"(max-width: 599px)\">\r\n      { smallScreen => <Table {...tableProps} columns={getResponsiveColumns(smallScreen)} /> }\r\n    </Media>\r\n  )\r\n\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport client from \"../api/client\";\r\nimport TableUsers from \"../components/TableUsers\";\r\n\r\nexport default () => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const convert = data => {\r\n\r\n    const result = data.map(user => ({\r\n      key: user._id,\r\n      id: user._id,\r\n      name: user.name,\r\n      surname: user.surname,\r\n      email: user.email,\r\n      admin: user.admin,\r\n      disabled: user.disabled,\r\n    }));\r\n\r\n    setUsers(result);\r\n  }\r\n\r\n  const fetchUsers = () =>\r\n    client.getUsers()\r\n      .then(res => convert(res.data))\r\n      .finally(() => setLoading(false))\r\n  // eslint-disable-next-line\r\n  useEffect(() => { fetchUsers() }, []);\r\n\r\n  return <TableUsers data={users} loading={loading} fetchUsers={fetchUsers} />\r\n\r\n}","export default () => {\r\n  const consonants = \"bcdfghjklmnpqrstvwxyz\".split(\"\");\r\n  const vowels = \"aeiou\".split(\"\");\r\n  let password = \"\";\r\n  for (let i = 0; i < 3; i++) {\r\n    password += consonants[Math.floor(Math.random() * consonants.length)];\r\n    password += vowels[Math.floor(Math.random() * vowels.length)];\r\n  }\r\n  password += Math.random().toString().substr(2, 2);\r\n  return password;\r\n}","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport client from \"../api/client\";\r\nimport styled from \"styled-components\";\r\nimport FormUser from \"../components/FormUser\";\r\nimport generatePassword from \"../utilities/generatePassword\";\r\nimport Button from \"../components/Button\";\r\n\r\nexport default () => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false)\r\n  const [createdUser, setCreatedUser] = useState(null);\r\n\r\n  const createUser = user => {\r\n    setLoading(true);\r\n    const userWithPassword = { ...user, password: generatePassword() }\r\n    client.createUser(userWithPassword)\r\n      .then(() => setCreatedUser(userWithPassword))\r\n      .catch(() => setCreatedUser(null))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <div className=\"form\" style={{ paddingTop: 48 }}>\r\n        {\r\n          createdUser\r\n          ? \r\n            <>\r\n              <h3 style={{ marginBottom: 24 }}>User created</h3>\r\n              <p>Name: {createdUser.name}</p>\r\n              <p>Surname: {createdUser.surname}</p>\r\n              <p>Email: <strong>{createdUser.email}</strong></p>\r\n              <p>Password: <strong>{createdUser.password}</strong></p>\r\n              <Button onClick={() => history.push(\"/users\")}>OK</Button>\r\n            </>\r\n          :\r\n            <FormUser onComplete={createUser} loading={loading} />\r\n\r\n        }\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n\r\n  .ant-btn {\r\n    margin-right: 8px;  \r\n  }\r\n`","import React, { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Form, Button, TimePicker, DatePicker, InputNumber, Checkbox, Select, Tooltip } from \"antd\";\r\n\r\nexport default ({ onComplete, loading, settings }) => {\r\n\r\n  const layout = {\r\n    labelCol: { span: 14 },\r\n  };\r\n  \r\n  const tailLayout = {\r\n    wrapperCol: { offset: 14 },\r\n  };\r\n\r\n  const week = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n\r\n  const [dayIndex, setDayIndex] = useState(0);\r\n\r\n  const [weekSettings, setWeekSettings] = useState(\r\n    settings.week.map(day =>\r\n      ({\r\n        startHours: day.startHours,\r\n        startMinutes: day.startMinutes,\r\n        slotNumber: day.slotNumber,\r\n        off: day.off\r\n      })\r\n    )\r\n  );\r\n\r\n  const handleChangeWeekSettings = (e, field, index) => {\r\n\r\n    const newWeekSettings = new Array(...weekSettings);\r\n\r\n    switch (field) {\r\n      case \"time\":\r\n        console.log(e);\r\n        newWeekSettings[index].startHours = e.hours();\r\n        newWeekSettings[index].startMinutes= e.minutes();\r\n        break;\r\n      case \"slots\":\r\n        newWeekSettings[index].slotNumber = e;\r\n        break;\r\n      case \"off\":\r\n        newWeekSettings[index].off = e.target.checked;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    console.log(newWeekSettings);\r\n    setWeekSettings(newWeekSettings);\r\n  }\r\n\r\n  const convertToMoment = (h, m) => moment(h + \":\" + m, \"HH:mm\");\r\n\r\n  const onDaySelect = index => setDayIndex(index);\r\n\r\n  const onFinish = settings => {\r\n\r\n    const {\r\n      cancelationNotice,\r\n      interval,\r\n      expireOffset,\r\n      slotDuration\r\n    } = settings;\r\n\r\n    const validSettings = {\r\n      cancelationNotice,\r\n      interval,\r\n      expireOffset,\r\n      slotDuration,\r\n      lastBookableDay: settings.lastBookableDay.unix(),\r\n      week: weekSettings\r\n    }\r\n\r\n    onComplete(validSettings);\r\n  }\r\n\r\n  const DaySettings = () => {\r\n\r\n    const format = \"HH:mm\";\r\n    const time = convertToMoment(weekSettings[dayIndex].startHours, weekSettings[dayIndex].startMinutes);\r\n    return (\r\n      <>\r\n        <Tooltip placement=\"right\" title={\"Starting time for \" + week[dayIndex]}>\r\n          <TimePicker\r\n            defaultValue={time}\r\n            format={format}\r\n            allowClear={false}\r\n            style={{ marginBottom: 8 }}\r\n            onChange={e => handleChangeWeekSettings(e, \"time\", dayIndex)}\r\n          />\r\n        </Tooltip><br />\r\n        <Tooltip placement=\"right\" title={\"Number of slots for \" + week[dayIndex]}>\r\n          <InputNumber\r\n            placeholder=\"slots\"\r\n            defaultValue={weekSettings[dayIndex].slotNumber}\r\n            style={{ marginBottom: 8 }}\r\n            min={1}\r\n            onChange={e => handleChangeWeekSettings(e, \"slots\", dayIndex)}\r\n          />\r\n        </Tooltip><br />\r\n        <Checkbox\r\n          defaultChecked={weekSettings[dayIndex].off}\r\n          onChange={e => handleChangeWeekSettings(e, \"off\", dayIndex)}\r\n        >\r\n          Day off\r\n        </Checkbox>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Form\r\n      {...layout}\r\n      name=\"settings\"\r\n      initialValues={{\r\n        remember: false,\r\n        ...settings,\r\n        lastBookableDay: moment.unix(settings.lastBookableDay),\r\n        day: 0,\r\n      }}\r\n      onFinish={onFinish}\r\n    >\r\n\r\n      <h3 style={{ textAlign: \"center\", marginBottom: 32 }}>Settings</h3>\r\n\r\n      <Form.Item name=\"lastBookableDay\" label=\"Last available day\">\r\n        <DatePicker allowClear={false} />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"slotDuration\" label=\"Slot duration\" title=\"How long a slot will last\">\r\n        <InputNumber min={5} max={1440} step={5} disabled />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"interval\" label=\"Interval\">\r\n        <InputNumber min={0} max={1440} step={5} disabled />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"expireOffset\" label=\"Slot expiration\">\r\n        <InputNumber min={0} max={1440} step={5} />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"cancelationNotice\" label=\"Slot cancellation (days)\">\r\n        <InputNumber min={0} max={365} step={1} />\r\n      </Form.Item>\r\n\r\n      <Form.Item name=\"day\" label=\"Day settings\">\r\n        <Select\r\n          onSelect={onDaySelect}\r\n          options={week.map((day, i) => ({ label: day, value: i }))} />\r\n      </Form.Item>\r\n    \r\n      <Form.Item label=\"Day options\">\r\n        <DaySettings dayIndex={dayIndex} />\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          loading={loading}\r\n          htmlType=\"submit\"\r\n        >\r\n          Save\r\n        </Button>\r\n      </Form.Item>\r\n\r\n    </Form>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport client from \"../api/client\";\r\nimport styled from \"styled-components\";\r\nimport FormSettings from \"../components/FormSettings\";\r\nimport { Spin } from \"antd\";\r\n\r\nexport default () => {\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [settings, setSettings] = useState();\r\n\r\n  const saveSettings = settings => {\r\n    setLoading(true);\r\n    client.saveSettings(settings)\r\n      .then(res => setSettings(res.data))\r\n      .finally(() => setLoading(false))\r\n  }\r\n\r\n  const getSettings = () => {\r\n    setLoading(true);\r\n    client.getSettings()\r\n      .then(res => setSettings(res.data))\r\n      .finally(() => setLoading(false))\r\n  }\r\n\r\n  useEffect(() => {\r\n    getSettings();\r\n  }, []);\r\n\r\n  return (\r\n    loading\r\n    ?\r\n      <Spin />\r\n    :\r\n      <Wrapper>\r\n        <FormSettings\r\n          settings={settings}\r\n          loading={loading}\r\n          onComplete={saveSettings}\r\n          />\r\n      </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Home from \"../pages/Home\";\r\nimport Schedule from \"../pages/Schedule\";\r\nimport ChangePassword from \"../pages/ChangePassword\";\r\nimport Users from \"../pages/Users\";\r\nimport CreateUser from \"../pages/CreateUser\";\r\nimport Settings from \"../pages/Settings\";\r\n\r\nexport default () =>\r\n  <Switch>\r\n      <Route exact path={[\"/\", \"/home\"]} component={() => <Home />} />\r\n      <Route exact path=\"/schedule\" component={() => <Schedule />} />\r\n      <Route exact path=\"/change-password\" component={() => <ChangePassword />} />\r\n\r\n      <Route exact path=\"/users\" component={() => <Users />} />\r\n      <Route exact path=\"/create-user\" component={() => <CreateUser />} />\r\n      <Route exact path=\"/settings\" component={() => <Settings />} />\r\n  </Switch>","import React from \"react\";\r\nimport \"moment/locale/ja\";\r\nimport { Layout } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../components/Header\";\r\nimport HeaderMenu from \"../components/HeaderMenu\";\r\nimport Routes from \"../routes/Routes\";\r\n\r\nconst { Content, Footer } = Layout;\r\n\r\nexport default () =>\r\n  <Wrapper>\r\n    <Layout className=\"layout\" theme=\"light\">\r\n      <Header />\r\n      <HeaderMenu />\r\n      <Content style={{ padding: \"16px 20px\" }}>\r\n        <Routes />\r\n      </Content>\r\n      <Footer className=\"footer\" style={{ textAlign: \"center\" }}>\r\n        Booking Manager ©2020 Created by Sickdyd\r\n      </Footer>\r\n    </Layout>\r\n  </Wrapper>\r\n\r\nconst Wrapper = styled.div`\r\n\r\n  .layout {\r\n    min-height: 100vh;\r\n  }\r\n\r\n  .footer {\r\n    font-size: 11px;\r\n  }\r\n\r\n`","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"moment/locale/ja\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport Login from \"./pages/Login\";\r\nimport Main from \"./pages/Main\";\r\n\r\nexport default () =>\r\n  <Router>\r\n    <Switch>\r\n      <Route exact path=\"/login\"><Login /></Route>\r\n      <ProtectedRoute path=\"/\" component={() => <Main />} />\r\n    </Switch>\r\n  </Router>","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n//import * as Sentry from '@sentry/browser';\r\nimport 'antd/dist/antd.css';\r\n\r\n//Sentry.init({dsn: \"https://9e88b37548ca41e1808ff6bedf7219f3@o381096.ingest.sentry.io/5207910\"});\r\n\r\nReactDOM.render(\r\n  //<React.StrictMode>\r\n    <App />,\r\n  //</React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}