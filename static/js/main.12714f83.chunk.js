(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{230:function(e,t,n){e.exports=n(432)},235:function(e,t,n){},432:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),c=n.n(l),o=(n(235),n(35)),i=n(66),u=n(229),s=n(23),m=n.n(s),d=n(36),f=n(195),p=n(196),b=n(197),h=n.n(b),E=n(61),g=n(198),v=n.n(g).a.create({baseURL:"http://localhost:3333/api"});v.defaults.headers.post["Content-Type"]="application/json",v.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),v.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)}));var y=v,k=n(433),O=n(441),j=function(e){try{return function(e){if((null===e||void 0===e?void 0:e.status)>=200&&(null===e||void 0===e?void 0:e.status)<300)return e;var t=function(e){var t,n,a,r;return(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)?null===e||void 0===e||null===(a=e.data)||void 0===a||null===(r=a.error)||void 0===r?void 0:r.message:null===e||void 0===e?void 0:e.message}(e);O.a.warn({message:"Error",description:t})}((null===e||void 0===e?void 0:e.response)?null===e||void 0===e?void 0:e.response:e),Promise.reject()}catch(t){return console.log(t),Promise.reject()}},x={login:function(e,t){return y.post("/authenticate/",{email:e,password:t})},getSchedule:function(e,t){return y.get("/schedule/")},book:function(e){return y.post("/bookings/",{unix:e,user:w.getId()}).then((function(e){return k.a.success("\u4e88\u7d04\u3092\u3057\u307e\u3057\u305f\u3002"),e})).catch((function(e){return j(e)}))},deleteBooking:function(e){return y.delete("/bookings/"+e).then((function(e){return k.a.success("\u4e88\u7d04\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002"),e})).catch((function(e){return j(e)}))},getUserBookings:function(e){return y.get("/users/"+e+"/bookings").then((function(e){return e})).catch((function(e){return j(e)}))},getPoints:function(e){return y.get("/users/"+e+"/points").then((function(e){return e})).catch((function(e){return j(e)}))},getSettings:function(){return y.get("/settings/").then((function(e){return e})).catch((function(e){return j(e)}))},saveSettings:function(e){return y.put("/settings/",e).then((function(e){return k.a.success("Settings saved"),e})).catch((function(e){return j(e)}))},getDaySlots:function(){return y.get("/schedule/slots").then((function(e){return e})).catch((function(e){return j(e)}))},getBookings:function(){return y.get("/bookings").then((function(e){return e})).catch((function(e){return j(e)}))},getUsers:function(){return y.get("/users/").then((function(e){return e})).catch((function(e){return j(e)}))},updateUser:function(e,t){return y.patch("/users/"+t,e).then((function(e){return k.a.success("User data udpated"),e})).catch((function(e){return j(e)}))},deleteUser:function(e){return y.delete("/users/"+e).then((function(e){return k.a.success("User deleted"),e})).catch((function(e){return j(e)}))},createUser:function(e){return y.post("/users",e).then((function(e){return k.a.success("User created"),e})).catch((function(e){return j(e)}))},changePassword:function(e,t){return y.patch("/users/"+t,{password:e}).then((function(e){return k.a.success("Password changed"),e})).catch((function(e){return j(e)}))},close:function(e){return y.post("/bookings/close",{unix:e}).then((function(e){return k.a.success("Slot closed"),e})).catch((function(e){return j(e)}))},open:function(e){return y.delete("/bookings/"+e).then((function(e){return k.a.success("Slot opened"),e})).catch((function(e){return j(e)}))},bookForUser:function(e,t){return y.post("/bookings/",{unix:e,user:t}).then((function(e){return k.a.success("Slot assigned"),e})).catch((function(e){return j(e)}))},bookBatch:function(e){return y.post("/bookings/batch",Object(E.a)({},e)).then((function(e){return k.a.success("Slots assigned"),e})).catch((function(e){return j(e)}))},deleteUserBooking:function(e){return y.delete("/bookings/"+e).then((function(e){return k.a.success("Booking deleted"),e})).catch((function(e){return j(e)}))}},w=new(function(){function e(){Object(f.a)(this,e),this.authenticated=!1;var t=localStorage.getItem("bmtoken");t&&(this.setAuthentication(t),this.authenticated=!0)}return Object(p.a)(e,[{key:"login",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.login(t,n).then((function(e){a.setAuthentication(e.data.token),localStorage.setItem("bmtoken",e.data.token)})).catch((function(e){return j(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAuthentication",value:function(e){this.authenticated=!0,this.token=e;var t=h()(e),n=t._id,a=t.name,r=t.admin;this.id=n,this.name=a,this.admin=r,y.defaults.headers.common["x-auth-token"]=e}},{key:"logout",value:function(e){this.authenticated=!1,localStorage.removeItem("bmtoken"),y.defaults.headers.common["x-auth-token"]=void 0,e.push("/login")}},{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"isAdmin",value:function(){return this.admin}},{key:"getToken",value:function(){return this.token}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}}]),e}()),C=function(e){var t=e.component,n=e.admin,a=(e.children,Object(u.a)(e,["component","admin","children"]));return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return!w.isAuthenticated()||!w.isAdmin()&&n?r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}}):r.a.createElement(t,e)}}))},S=n(25),I=n(4),U=n(437),N=n(439),P=n(20),B=n(26);function F(){var e=Object(S.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]);return F=function(){return e},e}var T={labelCol:{span:8},wrapperCol:{span:16}},A={wrapperCol:{offset:8,span:16}},D=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(I.a)(t,2),l=n[0],c=n[1],o=function(){var t=Object(d.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.email,r=n.password,c(!0),w.login(a,r).then((function(){return e.push("/schedule")})).catch((function(){return c(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(L,null,r.a.createElement(U.a,Object.assign({},T,{name:"basic",initialValues:{remember:!0,email:"test@gmail.com",password:"testing123"},onFinish:o}),r.a.createElement(U.a.Item,{label:"\u30de\u30a4\u30eb",name:"email",rules:[{required:!0,message:"Please input your email."}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9",name:"password",rules:[{required:!0,message:"Please input your password."}]},r.a.createElement(N.a.Password,null)),r.a.createElement(U.a.Item,A,r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:l},"\u30ed\u30b0\u30a4\u30f3"))))},L=B.a.div(F()),M=n(434),q=n(88),z=n(449);function H(){var e=Object(S.a)(["\n\n  .logo {\n    color: white;\n    font-size: 1.1rem;\n    font-weight: bold;\n  }\n\n  .header {\n    padding: 32px !important;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n"]);return H=function(){return e},e}var R=M.a.Header,V=function(){var e=Object(i.g)();return r.a.createElement(_,null,r.a.createElement(R,{className:"header"},r.a.createElement("div",{className:"logo"},"Booking"),w.authenticated&&r.a.createElement(q.a,{title:"\u30ed\u30b0\u30a2\u30a6\u30c8"},r.a.createElement(P.a,{size:"small",onClick:function(){return w.logout(e)},shape:"circle",icon:r.a.createElement(z.a,null)}))))},_=B.a.div(H()),W=n(74),K=n(447),J=n(446),Y=n(445),$=n(444),G=n(455),Q=n(442);function X(){var e=Object(S.a)(["\n  @media (max-width: 575.28px) {\n\n  }\n"]);return X=function(){return e},e}var Z=function(){var e=Object(i.g)();Object(a.useEffect)((function(){c(window.location.pathname.replace("/",""))}));var t=Object(a.useState)("home"),n=Object(I.a)(t,2),l=n[0],c=n[1],o=[r.a.createElement(W.a.Item,{key:"users"},r.a.createElement(K.a,null),r.a.createElement("span",{className:"label"},"Users")),r.a.createElement(W.a.Item,{key:"create-user"},r.a.createElement(J.a,null),r.a.createElement("span",{className:"label"},"Create user")),r.a.createElement(W.a.Item,{key:"create-bookings"},r.a.createElement(Y.a,null),r.a.createElement("span",{className:"label"},"Create bookings")),r.a.createElement(W.a.Item,{key:"settings"},r.a.createElement($.a,null),r.a.createElement("span",{className:"label"},"Settings"))];return r.a.createElement(ee,null,r.a.createElement(W.a,{mode:"horizontal",selectedKeys:l,onClick:function(t){c(t.key),e.push("/"+t.key)}},r.a.createElement(W.a.Item,{key:"schedule"},r.a.createElement(G.a,null),r.a.createElement("span",{className:"label"},"Schedule")),r.a.createElement(W.a.Item,{key:"change-password"},r.a.createElement(Q.a,null),r.a.createElement("span",{className:"label"},"Change password")),w.isAdmin()&&o.map((function(e){return e}))))},ee=B.a.div(X()),te=n(24),ne=n.n(te),ae=function(e){return r.a.createElement(P.a,Object.assign({shape:"round",size:"small",style:{margin:"8px"}},e),e.children)},re=n(228),le=n(443),ce=n(454),oe=function(e){var t=e.icon,n=e.text;return r.a.createElement(ce.a,{status:t,text:n,style:{marginRight:"8px"}})},ie=n(453),ue=n(452),se=n(451),me=n(438),de=n(100),fe=function(e){var t=e.setUser,n=Object(a.useState)([]),l=Object(I.a)(n,2),c=l[0],o=l[1];Object(a.useEffect)((function(){x.getUsers().then((function(e){return o(e.data)})).catch((function(e){return console.log(e)}))}),[]);var i=de.a.Option;return r.a.createElement(de.a,{showSearch:!0,style:{width:200},placeholder:"Select a user",optionFilterProp:"children",onChange:function(e){t(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},c.map((function(e){return r.a.createElement(i,{key:e.email,value:e._id},e.email)})))},pe=function(e){var t=e.children,n=e.slotId,l=e.onOk,c=e.fetchSchedule,o=Object(a.useState)(!1),i=Object(I.a)(o,2),u=i[0],s=i[1],m=Object(a.useState)(!1),d=Object(I.a)(m,2),f=d[0],p=d[1],b=Object(a.useState)(null),h=Object(I.a)(b,2),E=h[0],g=h[1],v=function(){return s(!u)},y=r.a.Children.map(t,(function(e){return Object(a.cloneElement)(e,{onClick:v})})),k=function(){p(!0),l(n,E).then((function(){return c()})).finally((function(){p(!1),s(!1)}))};return r.a.createElement(r.a.Fragment,null,y,r.a.createElement(me.a,{title:"Assign slot to user",visible:u,onOk:k,onCancel:v,footer:[r.a.createElement(P.a,{key:"back",onClick:v},"Cancel"),r.a.createElement(P.a,{key:"submit",type:"primary",loading:f,onClick:k,disabled:void 0===E},"Ok")]},r.a.createElement("p",null,"Select the user"),r.a.createElement(fe,{setUser:g})))},be=function(e){var t=e.status,n=e.bookedAt,l=e.user,c=e.unix,o=e.fetchSchedule,i=Object(a.useState)(!1),u=Object(I.a)(i,2),s=u[0],m=u[1],d=function(e){m(!0),e(c).finally((function(){o().finally((function(){return m(!1)}))}))},f=Object(a.forwardRef)((function(e,t){return r.a.createElement("div",{style:{display:"inline-block"},ref:t},r.a.createElement(P.a,Object.assign({shape:"circle",size:"small",style:{marginRight:"8px"}},e)))})),p={onConfirm:function(){return d(x.deleteUserBooking)},placement:"top",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Cancel booking?"),r.a.createElement("p",null,"If you proceed you will cancel this booking:"),r.a.createElement("p",null,ne.a.unix(c).locale("en").format("LLLL")),r.a.createElement("p",null,null===l||void 0===l?void 0:l.name," ",null===l||void 0===l?void 0:l.surname)),okText:"Ok",cancelText:"Cancel"},b={onConfirm:function(){},placement:"top",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Booked by"),r.a.createElement("p",null,"Name: ",null===l||void 0===l?void 0:l.name," ",r.a.createElement("br",null),"Surname: ",null===l||void 0===l?void 0:l.surname," ",r.a.createElement("br",null),"Email: ",null===l||void 0===l?void 0:l.email," ",r.a.createElement("br",null),"at: ",ne.a.unix(n).locale("en").format("LLLL")," ",r.a.createElement("br",null))),okText:"Ok",cancelText:"Cancel"};return function(){switch(t){case"available":case"availableUncancellable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{onClick:function(){return d(x.close)},icon:r.a.createElement(ie.a,null),disabled:s}),r.a.createElement(pe,{slotId:c,onOk:x.bookForUser,fetchSchedule:o},r.a.createElement(f,{icon:r.a.createElement(J.a,null)})));case"booked":case"bookedUncancellable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,p,r.a.createElement(f,{icon:r.a.createElement(ue.a,null),disabled:s})),r.a.createElement(le.a,b,r.a.createElement(f,{icon:r.a.createElement(K.a,null),disabled:s})));case"unavailable":return null;case"closed":return r.a.createElement(f,{onClick:function(){return d(x.open)},icon:r.a.createElement(se.a,null),disabled:s});default:return null}}()},he=function(e){var t=e.unix,n=e.start,l=e.status,c=e.user,o=e.fetchSchedule,i=Object(a.useState)(!1),u=Object(I.a)(i,2),s=u[0],m=u[1],d=function(){},f=function(e){m(!0),e(t).finally((function(){o().finally((function(){return m(!1)}))}))},p={onConfirm:function(){return f(x.book)},disabled:!1,placement:"top",title:r.a.createElement("p",null,"\u4e88\u7d04\u3092\u3057\u305f\u3044\u3067\u3059\u304b\uff1f",r.a.createElement("br",null),r.a.createElement("br",null)," \u4e88\u7d04\u3092\u3057\u307e\u3057\u305f\u3089\u30ad\u30e3\u30f3\u30bb\u30eb\u304c\u3067\u304d\u307e\u305b\u3093\u3002"),okText:"\u306f\u3044",cancelText:"\u30ad\u30e3\u30f3\u30bb\u30eb"},b=function(e){if(w.isAdmin())switch(e){case"available":case"availableUncancellable":return{tagColor:"green",onClick:d,popconfirm:{disabled:!0},icon:"success",text:"Available"};case"booked":case"bookedUncancellable":return{tagColor:"red",onClick:d,popconfirm:{disabled:!0},icon:"processing",text:"".concat(null===c||void 0===c?void 0:c.surname)};case"unavailable":return{tagColor:"default",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"unavailable"};default:return{tagColor:"geekblue",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"Closed"}}else switch(e){case"available":return{tooltip:"\u4e88\u7d04\u3092\u3057\u307e\u3059",button:"default",onClick:function(){return f(x.book)},popconfirm:{disabled:!0},icon:"success",text:"\u30d5\u30ea\u30fc"};case"availableUncancellable":return{tooltip:"\u4e88\u7d04\u3092\u3057\u307e\u3059",button:"default",onClick:d,popconfirm:p,icon:"warning",text:"\u30d5\u30ea\u30fc"};case"booked":return{tooltip:"\u30ad\u30e3\u30f3\u305b\u30eb",button:"primary",onClick:function(){return f(x.deleteBooking)},popconfirm:{disabled:!0},icon:"processing",text:"\u4e88\u7d04"};case"bookedUncancellable":return{tooltip:"\u30ad\u30e3\u30f3\u305b\u30eb\u3067\u304d\u307e\u305b\u3093",button:"danger",onClick:d,popconfirm:{disabled:!0},icon:"processing",text:"\u4e88\u7d04"};case"unavailable":default:return{tooltip:"\u5229\u7528\u3067\u304d\u307e\u305b\u3093",button:"dashed",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"\u7121\u52b9"}}}(l),h=function(){return w.isAdmin()?r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{color:b.tagColor,style:{margin:"8px"}},n),r.a.createElement(be,e)):r.a.createElement(le.a,b.popconfirm,r.a.createElement(q.a,{placement:"left",title:b.tooltip},r.a.createElement(ae,{type:b.button,onClick:b.onClick,loading:s},n)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(oe,{icon:b.icon,text:b.text}))},Ee=n(436),ge=function(e){var t=e.schedule,n=e.fetchSchedule,a=function(e){return w.isAdmin()?e.filter((function(e){return null!==(null===e||void 0===e?void 0:e.user)})).length:e.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t._id)===w.getId()})).length},l=function(e){return e.filter((function(e){return"available"===e.status!==("availableUncancellable"===e.status)})).length},c={expandable:{expandedRowRender:function(e){return(t=e.slots).length>0?r.a.createElement("div",{className:"defaultBox",style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",null,r.a.createElement(he,Object.assign({},e,{fetchSchedule:n})))})))):r.a.createElement("i",null,"No slots available.");var t}},columns:[{title:"Schedule",dataIndex:"day",key:"day"},{dataIndex:"slots",key:Math.random(),width:"5%",render:function(e){return r.a.createElement(ce.a,{title:"Reservations",count:a(e),style:{backgroundColor:"#108ee9"}})}},{dataIndex:"slots",key:Math.random(),width:"5%",render:function(e){return r.a.createElement(ce.a,{title:"Free slots",count:l(e),style:{backgroundColor:"#52c41a"}})}}],dataSource:t,size:"small",style:{width:"100%"},onChange:function(e){console.log(e),n(e.current,e.pageSize)}};return r.a.createElement(Ee.a,c)},ve=n(217),ye=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"40vh"}},r.a.createElement(ve.a,null))},ke=function(e){var t=e.schedule,n=Object(a.useState)(!0),l=Object(I.a)(n,2),c=l[0],o=l[1],i=Object(a.useState)(0),u=Object(I.a)(i,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){x.getPoints(w.getId()).then((function(e){var t;return m(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.points)})).finally((function(){return o(!1)}))}),[t]),c?r.a.createElement(ye,null):r.a.createElement("p",{style:{textAlign:"center"}},"You have ",r.a.createElement("strong",{style:{color:0===s?"red":"green"}},s)," points.")};function Oe(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return Oe=function(){return e},e}var je=function(){var e=Object(a.useState)([]),t=Object(I.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(!0),o=Object(I.a)(c,2),i=o[0],u=o[1],s=function(e){var t=e.map((function(e){return{key:e.unix,unix:e.unix,day:ne.a.unix(e.unix).format("LL dddd"),slots:e.slots}}));l(t)},f=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.getSchedule().then((function(e){return s((null===e||void 0===e?void 0:e.data)||[])})).catch((function(e){return j(e)})).finally((function(){return u(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f()}),[]),i?r.a.createElement(ye,null):r.a.createElement(xe,null,!w.isAdmin()&&r.a.createElement(ke,{schedule:n}),r.a.createElement(ge,{schedule:n,fetchSchedule:f}))},xe=B.a.div(Oe()),we=function(e){var t=e.id,n=e.onComplete,a=e.loading,l={wrapperCol:{offset:8,span:12}};return r.a.createElement(U.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:12}},{name:"password",onFinish:function(e){var a=e.password;return n(a,t)}}),r.a.createElement(U.a.Item,{label:"New",name:"password",rules:[{required:!0,message:"Minimum 8 characters.",min:8}]},r.a.createElement(N.a.Password,null)),r.a.createElement(U.a.Item,{name:"confirm",label:"Confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm the password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(N.a.Password,null)),r.a.createElement(U.a.Item,l,r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:a},"Change password")))},Ce=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(I.a)(t,2),l=n[0],c=n[1];return r.a.createElement(we,{loading:l,onComplete:function(t){x.changePassword(t,w.getId()).then((function(){return e.push("/schedule")})).catch((function(){return c(!1)}))}})},Se=n(450),Ie=n(448),Ue=n(219),Ne=n(440),Pe=n(101),Be=function(e){var t=e.id,n=e.name,l=e.surname,c=e.email,o=e.points,i=e.admin,u=e.disabled,s=e.loading,m=e.onComplete,d=Object(a.useState)(i),f=Object(I.a)(d,2),p=f[0],b=f[1],h=Object(a.useState)(u),g=Object(I.a)(h,2),v=g[0],y=g[1],k=o,O={wrapperCol:{offset:8,span:12}};return r.a.createElement(U.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"user",initialValues:{remember:!1,name:n,surname:l,email:c,points:o},onFinish:function(e){m(Object(E.a)({},e,{admin:p,disabled:v,verifyPoints:k}),t)}}),r.a.createElement(U.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input the name."}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{label:"Surname",name:"surname",rules:[{required:!0,message:"Please input the surname."}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please type a valid email.",type:"email"}]},r.a.createElement(N.a,null)),r.a.createElement(U.a.Item,{label:"Points",name:"points",rules:[{required:!0}]},r.a.createElement(Ne.a,{min:0})),r.a.createElement(U.a.Item,{label:"Admin"},r.a.createElement(Pe.a,{onChange:function(){return b(!p)},defaultChecked:p})),r.a.createElement(U.a.Item,{label:"Disabled"},r.a.createElement(Pe.a,{onChange:function(){return y(!v)},defaultChecked:v})),r.a.createElement(U.a.Item,O,r.a.createElement(P.a,{type:"primary",loading:s,htmlType:"submit"},"Save")))};function Fe(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  margin-top: 24px;\n\n  .ant-btn {\n    margin-right: 8px;  \n  }\n"]);return Fe=function(){return e},e}var Te=function(e){var t=Object(i.g)(),n=e.fetchUsers,l=Object(a.useState)(!1),c=Object(I.a)(l,2),o=c[0],u=c[1],s=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.then((function(){return n()})).catch((function(){return t.push("/users")})).finally((function(){return u(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ae,null,r.a.createElement(Be,Object.assign({},e,{onComplete:function(e,t){return s(x.updateUser(e,t))},loading:o})),r.a.createElement(we,{id:e.id,onComplete:function(e,t){return s(x.changePassword(e,t))},loading:o}))},Ae=B.a.div(Fe()),De=function(e){var t=e.data,n=e.loading,a=e.fetchUsers,l={disabled:!1,placement:"left",title:r.a.createElement("p",null,"Delete user?",r.a.createElement("br",null),r.a.createElement("br",null),"Delete user and all boookings."),okText:"OK",cancelText:"Cancel"},c=function(e){var t=e.userId;return r.a.createElement(le.a,Object.assign({},l,{onConfirm:function(){return x.deleteUser(t)}}),r.a.createElement(Se.a,null))},o={expandedRowRender:function(e){return r.a.createElement(Te,Object.assign({},e,{fetchUsers:a}))}},i=[{title:"Name",dataIndex:"name",key:"name",ellipsis:!0,width:"20%",hideOnSmall:!0},{title:"Surname",dataIndex:"surname",key:"surname",ellipsis:!0,width:"20%"},{title:"Email",dataIndex:"email",key:"email",ellipsis:!0,width:"20%"},{title:r.a.createElement(ie.a,null),key:"disabled",render:function(e){return e?r.a.createElement(Ie.a,null):""},dataIndex:"disabled",width:"10%"},{title:r.a.createElement(Q.a,null),key:"admin",render:function(e){return e?r.a.createElement(Ie.a,null):""},dataIndex:"admin",width:"10%"},{title:"",key:"id",dataIndex:"id",render:function(e){return w.getId()===e?null:r.a.createElement(c,{userId:e})},width:"5%"}],u=function(e){return i.filter((function(t){var n=t.hideOnSmall;return!(e&&(void 0!==n&&n))}))},s={expandable:o,dataSource:t,loading:n,size:"small"};return r.a.createElement(Ue.a,{query:"(max-width: 599px)"},(function(e){return r.a.createElement(Ee.a,Object.assign({},s,{columns:u(e)}))}))},Le=function(){var e=Object(a.useState)(!0),t=Object(I.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),o=Object(I.a)(c,2),i=o[0],u=o[1],s=function(){return x.getUsers().then((function(e){return function(e){var t=e.map((function(e){return{key:e._id,id:e._id,name:e.name,surname:e.surname,email:e.email,points:e.points,admin:e.admin,disabled:e.disabled}}));u(t)}((null===e||void 0===e?void 0:e.data)||[])})).finally((function(){return l(!1)}))};return Object(a.useEffect)((function(){s()}),[]),r.a.createElement(De,{data:i,loading:n,fetchUsers:s})},Me=function(){for(var e="bcdfghjklmnpqrstvwxyz".split(""),t="aeiou".split(""),n="",a=0;a<3;a++)n+=e[Math.floor(Math.random()*e.length)],n+=t[Math.floor(Math.random()*t.length)];return n+=Math.random().toString().substr(2,2)},qe=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(I.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(null),u=Object(I.a)(o,2),s=u[0],m=u[1];return s?r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("h3",{style:{marginBottom:24}},"User created"),r.a.createElement("p",null,"Name: ",s.name),r.a.createElement("p",null,"Surname: ",s.surname),r.a.createElement("p",null,"Email: ",r.a.createElement("strong",null,s.email)),r.a.createElement("p",null,"Password: ",r.a.createElement("strong",null,s.password)),r.a.createElement(ae,{onClick:function(){return e.push("/users")}},"OK")):r.a.createElement(Be,{onComplete:function(e){c(!0);var t=Object(E.a)({},e,{password:Me()});x.createUser(t).then((function(){return m(t)})).catch((function(){return m(null)})).finally((function(){return c(!1)}))},loading:l})},ze=n(162);function He(){var e=Object(S.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]);return He=function(){return e},e}var Re=de.a.Option,Ve={labelCol:{span:8},wrapperCol:{span:12}},_e={wrapperCol:{offset:8,span:12}},We=function(e){var t,n=e.slots,l=e.loading,c=e.onSubmit,o=Object(a.useState)(),i=Object(I.a)(o,2),u=i[0],s=i[1],f=Object(a.useState)(0),p=Object(I.a)(f,2),b=p[0],h=p[1],E=Object(a.useState)((null===(t=n[0][0])||void 0===t?void 0:t.unix)||0),g=Object(I.a)(E,2),v=g[0],y=g[1],k=Object(a.useState)(ne()()),O=Object(I.a)(k,2),j=O[0],x=O[1],w=Object(a.useState)(ne()().add(1,"months")),C=Object(I.a)(w,2),S=C[0],N=C[1],B=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(u,b,v,j.unix(),S.unix());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ke,null,r.a.createElement(U.a,Object.assign({},Ve,{name:"basic",onFinish:B}),r.a.createElement(U.a.Item,{label:"User",name:"user"},r.a.createElement(fe,{setUser:s})),r.a.createElement(U.a.Item,{label:"Day"},r.a.createElement(de.a,{defaultValue:0,onChange:function(e){return h(e)}},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e,t){return r.a.createElement(Re,{key:Math.random(),value:t},e)})))),r.a.createElement(U.a.Item,{label:"Slot"},r.a.createElement(de.a,{key:n[b][0].unix,defaultValue:n[b][0].value,onChange:function(e){return y(e)}},n[b].map((function(e){var t=e.unix,n=e.value;return r.a.createElement(Re,{key:t,value:t},n)})))),r.a.createElement(U.a.Item,{label:"From"},r.a.createElement(ze.a,{value:j,onChange:function(e){return x(e)},allowClear:!1})),r.a.createElement(U.a.Item,{label:"To"},r.a.createElement(ze.a,{value:S,onChange:function(e){return N(e)},allowClear:!1})),r.a.createElement(U.a.Item,_e,r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:l},"Create"))))},Ke=B.a.div(He()),Je=function(){var e=Object(i.g)(),t=Object(a.useState)(!0),n=Object(I.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(),u=Object(I.a)(o,2),s=u[0],f=u[1];Object(a.useEffect)((function(){x.getDaySlots().then((function(e){f(e.data),c(!1)})).catch((function(){return e.push("/")}))}),[]);var p=function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r,l){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.bookBatch({userId:t,day:n,slot:a,from:r,to:l});case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,l){return e.apply(this,arguments)}}();return l?r.a.createElement(ye,null):r.a.createElement(We,{onSubmit:p,slots:s})},Ye=n(227),$e=n(225),Ge=n(435),Qe=function(e){var t=e.onComplete,n=e.loading,l=e.settings,c={wrapperCol:{offset:14,span:12}},o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=Object(a.useState)(0),u=Object(I.a)(i,2),s=u[0],m=u[1],d=Object(a.useState)(l.week.map((function(e){return{startHours:e.startHours,startMinutes:e.startMinutes,slotNumber:e.slotNumber,off:e.off}}))),f=Object(I.a)(d,2),p=f[0],b=f[1],h=function(e,t,n){var a=Object(Ye.a)(Array,Object($e.a)(p));switch(t){case"time":a[n].startHours=e.hours(),a[n].startMinutes=e.minutes();break;case"slots":a[n].slotNumber=e;break;case"off":a[n].off=e.target.checked}b(a)},g=function(){var e,t,n=(e=p[s].startHours,t=p[s].startMinutes,ne()(e+":"+t,"HH:mm"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{placement:"right",title:"Starting time for "+o[s]},r.a.createElement(Ge.a,{defaultValue:n,format:"HH:mm",allowClear:!1,style:{marginBottom:8},onChange:function(e){return h(e,"time",s)}})),r.a.createElement("br",null),r.a.createElement(q.a,{placement:"right",title:"Number of slots for "+o[s]},r.a.createElement(Ne.a,{placeholder:"slots",defaultValue:p[s].slotNumber,style:{marginBottom:8},min:1,onChange:function(e){return h(e,"slots",s)}})),r.a.createElement("br",null),r.a.createElement(Pe.a,{defaultChecked:p[s].off,onChange:function(e){return h(e,"off",s)}},"Day off"))};return r.a.createElement(U.a,Object.assign({},{labelCol:{span:14},wrapperCol:{span:12}},{name:"settings",initialValues:Object(E.a)({remember:!1},l,{lastBookableDay:ne.a.unix(l.lastBookableDay),day:0}),onFinish:function(e){var n=e.cancelationNotice,a=e.interval,r=e.expireOffset,l=e.slotDuration,c=e.dailyLimit,o={cancelationNotice:n,interval:a,expireOffset:r,slotDuration:l,lastBookableDay:e.lastBookableDay.unix(),dailyLimit:c,week:p};t(o)}}),r.a.createElement(U.a.Item,{name:"lastBookableDay",label:"Last available day"},r.a.createElement(ze.a,{allowClear:!1})),r.a.createElement(U.a.Item,{name:"slotDuration",label:"Slot duration (mins)"},r.a.createElement(Ne.a,{min:5,max:1440,step:5,disabled:!0})),r.a.createElement(U.a.Item,{name:"interval",label:"Interval (mins)"},r.a.createElement(Ne.a,{min:0,max:1440,step:5,disabled:!0})),r.a.createElement(U.a.Item,{name:"expireOffset",label:"Slot expiration (mins)"},r.a.createElement(Ne.a,{min:0,max:1440,step:5})),r.a.createElement(U.a.Item,{name:"cancelationNotice",label:"Slot cancellation (hours)"},r.a.createElement(Ne.a,{min:0,max:365,step:1})),r.a.createElement(U.a.Item,{name:"dailyLimit",label:"Bookings limit per day"},r.a.createElement(Ne.a,{min:0,step:1})),r.a.createElement(U.a.Item,{name:"day",label:"Day settings"},r.a.createElement(de.a,{onSelect:function(e){return m(e)},options:o.map((function(e,t){return{label:e,value:t}}))})),r.a.createElement(U.a.Item,{label:"Day options"},r.a.createElement(g,{dayIndex:s})),r.a.createElement(U.a.Item,c,r.a.createElement(P.a,{type:"primary",loading:n,htmlType:"submit"},"Save")))};function Xe(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return Xe=function(){return e},e}var Ze=function(){var e=Object(i.g)(),t=Object(a.useState)(!0),n=Object(I.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(),u=Object(I.a)(o,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){c(!0),x.getSettings().then((function(e){m(e.data),c(!1)})).catch((function(){return e.push("/")}))}),[]),l?r.a.createElement(ye,null):r.a.createElement(et,null,r.a.createElement(Qe,{settings:s,loading:l,onComplete:function(e){c(!0),x.saveSettings(e).then((function(e){return m(e.data)})).finally((function(){return c(!1)}))}}))},et=B.a.div(Xe()),tt=function(){return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:["/","/schedule"],component:function(){return r.a.createElement(je,null)}}),r.a.createElement(i.b,{exact:!0,path:"/change-password",component:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(i.b,{exact:!0,path:"/users",component:function(){return r.a.createElement(Le,null)}}),r.a.createElement(i.b,{exact:!0,path:"/create-user",component:function(){return r.a.createElement(qe,null)}}),r.a.createElement(i.b,{exact:!0,path:"/create-bookings",component:function(){return r.a.createElement(Je,null)}}),r.a.createElement(i.b,{exact:!0,path:"/settings",component:function(){return r.a.createElement(Ze,null)}}))};function nt(){var e=Object(S.a)(["\n\n  .layout {\n    min-height: 100vh;\n  }\n\n  .content {\n    display: flex;\n    justify-content: center;\n    padding: 4em 25vw 0 25vw;\n  }\n\n  .footer {\n    font-size: 11px;\n  }\n\n  @media only screen and (max-width: 800px) {\n\n    .content {\n      padding: 2em 16px 0 16px;\n    }\n  }\n\n"]);return nt=function(){return e},e}var at=M.a.Footer,rt=function(){return r.a.createElement(lt,null,r.a.createElement(M.a,{className:"layout",theme:"light"},r.a.createElement(V,null),r.a.createElement(Z,null),r.a.createElement("div",{className:"content"},r.a.createElement(tt,null)),r.a.createElement(at,{className:"footer",style:{textAlign:"center"}})))},lt=B.a.div(nt()),ct=function(){return r.a.createElement(o.a,{basename:"/booking-manager-frontend"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(D,null)),r.a.createElement(C,{path:"/",component:function(){return r.a.createElement(rt,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(431);c.a.render(r.a.createElement(ct,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[230,1,2]]]);
//# sourceMappingURL=main.12714f83.chunk.js.map