(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{231:function(e,t,n){e.exports=n(433)},236:function(e,t,n){},433:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),c=n.n(l),o=(n(236),n(40)),i=n(68),u=(n(165),n(229)),s=n(26),m=n.n(s),d=n(36),f=n(197),p=n(198),b=n(199),h=n.n(b),g=n(63),E=n(200),v=n.n(E).a.create({baseURL:"https://sickdyd-booking-manager.herokuapp.com/api"});v.defaults.headers.post["Content-Type"]="application/json",v.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),v.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)}));var y=v,k=n(434),O=n(446),j=function(e){try{!function(e){if((null===e||void 0===e?void 0:e.status)>=200&&(null===e||void 0===e?void 0:e.status)<300)return e;var t=function(e){var t,n,a,r;return(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)?null===e||void 0===e||null===(a=e.data)||void 0===a||null===(r=a.error)||void 0===r?void 0:r.message:null===e||void 0===e?void 0:e.message}(e);O.a.error({message:"Error",description:t});var n=new Error(t);throw n.name=(null===e||void 0===e?void 0:e.status)||e,n.response=e,n}((null===e||void 0===e?void 0:e.response)?null===e||void 0===e?void 0:e.response:e)}catch(t){return console.log(t),Promise.reject()}},x={login:function(e,t){return y.post("/authenticate/",{email:e,password:t})},getSchedule:function(){return y.get("/schedule/")},book:function(e){return y.post("/bookings/",{unix:e,user:w.getId()}).then((function(e){return k.a.success("\u4e88\u7d04\u3092\u3057\u307e\u3057\u305f\u3002"),e})).catch((function(e){return j(e)}))},deleteBooking:function(e){return y.delete("/bookings/"+e).then((function(e){return k.a.success("\u4e88\u7d04\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002"),e})).catch((function(e){return j(e)}))},getUserBookings:function(e){return y.get("/users/"+e+"/bookings").then((function(e){return e})).catch((function(e){return j(e)}))},getPoints:function(e){return y.get("/users/"+e+"/points").then((function(e){return e})).catch((function(e){return j(e)}))},getSettings:function(){return y.get("/settings/").then((function(e){return e})).catch((function(e){return j(e)}))},saveSettings:function(e){return y.put("/settings/",e).then((function(e){return k.a.success("Settings saved"),e})).catch((function(e){return j(e)}))},getDaySlots:function(){return y.get("/schedule/slots").then((function(e){return e})).catch((function(e){return j(e)}))},getUsers:function(){return y.get("/users/").then((function(e){return e})).catch((function(e){return j(e)}))},updateUser:function(e,t){return y.patch("/users/"+t,e).then((function(e){return k.a.success("User data udpated"),e})).catch((function(e){return j(e)}))},createUser:function(e){return y.post("/users",e).then((function(e){return k.a.success("User created"),e})).catch((function(e){return j(e)}))},changePassword:function(e,t){return y.patch("/users/"+t,{password:e}).then((function(e){return k.a.success("Password changed"),e})).catch((function(e){return j(e)}))},close:function(e){return y.post("/bookings/close",{unix:e}).then((function(e){return k.a.success("Slot closed"),e})).catch((function(e){return j(e)}))},open:function(e){return y.delete("/bookings/"+e).then((function(e){return k.a.success("Slot opened"),e})).catch((function(e){return j(e)}))},bookForUser:function(e,t){return y.post("/bookings/",{unix:e,user:t}).then((function(e){return k.a.success("Slot assigned"),e})).catch((function(e){return j(e)}))},bookBatch:function(e){return y.post("/bookings/batch",Object(g.a)({},e)).then((function(e){return k.a.success("Slots assigned"),e})).catch((function(e){return j(e)}))},deleteUserBooking:function(e){return y.delete("/bookings/"+e).then((function(e){return k.a.success("Booking deleted"),e})).catch((function(e){return j(e)}))}},w=new(function(){function e(){Object(f.a)(this,e),this.authenticated=!1;var t=localStorage.getItem("bmtoken");t&&(this.setAuthentication(t),this.authenticated=!0)}return Object(p.a)(e,[{key:"login",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.login(t,n).then((function(e){a.setAuthentication(e.data.token),localStorage.setItem("bmtoken",e.data.token)})).catch((function(e){return j(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAuthentication",value:function(e){this.authenticated=!0,this.token=e;var t=h()(e),n=t._id,a=t.name,r=t.admin;this.id=n,this.name=a,this.admin=r,y.defaults.headers.common["x-auth-token"]=e}},{key:"logout",value:function(e){this.authenticated=!1,localStorage.removeItem("bmtoken"),y.defaults.headers.common["x-auth-token"]=void 0,e.push("/booking-manager-frontend/login")}},{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"isAdmin",value:function(){return this.admin}},{key:"getToken",value:function(){return this.token}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}}]),e}()),S=function(e){var t=e.component,n=e.admin,a=(e.children,Object(u.a)(e,["component","admin","children"]));return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return!w.isAuthenticated()||!w.isAdmin()&&n?r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}}):r.a.createElement(t,e)}}))},C=n(22),I=n(4),N=n(438),U=n(440),B=n(24),A=n(23);function F(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]);return F=function(){return e},e}var P={labelCol:{span:8},wrapperCol:{span:16}},T={wrapperCol:{offset:8,span:16}},L=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(I.a)(t,2),l=n[0],c=n[1],o=function(){var t=Object(d.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.email,r=n.password,c(!0),w.login(a,r).then((function(){return e.push("/booking-manager-frontend/home")})).catch((function(){return c(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(M,null,r.a.createElement(N.a,Object.assign({},P,{name:"basic",initialValues:{remember:!0,email:"test@gmail.com",password:"testing123"},onFinish:o}),r.a.createElement(N.a.Item,{label:"\u30de\u30a4\u30eb",name:"email",rules:[{required:!0,message:"Please input your email."}]},r.a.createElement(U.a,null)),r.a.createElement(N.a.Item,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9",name:"password",rules:[{required:!0,message:"Please input your password."}]},r.a.createElement(U.a.Password,null)),r.a.createElement(N.a.Item,T,r.a.createElement(B.a,{type:"primary",htmlType:"submit",loading:l},"\u30ed\u30b0\u30a4\u30f3"))))},M=A.a.div(F()),D=n(435),z=n(93),q=n(449);function H(){var e=Object(C.a)(["\n\n  .logo {\n    color: white;\n    font-size: 1.1rem;\n    font-weight: bold;\n  }\n\n  .header {\n    padding: 32px !important;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n"]);return H=function(){return e},e}var V=D.a.Header,Y=function(){var e=Object(i.g)();return r.a.createElement(R,null,r.a.createElement(V,{className:"header"},r.a.createElement("div",{className:"logo"},"\u4e88\u7d04\u30de\u30cd\u30fc\u30b8\u30e3\u30fc"),w.authenticated&&r.a.createElement(z.a,{title:"\u30ed\u30b0\u30a2\u30a6\u30c8"},r.a.createElement(B.a,{size:"small",onClick:function(){return w.logout(e)},shape:"circle",icon:r.a.createElement(q.a,null)}))))},R=A.a.div(H()),W=n(75),_=n(451),K=n(452),J=n(453),$=n(454),G=n(455),Q=n(456),X=n(457);function Z(){var e=Object(C.a)(["\n  @media (max-width: 575.28px) {\n\n  }\n"]);return Z=function(){return e},e}var ee=function(){var e=Object(i.g)();Object(a.useEffect)((function(){c(window.location.pathname.replace("/",""))}));var t=Object(a.useState)("home"),n=Object(I.a)(t,2),l=n[0],c=n[1];return r.a.createElement(te,null,r.a.createElement(W.a,{mode:"horizontal",selectedKeys:l,onClick:function(t){c(t.key),e.push("/booking-manager-frontend/"+t.key)}},r.a.createElement(W.a.Item,{key:"home"},r.a.createElement(_.a,null),r.a.createElement("span",{className:"label"},"Home")),r.a.createElement(W.a.Item,{key:"schedule"},r.a.createElement(K.a,null),r.a.createElement("span",{className:"label"},"Schedule")),r.a.createElement(W.a.Item,{key:"change-password"},r.a.createElement(J.a,null),r.a.createElement("span",{className:"label"},"Change password")),w.isAdmin()?r.a.createElement(W.a.Item,{key:"users"},r.a.createElement($.a,null),r.a.createElement("span",{className:"label"},"Users")):null,w.isAdmin()?r.a.createElement(W.a.Item,{key:"create-user"},r.a.createElement(G.a,null),r.a.createElement("span",{className:"label"},"Create user")):null,w.isAdmin()?r.a.createElement(W.a.Item,{key:"create-bookings"},r.a.createElement(Q.a,null),r.a.createElement("span",{className:"label"},"Create bookings")):null,w.isAdmin()?r.a.createElement(W.a.Item,{key:"settings"},r.a.createElement(X.a,null),r.a.createElement("span",{className:"label"},"Settings")):null))},te=A.a.div(Z()),ne=n(12),ae=n.n(ne),re=n(442),le=n(210),ce=n(437),oe=function(){var e=Object(a.useState)(!0),t=Object(I.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),o=Object(I.a)(c,2),i=o[0],u=o[1],s=Object(a.useState)(0),m=Object(I.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)([]),b=Object(I.a)(p,2),h=b[0],g=b[1],E=[{title:"Booking date and time",dataIndex:"unix",key:"unix",ellipsis:!0,width:"50%",render:function(e){return ae.a.unix(e).format("MMMM Do YYYY, h:mm")}},{title:"Booked at",dataIndex:"bookedAt",key:"bookedAt",ellipsis:!0,width:"50%",render:function(e){return ae.a.unix(e).format("MMMM Do YYYY, h:mm")}}],v={dataSource:i,loading:n,size:"small",rowKey:"unix"},y=function(e){g(function(e){return e.filter((function(e){return!ae.a.unix(e.unix).isBefore(ae()())}))}(e)),u(e)};Object(a.useEffect)((function(){Promise.all([x.getUserBookings(w.getId()),x.getPoints(w.getId())]).then((function(e){y(e[0].data),f(e[1].data.points)})).finally((function(){return l(!1)}))}),[]);var k=function(){return h.length>0?h.slice(0,10).map((function(e){return r.a.createElement(re.a,{key:e.unix,message:ae.a.unix(null===e||void 0===e?void 0:e.unix).format("LLLL"),type:"success",style:{marginBottom:8}})})):r.a.createElement("p",null,r.a.createElement("i",null,"No future bookings."))};return n?r.a.createElement(le.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Available points:"),d,r.a.createElement("h3",{style:{marginTop:32}},"Future 10 bookings:"),r.a.createElement(k,null),r.a.createElement("h3",{style:{marginTop:32}},"All bookings"),r.a.createElement(ce.a,Object.assign({},v,{columns:w.isAdmin()?E:[E[0]]})))},ie=function(e){return r.a.createElement(B.a,Object.assign({shape:"round",size:"small",style:{margin:"8px"}},e),e.children)},ue=n(230),se=n(444),me=n(445),de=function(e){var t=e.icon,n=e.text;return r.a.createElement(me.a,{status:t,text:n,style:{marginRight:"8px"}})},fe=n(450),pe=n(448),be=n(447),he=n(439),ge=n(105),Ee=function(e){var t=e.setUser,n=Object(a.useState)([]),l=Object(I.a)(n,2),c=l[0],o=l[1];Object(a.useEffect)((function(){x.getUsers().then((function(e){return o(e.data)})).catch((function(e){return console.log(e)}))}),[]);var i=ge.a.Option;return r.a.createElement(ge.a,{showSearch:!0,style:{width:200},placeholder:"Select a user",optionFilterProp:"children",onChange:function(e){t(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},c.map((function(e){return r.a.createElement(i,{key:e.email,value:e._id},e.email)})))},ve=function(e){var t=e.children,n=e.slotId,l=e.onOk,c=e.fetchSchedule,o=Object(a.useState)(!1),i=Object(I.a)(o,2),u=i[0],s=i[1],m=Object(a.useState)(!1),d=Object(I.a)(m,2),f=d[0],p=d[1],b=Object(a.useState)(null),h=Object(I.a)(b,2),g=h[0],E=h[1],v=function(){return s(!u)},y=r.a.Children.map(t,(function(e){return Object(a.cloneElement)(e,{onClick:v})})),k=function(){p(!0),l(n,g).then((function(){return c()})).finally((function(){p(!1),s(!1)}))};return r.a.createElement(r.a.Fragment,null,y,r.a.createElement(he.a,{title:"Assign slot to user",visible:u,onOk:k,onCancel:v,footer:[r.a.createElement(B.a,{key:"back",onClick:v},"Cancel"),r.a.createElement(B.a,{key:"submit",type:"primary",loading:f,onClick:k,disabled:void 0===g},"Ok")]},r.a.createElement("p",null,"Select the user"),r.a.createElement(Ee,{setUser:E})))},ye=function(e){var t=e.status,n=e.bookedAt,l=e.user,c=e.unix,o=e.fetchSchedule,i=Object(a.useState)(!1),u=Object(I.a)(i,2),s=u[0],m=u[1],d=function(e){m(!0),e(c).finally((function(){o().finally((function(){return m(!1)}))}))},f=Object(a.forwardRef)((function(e,t){return r.a.createElement("div",{style:{display:"inline-block"},ref:t},r.a.createElement(B.a,Object.assign({shape:"circle",size:"small",style:{marginRight:"8px"}},e)))})),p={onConfirm:function(){return d(x.deleteUserBooking)},placement:"top",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Cancel booking?"),r.a.createElement("p",null,"If you proceed you will cancel this booking:"),r.a.createElement("p",null,ae.a.unix(c).locale("en").format("LLLL")),r.a.createElement("p",null,null===l||void 0===l?void 0:l.name," ",null===l||void 0===l?void 0:l.surname)),okText:"Ok",cancelText:"Cancel"},b={onConfirm:function(){},placement:"top",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Booked by"),r.a.createElement("p",null,"Name: ",null===l||void 0===l?void 0:l.name," ",r.a.createElement("br",null),"Surname: ",null===l||void 0===l?void 0:l.surname," ",r.a.createElement("br",null),"Email: ",null===l||void 0===l?void 0:l.email," ",r.a.createElement("br",null),"at: ",ae.a.unix(n).locale("en").format("LLLL")," ",r.a.createElement("br",null))),okText:"Ok",cancelText:"Cancel"};return function(){switch(t){case"available":case"availableUncancellable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{onClick:function(){return d(x.close)},icon:r.a.createElement(fe.a,null),disabled:s}),r.a.createElement(ve,{slotId:c,onOk:x.bookForUser,fetchSchedule:o},r.a.createElement(f,{icon:r.a.createElement(G.a,null)})));case"booked":case"bookedUncancellable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,p,r.a.createElement(f,{icon:r.a.createElement(pe.a,null),disabled:s})),r.a.createElement(se.a,b,r.a.createElement(f,{icon:r.a.createElement($.a,null),disabled:s})));case"unavailable":return null;case"closed":return r.a.createElement(f,{onClick:function(){return d(x.open)},icon:r.a.createElement(be.a,null),disabled:s});default:return null}}()},ke=function(e){var t=e.unix,n=e.start,l=e.status,c=e.user,o=e.fetchSchedule,i=Object(a.useState)(!1),u=Object(I.a)(i,2),s=u[0],m=u[1],d=function(){},f=function(e){m(!0),e(t).finally((function(){o().finally((function(){return m(!1)}))}))},p={onConfirm:function(){return f(x.book)},disabled:!1,placement:"top",title:r.a.createElement("p",null,"\u4e88\u7d04\u3092\u3057\u305f\u3044\u3067\u3059\u304b\uff1f",r.a.createElement("br",null),r.a.createElement("br",null)," \u4e88\u7d04\u3092\u3057\u307e\u3057\u305f\u3089\u30ad\u30e3\u30f3\u30bb\u30eb\u304c\u3067\u304d\u307e\u305b\u3093\u3002"),okText:"\u306f\u3044",cancelText:"\u30ad\u30e3\u30f3\u30bb\u30eb"},b=function(e){if(w.isAdmin())switch(e){case"available":case"availableUncancellable":return{tagColor:"green",onClick:d,popconfirm:{disabled:!0},icon:"success",text:"Available"};case"booked":case"bookedUncancellable":return{tagColor:"red",onClick:d,popconfirm:{disabled:!0},icon:"processing",text:"".concat(null===c||void 0===c?void 0:c.name," ").concat(null===c||void 0===c?void 0:c.surname)};case"unavailable":return{tagColor:"default",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"unavailable"};default:return{tagColor:"geekblue",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"Closed"}}else switch(e){case"available":return{tooltip:"\u4e88\u7d04\u3092\u3057\u307e\u3059",button:"default",onClick:function(){return f(x.book)},popconfirm:{disabled:!0},icon:"success",text:"\u30d5\u30ea\u30fc"};case"availableUncancellable":return{tooltip:"\u4e88\u7d04\u3092\u3057\u307e\u3059",button:"default",onClick:d,popconfirm:p,icon:"warning",text:"\u30d5\u30ea\u30fc"};case"booked":return{tooltip:"\u30ad\u30e3\u30f3\u305b\u30eb",button:"primary",onClick:function(){return f(x.deleteBooking)},popconfirm:{disabled:!0},icon:"processing",text:"\u4e88\u7d04"};case"bookedUncancellable":return{tooltip:"\u30ad\u30e3\u30f3\u305b\u30eb\u3067\u304d\u307e\u305b\u3093",button:"danger",onClick:d,popconfirm:{disabled:!0},icon:"processing",text:"\u4e88\u7d04"};case"unavailable":default:return{tooltip:"\u5229\u7528\u3067\u304d\u307e\u305b\u3093",button:"dashed",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"\u7121\u52b9"}}}(l),h=function(){return w.isAdmin()?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{color:b.tagColor,style:{margin:"8px"}},n),r.a.createElement(ye,e)):r.a.createElement(se.a,b.popconfirm,r.a.createElement(z.a,{placement:"left",title:b.tooltip},r.a.createElement(ie,{type:b.button,onClick:b.onClick,loading:s},n)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(de,{icon:b.icon,text:b.text}))};function Oe(){var e=Object(C.a)(["\n\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin: 8px;\n\n  .day {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 16px;\n    padding: 16px 16px 24px 16px;\n    border-radius: 4px;\n    background-color: white;\n    border: 1px solid #ddd;\n    min-width: 330px;\n  }\n\n  .date {\n    font-weight: bolder;\n    padding-bottom: 16px;\n    border-bottom: 1px solid #ddd;\n  }\n\n  .slots {\n    display: flex;\n    flex-direction: column;\n  }\n"]);return Oe=function(){return e},e}var je=function(e){var t=e.schedule,n=e.fetchSchedule;return r.a.createElement(xe,null,t.map((function(e){return r.a.createElement("div",{className:"day",key:e.unix},r.a.createElement("p",{className:"date"},ae.a.unix(e.unix).locale("en").format("LL")),r.a.createElement("div",{className:"slots"},e.slots.length>0?e.slots.map((function(e){return r.a.createElement("div",{key:e.unix},r.a.createElement(ke,Object.assign({key:e.unix,fetchSchedule:n},e)))})):r.a.createElement("i",null,"No slots available.")))})))},xe=A.a.div(Oe()),we=function(){var e=Object(a.useState)([]),t=Object(I.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(!0),o=Object(I.a)(c,2),i=o[0],u=o[1],s=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.getSchedule().then((function(e){return l((null===e||void 0===e?void 0:e.data)||[])})).catch((function(e){return j(e)})).finally((function(){return u(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),i?r.a.createElement(le.a,null):r.a.createElement(je,{schedule:n,fetchSchedule:s})},Se=function(e){var t=e.id,n=e.onComplete,a=e.loading,l={wrapperCol:{offset:6,span:12}};return r.a.createElement(N.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:16}},{name:"password",onFinish:function(e){var a=e.password;return n(a,t)}}),r.a.createElement(N.a.Item,{label:"New",name:"password",rules:[{required:!0,message:"Please input the password."}]},r.a.createElement(U.a.Password,null)),r.a.createElement(N.a.Item,{name:"confirm",label:"Confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm the password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(U.a.Password,null)),r.a.createElement(N.a.Item,l,r.a.createElement(B.a,{size:"small",type:"primary",htmlType:"submit",loading:a},"Change password")))};function Ce(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]);return Ce=function(){return e},e}var Ie=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(I.a)(t,2),l=n[0],c=n[1];return r.a.createElement(Ne,null,r.a.createElement("div",{className:"form",style:{paddingTop:48}},r.a.createElement(Se,{loading:l,onComplete:function(t){x.changePassword(t,w.getId()).then((function(){return e.push("/booking-manager-frontend/home")})).catch((function(){return c(!1)}))}})))},Ne=A.a.div(Ce()),Ue=n(443),Be=n(220),Ae=n(441),Fe=n(106),Pe=function(e){var t=e.id,n=e.name,l=e.surname,c=e.email,o=e.points,i=e.admin,u=e.disabled,s=e.loading,m=e.onComplete,d=Object(a.useState)(i),f=Object(I.a)(d,2),p=f[0],b=f[1],h=Object(a.useState)(u),E=Object(I.a)(h,2),v=E[0],y=E[1],k={wrapperCol:{offset:6,span:12}};return r.a.createElement(N.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{name:"user",initialValues:{remember:!1,name:n,surname:l,email:c,points:o},onFinish:function(e){m(Object(g.a)({},e,{admin:p,disabled:v}),t)}}),r.a.createElement(N.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input the name."}]},r.a.createElement(U.a,null)),r.a.createElement(N.a.Item,{label:"Surname",name:"surname",rules:[{required:!0,message:"Please input the surname."}]},r.a.createElement(U.a,null)),r.a.createElement(N.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please type a valid email.",type:"email"}]},r.a.createElement(U.a,null)),r.a.createElement(N.a.Item,{label:"Points",name:"points",rules:[{required:!0}]},r.a.createElement(Ae.a,{min:0})),r.a.createElement(N.a.Item,{label:"Admin"},r.a.createElement(Fe.a,{onChange:function(){return b(!p)},defaultChecked:p})),r.a.createElement(N.a.Item,{label:"Disabled"},r.a.createElement(Fe.a,{onChange:function(){return y(!v)},defaultChecked:v})),r.a.createElement(N.a.Item,k,r.a.createElement(B.a,{size:"small",type:"primary",loading:s,htmlType:"submit"},"Save")))};function Te(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  margin-top: 24px;\n\n  .ant-btn {\n    margin-right: 8px;  \n  }\n"]);return Te=function(){return e},e}var Le=function(e){var t=e.fetchUsers,n=Object(a.useState)(!1),l=Object(I.a)(n,2),c=l[0],o=l[1],i=function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.then((function(){return t()})).finally((function(){return o(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Me,null,r.a.createElement(Pe,Object.assign({},e,{onComplete:function(e,t){return i(x.updateUser(e,t))},loading:c})),r.a.createElement(Se,{id:e.id,onComplete:function(e,t){return i(x.changePassword(e,t))},loading:c}))},Me=A.a.div(Te()),De=function(e){var t=e.data,n=e.loading,a=e.fetchUsers,l={expandedRowRender:function(e){return r.a.createElement(Le,Object.assign({},e,{fetchUsers:a}))}},c=[{title:"Name",dataIndex:"name",key:"name",ellipsis:!0,width:"20%",hideOnSmall:!0},{title:"Surname",dataIndex:"surname",key:"surname",ellipsis:!0,width:"20%"},{title:"Email",dataIndex:"email",key:"email",ellipsis:!0,width:"30%"},{title:r.a.createElement(fe.a,null),key:"disabled",render:function(e){return e?r.a.createElement(Ue.a,null):""},dataIndex:"disabled",width:"10%"},{title:r.a.createElement(J.a,null),key:"admin",render:function(e){return e?r.a.createElement(Ue.a,null):""},dataIndex:"admin",width:"10%"}],o=function(e){return c.filter((function(t){var n=t.hideOnSmall;return!(e&&(void 0!==n&&n))}))},i={expandable:l,dataSource:t,loading:n,size:"small"};return r.a.createElement(Be.a,{query:"(max-width: 599px)"},(function(e){return r.a.createElement(ce.a,Object.assign({},i,{columns:o(e)}))}))},ze=function(){var e=Object(a.useState)(!0),t=Object(I.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),o=Object(I.a)(c,2),i=o[0],u=o[1],s=function(){return x.getUsers().then((function(e){return function(e){var t=e.map((function(e){return{key:e._id,id:e._id,name:e.name,surname:e.surname,email:e.email,points:e.points,admin:e.admin,disabled:e.disabled}}));u(t)}(e.data)})).finally((function(){return l(!1)}))};return Object(a.useEffect)((function(){s()}),[]),r.a.createElement(De,{data:i,loading:n,fetchUsers:s})},qe=function(){for(var e="bcdfghjklmnpqrstvwxyz".split(""),t="aeiou".split(""),n="",a=0;a<3;a++)n+=e[Math.floor(Math.random()*e.length)],n+=t[Math.floor(Math.random()*t.length)];return n+=Math.random().toString().substr(2,2)};function He(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n\n  .ant-btn {\n    margin-right: 8px;  \n  }\n"]);return He=function(){return e},e}var Ve=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(I.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(null),u=Object(I.a)(o,2),s=u[0],m=u[1];return r.a.createElement(Ye,null,r.a.createElement("div",{className:"form",style:{paddingTop:48}},s?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{marginBottom:24}},"User created"),r.a.createElement("p",null,"Name: ",s.name),r.a.createElement("p",null,"Surname: ",s.surname),r.a.createElement("p",null,"Email: ",r.a.createElement("strong",null,s.email)),r.a.createElement("p",null,"Password: ",r.a.createElement("strong",null,s.password)),r.a.createElement(ie,{onClick:function(){return e.push("/booking-manager-frontend/users")}},"OK")):r.a.createElement(Pe,{onComplete:function(e){c(!0);var t=Object(g.a)({},e,{password:qe()});x.createUser(t).then((function(){return m(t)})).catch((function(){return m(null)})).finally((function(){return c(!1)}))},loading:l})))},Ye=A.a.div(He()),Re=n(163);function We(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]);return We=function(){return e},e}var _e=ge.a.Option,Ke={labelCol:{span:8},wrapperCol:{span:16}},Je={wrapperCol:{offset:8,span:16}},$e=function(e){var t,n=e.slots,l=e.loading,c=e.onSubmit,o=Object(a.useState)(),i=Object(I.a)(o,2),u=i[0],s=i[1],f=Object(a.useState)(0),p=Object(I.a)(f,2),b=p[0],h=p[1],g=Object(a.useState)((null===(t=n[0][0])||void 0===t?void 0:t.unix)||0),E=Object(I.a)(g,2),v=E[0],y=E[1],k=Object(a.useState)(ae()()),O=Object(I.a)(k,2),j=O[0],x=O[1],w=Object(a.useState)(ae()().add(1,"months")),S=Object(I.a)(w,2),C=S[0],U=S[1],A=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(u,b,v,j.unix(),C.unix());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ge,null,r.a.createElement(N.a,Object.assign({},Ke,{name:"basic",onFinish:A}),r.a.createElement(N.a.Item,{label:"User",name:"user"},r.a.createElement(Ee,{setUser:s})),r.a.createElement(N.a.Item,{label:"Day"},r.a.createElement(ge.a,{defaultValue:0,onChange:function(e){return h(e)}},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e,t){return r.a.createElement(_e,{key:Math.random(),value:t},e)})))),r.a.createElement(N.a.Item,{label:"Slot"},r.a.createElement(ge.a,{key:n[b][0].unix,defaultValue:n[b][0].value,onChange:function(e){return y(e)}},n[b].map((function(e){var t=e.unix,n=e.value;return r.a.createElement(_e,{key:t,value:t},n)})))),r.a.createElement(N.a.Item,{label:"From"},r.a.createElement(Re.a,{value:j,onChange:function(e){return x(e)},allowClear:!1})),r.a.createElement(N.a.Item,{label:"To"},r.a.createElement(Re.a,{value:C,onChange:function(e){return U(e)},allowClear:!1})),r.a.createElement(N.a.Item,Je,r.a.createElement(B.a,{type:"primary",htmlType:"submit",loading:l},"Create"))))},Ge=A.a.div(We()),Qe=function(){var e=Object(i.g)(),t=Object(a.useState)(!0),n=Object(I.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(),u=Object(I.a)(o,2),s=u[0],f=u[1];Object(a.useEffect)((function(){x.getDaySlots().then((function(e){f(e.data),c(!1)})).catch((function(){return e.push("/booking-manager-frontend/")}))}),[]);var p=function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r,l){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.bookBatch({userId:t,day:n,slot:a,from:r,to:l});case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,l){return e.apply(this,arguments)}}();return l?r.a.createElement(le.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{textAlign:"center",marginBottom:32}},"Create batch bookings"),r.a.createElement($e,{onSubmit:p,slots:s}))},Xe=n(228),Ze=n(227),et=n(436),tt=function(e){var t=e.onComplete,n=e.loading,l=e.settings,c={wrapperCol:{offset:14}},o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=Object(a.useState)(0),u=Object(I.a)(i,2),s=u[0],m=u[1],d=Object(a.useState)(l.week.map((function(e){return{startHours:e.startHours,startMinutes:e.startMinutes,slotNumber:e.slotNumber,off:e.off}}))),f=Object(I.a)(d,2),p=f[0],b=f[1],h=function(e,t,n){var a=Object(Xe.a)(Array,Object(Ze.a)(p));switch(t){case"time":a[n].startHours=e.hours(),a[n].startMinutes=e.minutes();break;case"slots":a[n].slotNumber=e;break;case"off":a[n].off=e.target.checked}b(a)},E=function(){var e,t,n=(e=p[s].startHours,t=p[s].startMinutes,ae()(e+":"+t,"HH:mm"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{placement:"right",title:"Starting time for "+o[s]},r.a.createElement(et.a,{defaultValue:n,format:"HH:mm",allowClear:!1,style:{marginBottom:8},onChange:function(e){return h(e,"time",s)}})),r.a.createElement("br",null),r.a.createElement(z.a,{placement:"right",title:"Number of slots for "+o[s]},r.a.createElement(Ae.a,{placeholder:"slots",defaultValue:p[s].slotNumber,style:{marginBottom:8},min:1,onChange:function(e){return h(e,"slots",s)}})),r.a.createElement("br",null),r.a.createElement(Fe.a,{defaultChecked:p[s].off,onChange:function(e){return h(e,"off",s)}},"Day off"))};return r.a.createElement(N.a,Object.assign({},{labelCol:{span:14}},{name:"settings",initialValues:Object(g.a)({remember:!1},l,{lastBookableDay:ae.a.unix(l.lastBookableDay),day:0}),onFinish:function(e){var n=e.cancelationNotice,a=e.interval,r=e.expireOffset,l=e.slotDuration,c=e.dailyLimit,o={cancelationNotice:n,interval:a,expireOffset:r,slotDuration:l,lastBookableDay:e.lastBookableDay.unix(),dailyLimit:c,week:p};t(o)}}),r.a.createElement("h3",{style:{textAlign:"center",marginBottom:32}},"Settings"),r.a.createElement(N.a.Item,{name:"lastBookableDay",label:"Last available day"},r.a.createElement(Re.a,{allowClear:!1})),r.a.createElement(N.a.Item,{name:"slotDuration",label:"Slot duration (mins)"},r.a.createElement(Ae.a,{min:5,max:1440,step:5,disabled:!0})),r.a.createElement(N.a.Item,{name:"interval",label:"Interval (mins)"},r.a.createElement(Ae.a,{min:0,max:1440,step:5,disabled:!0})),r.a.createElement(N.a.Item,{name:"expireOffset",label:"Slot expiration (mins)"},r.a.createElement(Ae.a,{min:0,max:1440,step:5})),r.a.createElement(N.a.Item,{name:"cancelationNotice",label:"Slot cancellation (hours)"},r.a.createElement(Ae.a,{min:0,max:365,step:1})),r.a.createElement(N.a.Item,{name:"dailyLimit",label:"Bookings limit per day"},r.a.createElement(Ae.a,{min:0,step:1})),r.a.createElement(N.a.Item,{name:"day",label:"Day settings"},r.a.createElement(ge.a,{onSelect:function(e){return m(e)},options:o.map((function(e,t){return{label:e,value:t}}))})),r.a.createElement(N.a.Item,{label:"Day options"},r.a.createElement(E,{dayIndex:s})),r.a.createElement(N.a.Item,c,r.a.createElement(B.a,{size:"small",type:"primary",loading:n,htmlType:"submit"},"Save")))};function nt(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return nt=function(){return e},e}var at=function(){var e=Object(i.g)(),t=Object(a.useState)(!0),n=Object(I.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(),u=Object(I.a)(o,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){c(!0),x.getSettings().then((function(e){m(e.data),c(!1)})).catch((function(){return e.push("/booking-manager-frontend/")}))}),[]),l?r.a.createElement(le.a,null):r.a.createElement(rt,null,r.a.createElement(tt,{settings:s,loading:l,onComplete:function(e){c(!0),x.saveSettings(e).then((function(e){return m(e.data)})).finally((function(){return c(!1)}))}}))},rt=A.a.div(nt()),lt=function(){return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:["/booking-manager-frontend/","/booking-manager-frontend/home"],component:function(){return r.a.createElement(oe,null)}}),r.a.createElement(i.b,{exact:!0,path:"/booking-manager-frontend/schedule",component:function(){return r.a.createElement(we,null)}}),r.a.createElement(i.b,{exact:!0,path:"/booking-manager-frontend/change-password",component:function(){return r.a.createElement(Ie,null)}}),r.a.createElement(i.b,{exact:!0,path:"/booking-manager-frontend/users",component:function(){return r.a.createElement(ze,null)}}),r.a.createElement(i.b,{exact:!0,path:"/booking-manager-frontend/create-user",component:function(){return r.a.createElement(Ve,null)}}),r.a.createElement(i.b,{exact:!0,path:"/booking-manager-frontend/create-bookings",component:function(){return r.a.createElement(Qe,null)}}),r.a.createElement(i.b,{exact:!0,path:"/booking-manager-frontend/settings",component:function(){return r.a.createElement(at,null)}}))};function ct(){var e=Object(C.a)(["\n\n  .layout {\n    min-height: 100vh;\n  }\n\n  .footer {\n    font-size: 11px;\n  }\n\n"]);return ct=function(){return e},e}var ot=D.a.Content,it=D.a.Footer,ut=function(){return r.a.createElement(st,null,r.a.createElement(D.a,{className:"layout",theme:"light"},r.a.createElement(Y,null),r.a.createElement(ee,null),r.a.createElement(ot,{style:{padding:"16px 20px"}},r.a.createElement(lt,null)),r.a.createElement(it,{className:"footer",style:{textAlign:"center"}},"Booking Manager \xa92020 Created by Sickdyd")))},st=A.a.div(ct()),mt=function(){return r.a.createElement(o.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(L,null)),r.a.createElement(S,{path:"/",component:function(){return r.a.createElement(ut,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(432);c.a.render(r.a.createElement(mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[231,1,2]]]);
//# sourceMappingURL=main.3d478c50.chunk.js.map