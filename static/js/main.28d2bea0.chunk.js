(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{231:function(e,t,n){e.exports=n(433)},236:function(e,t,n){},433:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),c=n.n(l),o=(n(236),n(49)),i=n(67),u=(n(165),n(229)),s=n(36),m=n.n(s),d=n(59),f=n(197),p=n(198),b=n(199),h=n.n(b),g=n(200),E=n.n(g).a.create({baseURL:"https://sickdyd-booking-manager.herokuapp.com/api"});E.defaults.headers.post["Content-Type"]="application/json",E.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),E.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)}));var v=E,y=n(434),k=n(456),O=function(e){try{!function(e){if((null===e||void 0===e?void 0:e.status)>=200&&(null===e||void 0===e?void 0:e.status)<300)return e;var t=function(e){var t,n,a,r;return(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)?null===e||void 0===e||null===(a=e.data)||void 0===a||null===(r=a.error)||void 0===r?void 0:r.message:null===e||void 0===e?void 0:e.message}(e);k.a.error({message:"Error",description:t});var n=new Error(t);throw n.name=(null===e||void 0===e?void 0:e.status)||e,n.response=e,n}((null===e||void 0===e?void 0:e.response)?null===e||void 0===e?void 0:e.response:e)}catch(t){return console.log(t),Promise.reject()}},j={login:function(e,t){return v.post("/authenticate/",{email:e,password:t})},getSchedule:function(){return v.get("/schedule/")},book:function(e){return v.post("/bookings/",{id:e,user:x.getId()}).then((function(e){return y.a.success("\u4e88\u7d04\u3092\u3057\u307e\u3057\u305f\u3002"),e})).catch((function(e){return O(e)}))},deleteBooking:function(e){return v.delete("/bookings/"+e).then((function(e){return y.a.success("\u4e88\u7d04\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002"),e})).catch((function(e){return O(e)}))},getUserBookings:function(e){return v.get("/users/"+e+"/bookings").then((function(e){return e})).catch((function(e){return O(e)}))},getSettings:function(){return v.get("/settings/").then((function(e){return e})).catch((function(e){return O(e)}))},saveSettings:function(e){return v.put("/settings/",e).then((function(e){return y.a.success("Settings saved"),e})).catch((function(e){return O(e)}))},getUsers:function(){return v.get("/users/").then((function(e){return e})).catch((function(e){return O(e)}))},updateUser:function(e,t){return v.patch("/users/"+t,e).then((function(e){return y.a.success("User data udpated"),e})).catch((function(e){return O(e)}))},createUser:function(e){return v.post("/users",e).then((function(e){return y.a.success("User created"),e})).catch((function(e){return O(e)}))},changePassword:function(e,t){return v.patch("/users/"+t,{password:e}).then((function(e){return y.a.success("Password changed"),e})).catch((function(e){return O(e)}))},close:function(e){return v.post("/bookings/close",{id:e}).then((function(e){return y.a.success("Slot closed"),e})).catch((function(e){return O(e)}))},open:function(e){return v.delete("/bookings/"+e).then((function(e){return y.a.success("Slot opened"),e})).catch((function(e){return O(e)}))},bookForUser:function(e,t){return v.post("/bookings/",{id:e,user:t}).then((function(e){return y.a.success("Slot assigned"),e})).catch((function(e){return O(e)}))},deleteUserBooking:function(e){return v.delete("/bookings/"+e).then((function(e){return y.a.success("Booking deleted"),e})).catch((function(e){return O(e)}))}},x=new(function(){function e(){Object(f.a)(this,e),this.authenticated=!1;var t=localStorage.getItem("bmtoken");t&&(this.setAuthentication(t),this.authenticated=!0)}return Object(p.a)(e,[{key:"login",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.login(t,n).then((function(e){a.setAuthentication(e.data.token),localStorage.setItem("bmtoken",e.data.token)})).catch((function(e){return O(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAuthentication",value:function(e){this.authenticated=!0,this.token=e;var t=h()(e),n=t._id,a=t.name,r=t.admin;this.id=n,this.name=a,this.admin=r,v.defaults.headers.common["x-auth-token"]=e}},{key:"logout",value:function(e){this.authenticated=!1,localStorage.removeItem("bmtoken"),v.defaults.headers.common["x-auth-token"]=void 0,e.push("/login")}},{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"isAdmin",value:function(){return this.admin}},{key:"getToken",value:function(){return this.token}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}}]),e}()),w=function(e){var t=e.component,n=e.admin,a=(e.children,Object(u.a)(e,["component","admin","children"]));return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return!x.isAuthenticated()||!x.isAdmin()&&n?r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}}):r.a.createElement(t,e)}}))},C=n(23),S=n(8),I=n(438),N=n(440),U=n(21),B=n(24);function A(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]);return A=function(){return e},e}var F={labelCol:{span:8},wrapperCol:{span:16}},P={wrapperCol:{offset:8,span:16}},M=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(S.a)(t,2),l=n[0],c=n[1],o=function(){var t=Object(d.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.email,r=n.password,c(!0),x.login(a,r).then((function(){return e.push("/home")})).catch((function(){return c(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(L,null,r.a.createElement(I.a,Object.assign({},F,{name:"basic",initialValues:{remember:!0,email:"test@gmail.com",password:"testing123"},onFinish:o}),r.a.createElement(I.a.Item,{label:"\u30de\u30a4\u30eb",name:"email",rules:[{required:!0,message:"Please input your email."}]},r.a.createElement(N.a,null)),r.a.createElement(I.a.Item,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9",name:"password",rules:[{required:!0,message:"Please input your password."}]},r.a.createElement(N.a.Password,null)),r.a.createElement(I.a.Item,P,r.a.createElement(U.a,{type:"primary",htmlType:"submit",loading:l},"\u30ed\u30b0\u30a4\u30f3"))))},L=B.a.div(A()),T=n(435),D=n(92),z=n(452);function H(){var e=Object(C.a)(["\n\n  .logo {\n    color: white;\n    font-size: 1.1rem;\n    font-weight: bold;\n  }\n\n  .header {\n    padding: 32px !important;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n"]);return H=function(){return e},e}var q=T.a.Header,Y=function(){var e=Object(i.g)();return r.a.createElement(R,null,r.a.createElement(q,{className:"header"},r.a.createElement("div",{className:"logo"},"\u4e88\u7d04\u30de\u30cd\u30fc\u30b8\u30e3\u30fc"),x.authenticated&&r.a.createElement(D.a,{title:"\u30ed\u30b0\u30a2\u30a6\u30c8"},r.a.createElement(U.a,{size:"small",onClick:function(){return x.logout(e)},shape:"circle",icon:r.a.createElement(z.a,null)}))))},R=B.a.div(H()),V=n(74),_=n(449),K=n(448),W=n(447),J=n(446),$=n(443),G=n(445);function Q(){var e=Object(C.a)(["\n  @media (max-width: 575.28px) {\n\n  }\n"]);return Q=function(){return e},e}var X=function(){var e=Object(i.g)();Object(a.useEffect)((function(){c(window.location.pathname.replace("/",""))}));var t=Object(a.useState)("home"),n=Object(S.a)(t,2),l=n[0],c=n[1];return r.a.createElement(Z,null,r.a.createElement(V.a,{mode:"horizontal",selectedKeys:l,onClick:function(t){c(t.key),e.push(t.key)}},r.a.createElement(V.a.Item,{key:"home"},r.a.createElement(_.a,null),r.a.createElement("span",{className:"label"},"Home")),r.a.createElement(V.a.Item,{key:"schedule"},r.a.createElement(K.a,null),r.a.createElement("span",{className:"label"},"Schedule")),r.a.createElement(V.a.Item,{key:"change-password"},r.a.createElement(W.a,null),r.a.createElement("span",{className:"label"},"Change password")),x.isAdmin()?r.a.createElement(V.a.Item,{key:"users"},r.a.createElement(J.a,null),r.a.createElement("span",{className:"label"},"Users")):null,x.isAdmin()?r.a.createElement(V.a.Item,{key:"create-user"},r.a.createElement($.a,null),r.a.createElement("span",{className:"label"},"Create user")):null,x.isAdmin()?r.a.createElement(V.a.Item,{key:"settings"},r.a.createElement(G.a,null),r.a.createElement("span",{className:"label"},"Settings")):null))},Z=B.a.div(Q()),ee=n(15),te=n.n(ee),ne=n(442),ae=n(210),re=n(437),le=function(){var e=Object(a.useState)(!0),t=Object(S.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),o=Object(S.a)(c,2),i=o[0],u=o[1],s=Object(a.useState)([]),m=Object(S.a)(s,2),d=m[0],f=m[1],p=[{title:"Booking date",dataIndex:"id",key:"id",ellipsis:!0,width:"50%",render:function(e){return te.a.unix(e).format("MMMM Do YYYY, h:mm")}},{title:"Booked at",dataIndex:"bookedAt",key:"bookedAt",ellipsis:!0,width:"50%",render:function(e){return te.a.unix(e).format("MMMM Do YYYY, h:mm")}}],b={dataSource:i,loading:n,size:"small",rowKey:"id"},h=function(e){f(function(e){return e.filter((function(e){return!te.a.unix(e.id).isBefore(te()())}))}(e)),u(e)};Object(a.useEffect)((function(){j.getUserBookings(x.getId()).then((function(e){return h(e.data)})).finally((function(){return l(!1)}))}),[]);var g=function(){return d.length>0?d.map((function(e){return r.a.createElement(ne.a,{key:e.id,message:te.a.unix(null===e||void 0===e?void 0:e.id).format("LLLL"),type:"success",style:{marginBottom:8}})})):r.a.createElement("p",null,r.a.createElement("i",null,"No future bookings."))};return n?r.a.createElement(ae.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Future bookings:"),r.a.createElement(g,null),r.a.createElement("h3",{style:{marginTop:32}},"All bookings"),r.a.createElement(re.a,Object.assign({},b,{columns:p})))},ce=function(e){return r.a.createElement(U.a,Object.assign({shape:"round",size:"small",style:{margin:"8px"}},e),e.children)},oe=n(230),ie=n(444),ue=n(455),se=function(e){var t=e.icon,n=e.text;return r.a.createElement(ue.a,{status:t,text:n,style:{marginRight:"8px"}})},me=n(453),de=n(451),fe=n(450),pe=n(439),be=n(104),he=function(e){var t=e.setUser,n=Object(a.useState)([]),l=Object(S.a)(n,2),c=l[0],o=l[1];Object(a.useEffect)((function(){j.getUsers().then((function(e){return o(e.data)})).catch((function(e){return console.log(e)}))}),[]);var i=be.a.Option;return r.a.createElement(be.a,{showSearch:!0,style:{width:200},placeholder:"Select a user",optionFilterProp:"children",onChange:function(e){t(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},c.map((function(e){return r.a.createElement(i,{key:e.email,value:e._id},e.email)})))},ge=function(e){var t=e.children,n=e.slotId,l=e.onOk,c=e.fetchSchedule,o=Object(a.useState)(!1),i=Object(S.a)(o,2),u=i[0],s=i[1],m=Object(a.useState)(!1),d=Object(S.a)(m,2),f=d[0],p=d[1],b=Object(a.useState)(null),h=Object(S.a)(b,2),g=h[0],E=h[1],v=function(){return s(!u)},y=r.a.Children.map(t,(function(e){return Object(a.cloneElement)(e,{onClick:v})})),k=function(){p(!0),l(n,g).then((function(){return c()})).finally((function(){s(!1),v()}))};return r.a.createElement(r.a.Fragment,null,y,r.a.createElement(pe.a,{title:"Assign slot to user",visible:u,onOk:k,onCancel:v,footer:[r.a.createElement(U.a,{key:"back",onClick:v},"Cancel"),r.a.createElement(U.a,{key:"submit",type:"primary",loading:f,onClick:k,disabled:void 0===g},"Ok")]},r.a.createElement("p",null,"Select the user"),r.a.createElement(he,{setUser:E})))},Ee=function(e){var t=e.status,n=e.bookedAt,l=e.user,c=e.id,o=e.fetchSchedule,i=Object(a.useState)(!1),u=Object(S.a)(i,2),s=u[0],m=u[1],d=function(e){m(!0),e(c).finally((function(){o().finally((function(){return m(!1)}))}))},f=Object(a.forwardRef)((function(e,t){return r.a.createElement("div",{style:{display:"inline-block"},ref:t},r.a.createElement(U.a,Object.assign({shape:"circle",size:"small",style:{marginRight:"8px"}},e)))})),p={onConfirm:function(){return d(j.deleteUserBooking)},placement:"top",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Cancel booking?"),r.a.createElement("p",null,"If you proceed you will cancel this booking:"),r.a.createElement("p",null,te.a.unix(c).locale("en").format("LLLL")),r.a.createElement("p",null,null===l||void 0===l?void 0:l.name," ",null===l||void 0===l?void 0:l.surname)),okText:"Ok",cancelText:"Cancel"},b={onConfirm:function(){},placement:"top",title:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Booked by"),r.a.createElement("p",null,"Name: ",null===l||void 0===l?void 0:l.name," ",r.a.createElement("br",null),"Surname: ",null===l||void 0===l?void 0:l.surname," ",r.a.createElement("br",null),"Email: ",null===l||void 0===l?void 0:l.email," ",r.a.createElement("br",null),"at: ",te.a.unix(n).locale("en").format("LLLL")," ",r.a.createElement("br",null))),okText:"Ok",cancelText:"Cancel"};return function(){switch(t){case"available":case"availableUncancellable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{onClick:function(){return d(j.close)},icon:r.a.createElement(me.a,null),disabled:s}),r.a.createElement(ge,{slotId:c,onOk:j.bookForUser,fetchSchedule:o},r.a.createElement(f,{icon:r.a.createElement($.a,null)})));case"booked":case"bookedUncancellable":return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,p,r.a.createElement(f,{icon:r.a.createElement(de.a,null),disabled:s})),r.a.createElement(ie.a,b,r.a.createElement(f,{icon:r.a.createElement(J.a,null),disabled:s})));case"unavailable":return null;case"closed":return r.a.createElement(f,{onClick:function(){return d(j.open)},icon:r.a.createElement(fe.a,null),disabled:s});default:return null}}()},ve=function(e){var t=e.id,n=e.start,l=e.status,c=e.user,o=e.fetchSchedule,i=Object(a.useState)(!1),u=Object(S.a)(i,2),s=u[0],m=u[1],d=function(){},f=function(e){m(!0),e(t).finally((function(){o().finally((function(){return m(!1)}))}))},p={onConfirm:function(){return f(j.book)},disabled:!1,placement:"top",title:r.a.createElement("p",null,"\u4e88\u7d04\u3092\u3057\u305f\u3044\u3067\u3059\u304b\uff1f",r.a.createElement("br",null),r.a.createElement("br",null)," \u4e88\u7d04\u3092\u3057\u307e\u3057\u305f\u3089\u30ad\u30e3\u30f3\u30bb\u30eb\u304c\u3067\u304d\u307e\u305b\u3093\u3002"),okText:"\u306f\u3044",cancelText:"\u30ad\u30e3\u30f3\u30bb\u30eb"},b=function(e){if(x.isAdmin())switch(e){case"available":case"availableUncancellable":return{tagColor:"green",onClick:d,popconfirm:{disabled:!0},icon:"success",text:"Available"};case"booked":case"bookedUncancellable":return{tagColor:"red",onClick:d,popconfirm:{disabled:!0},icon:"processing",text:"".concat(null===c||void 0===c?void 0:c.name," ").concat(null===c||void 0===c?void 0:c.surname)};case"unavailable":return{tagColor:"default",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"unavailable"};default:return{tagColor:"geekblue",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"Closed"}}else switch(e){case"available":return{tooltip:"\u4e88\u7d04\u3092\u3057\u307e\u3059",button:"default",onClick:function(){return f(j.book)},popconfirm:{disabled:!0},icon:"success",text:"\u30d5\u30ea\u30fc"};case"availableUncancellable":return{tooltip:"\u4e88\u7d04\u3092\u3057\u307e\u3059",button:"default",onClick:d,popconfirm:p,icon:"warning",text:"\u30d5\u30ea\u30fc"};case"booked":return{tooltip:"\u30ad\u30e3\u30f3\u305b\u30eb",button:"primary",onClick:function(){return f(j.deleteBooking)},popconfirm:{disabled:!0},icon:"processing",text:"\u4e88\u7d04"};case"bookedUncancellable":return{tooltip:"\u30ad\u30e3\u30f3\u305b\u30eb\u3067\u304d\u307e\u305b\u3093",button:"danger",onClick:d,popconfirm:{disabled:!0},icon:"processing",text:"\u4e88\u7d04"};case"unavailable":default:return{tooltip:"\u5229\u7528\u3067\u304d\u307e\u305b\u3093",button:"dashed",onClick:d,popconfirm:{disabled:!0},icon:"default",text:"\u7121\u52b9"}}}(l),h=function(){return x.isAdmin()?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{color:b.tagColor,style:{margin:"8px"}},n),r.a.createElement(Ee,e)):r.a.createElement(ie.a,b.popconfirm,r.a.createElement(D.a,{placement:"left",title:b.tooltip},r.a.createElement(ce,{type:b.button,onClick:b.onClick,loading:s},n)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(se,{icon:b.icon,text:b.text}))};function ye(){var e=Object(C.a)(["\n\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin: 8px;\n\n  .day {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 16px;\n    padding: 16px 16px 24px 16px;\n    border-radius: 4px;\n    background-color: white;\n    border: 1px solid #ddd;\n    min-width: 330px;\n  }\n\n  .date {\n    font-weight: bolder;\n    padding-bottom: 16px;\n    border-bottom: 1px solid #ddd;\n  }\n\n  .slots {\n    display: flex;\n    flex-direction: column;\n  }\n"]);return ye=function(){return e},e}var ke=function(e){var t=e.schedule,n=e.fetchSchedule;return r.a.createElement(Oe,null,t.map((function(e){return r.a.createElement("div",{className:"day",key:e.unix},r.a.createElement("p",{className:"date"},te.a.unix(e.unix).locale("en").format("LL")),r.a.createElement("div",{className:"slots"},e.slots.length>0?e.slots.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ve,Object.assign({key:e.id,fetchSchedule:n},e)))})):r.a.createElement("i",null,"No slots available.")))})))},Oe=B.a.div(ye()),je=function(){var e=Object(a.useState)([]),t=Object(S.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(!0),o=Object(S.a)(c,2),i=o[0],u=o[1],s=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.getSchedule().then((function(e){return l((null===e||void 0===e?void 0:e.data)||[])})).catch((function(e){return O(e)})).finally((function(){return u(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){s()}),[]),i?r.a.createElement(ae.a,null):r.a.createElement(ke,{schedule:n,fetchSchedule:s})},xe=function(e){var t=e.id,n=e.onComplete,a=e.loading,l={wrapperCol:{offset:6,span:12}};return r.a.createElement(I.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:16}},{name:"password",onFinish:function(e){var a=e.password;return n(a,t)}}),r.a.createElement(I.a.Item,{label:"New",name:"password",rules:[{required:!0,message:"Please input the password."}]},r.a.createElement(N.a.Password,null)),r.a.createElement(I.a.Item,{name:"confirm",label:"Confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm the password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(N.a.Password,null)),r.a.createElement(I.a.Item,l,r.a.createElement(U.a,{size:"small",type:"primary",htmlType:"submit",loading:a},"Change password")))};function we(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]);return we=function(){return e},e}var Ce=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(S.a)(t,2),l=n[0],c=n[1];return r.a.createElement(Se,null,r.a.createElement("div",{className:"form",style:{paddingTop:48}},r.a.createElement(xe,{loading:l,onComplete:function(t){j.changePassword(t,x.getId()).then((function(){return e.push("/home")})).finally((function(){return c(!1)}))}})))},Se=B.a.div(we()),Ie=n(454),Ne=n(220),Ue=n(105),Be=function(e){var t=e.id,n=e.name,l=e.surname,c=e.email,o=e.admin,i=e.disabled,u=e.loading,s=e.onComplete,m=Object(a.useState)(o),d=Object(S.a)(m,2),f=d[0],p=d[1],b=Object(a.useState)(i),h=Object(S.a)(b,2),g=h[0],E=h[1],v={wrapperCol:{offset:10,span:12}};return r.a.createElement(I.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{name:"user",initialValues:{remember:!1,name:n,surname:l,email:c},onFinish:function(e){console.log(e),s(e,t)}}),r.a.createElement(I.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input the name."}]},r.a.createElement(N.a,null)),r.a.createElement(I.a.Item,{label:"Surname",name:"surname",rules:[{required:!0,message:"Please input the surname."}]},r.a.createElement(N.a,null)),r.a.createElement(I.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please type a valid email.",type:"email"}]},r.a.createElement(N.a,null)),r.a.createElement(I.a.Item,{label:"Admin"},r.a.createElement(Ue.a,{onChange:function(){return p(!f)},defaultChecked:f})),r.a.createElement(I.a.Item,{label:"Disabled"},r.a.createElement(Ue.a,{onChange:function(){return E(!g)},defaultChecked:g})),r.a.createElement(I.a.Item,v,r.a.createElement(U.a,{size:"small",type:"primary",loading:u,htmlType:"submit"},"Save")))};function Ae(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  margin-top: 24px;\n\n  .ant-btn {\n    margin-right: 8px;  \n  }\n"]);return Ae=function(){return e},e}var Fe=function(e){var t=e.fetchUsers,n=Object(a.useState)(!1),l=Object(S.a)(n,2),c=l[0],o=l[1],i=function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.then((function(){return t()})).finally((function(){return o(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Pe,null,r.a.createElement(Be,Object.assign({},e,{onComplete:function(e,t){return i(j.updateUser(e,t))},loading:c})),r.a.createElement(xe,{id:e.id,onComplete:function(e,t){return i(j.changePassword(e,t))},loading:c}))},Pe=B.a.div(Ae()),Me=function(e){var t=e.data,n=e.loading,a=e.fetchUsers,l={expandedRowRender:function(e){return r.a.createElement(Fe,Object.assign({},e,{fetchUsers:a}))}},c=[{title:"Name",dataIndex:"name",key:"name",ellipsis:!0,width:"20%",hideOnSmall:!0},{title:"Surname",dataIndex:"surname",key:"surname",ellipsis:!0,width:"20%"},{title:"Email",dataIndex:"email",key:"email",ellipsis:!0,width:"30%"},{title:r.a.createElement(me.a,null),key:"disabled",render:function(e){return e?r.a.createElement(Ie.a,null):""},dataIndex:"disabled",width:"10%"},{title:r.a.createElement(W.a,null),key:"admin",render:function(e){return e?r.a.createElement(Ie.a,null):""},dataIndex:"admin",width:"10%"}],o=function(e){return c.filter((function(t){var n=t.hideOnSmall;return!(e&&(void 0!==n&&n))}))},i={expandable:l,dataSource:t,loading:n,size:"small"};return r.a.createElement(Ne.a,{query:"(max-width: 599px)"},(function(e){return r.a.createElement(re.a,Object.assign({},i,{columns:o(e)}))}))},Le=function(){var e=Object(a.useState)(!0),t=Object(S.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),o=Object(S.a)(c,2),i=o[0],u=o[1],s=function(){return j.getUsers().then((function(e){return function(e){var t=e.map((function(e){return{key:e._id,id:e._id,name:e.name,surname:e.surname,email:e.email,admin:e.admin,disabled:e.disabled}}));u(t)}(e.data)})).finally((function(){return l(!1)}))};return Object(a.useEffect)((function(){s()}),[]),r.a.createElement(Me,{data:i,loading:n,fetchUsers:s})},Te=n(135),De=function(){for(var e="bcdfghjklmnpqrstvwxyz".split(""),t="aeiou".split(""),n="",a=0;a<3;a++)n+=e[Math.floor(Math.random()*e.length)],n+=t[Math.floor(Math.random()*t.length)];return n+=Math.random().toString().substr(2,2)};function ze(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n\n  .ant-btn {\n    margin-right: 8px;  \n  }\n"]);return ze=function(){return e},e}var He=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(S.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(null),u=Object(S.a)(o,2),s=u[0],m=u[1];return r.a.createElement(qe,null,r.a.createElement("div",{className:"form",style:{paddingTop:48}},s?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{marginBottom:24}},"User created"),r.a.createElement("p",null,"Name: ",s.name),r.a.createElement("p",null,"Surname: ",s.surname),r.a.createElement("p",null,"Email: ",r.a.createElement("strong",null,s.email)),r.a.createElement("p",null,"Password: ",r.a.createElement("strong",null,s.password)),r.a.createElement(ce,{onClick:function(){return e.push("/users")}},"OK")):r.a.createElement(Be,{onComplete:function(e){c(!0);var t=Object(Te.a)({},e,{password:De()});j.createUser(t).then((function(){return m(t)})).catch((function(){return m(null)})).finally((function(){return c(!1)}))},loading:l})))},qe=B.a.div(ze()),Ye=n(228),Re=n(226),Ve=n(436),_e=n(441),Ke=n(163),We=function(e){var t=e.onComplete,n=e.loading,l=e.settings,c={wrapperCol:{offset:14}},o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=Object(a.useState)(0),u=Object(S.a)(i,2),s=u[0],m=u[1],d=Object(a.useState)(l.week.map((function(e){return{startHours:e.startHours,startMinutes:e.startMinutes,slotNumber:e.slotNumber,off:e.off}}))),f=Object(S.a)(d,2),p=f[0],b=f[1],h=function(e,t,n){var a=Object(Ye.a)(Array,Object(Re.a)(p));switch(t){case"time":console.log(e),a[n].startHours=e.hours(),a[n].startMinutes=e.minutes();break;case"slots":a[n].slotNumber=e;break;case"off":a[n].off=e.target.checked}console.log(a),b(a)},g=function(){var e,t,n=(e=p[s].startHours,t=p[s].startMinutes,te()(e+":"+t,"HH:mm"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{placement:"right",title:"Starting time for "+o[s]},r.a.createElement(Ve.a,{defaultValue:n,format:"HH:mm",allowClear:!1,style:{marginBottom:8},onChange:function(e){return h(e,"time",s)}})),r.a.createElement("br",null),r.a.createElement(D.a,{placement:"right",title:"Number of slots for "+o[s]},r.a.createElement(_e.a,{placeholder:"slots",defaultValue:p[s].slotNumber,style:{marginBottom:8},min:1,onChange:function(e){return h(e,"slots",s)}})),r.a.createElement("br",null),r.a.createElement(Ue.a,{defaultChecked:p[s].off,onChange:function(e){return h(e,"off",s)}},"Day off"))};return r.a.createElement(I.a,Object.assign({},{labelCol:{span:14}},{name:"settings",initialValues:Object(Te.a)({remember:!1},l,{lastBookableDay:te.a.unix(l.lastBookableDay),day:0}),onFinish:function(e){var n={cancelationNotice:e.cancelationNotice,interval:e.interval,expireOffset:e.expireOffset,slotDuration:e.slotDuration,lastBookableDay:e.lastBookableDay.unix(),week:p};t(n)}}),r.a.createElement("h3",{style:{textAlign:"center",marginBottom:32}},"Settings"),r.a.createElement(I.a.Item,{name:"lastBookableDay",label:"Last available day"},r.a.createElement(Ke.a,{allowClear:!1})),r.a.createElement(I.a.Item,{name:"slotDuration",label:"Slot duration",title:"How long a slot will last"},r.a.createElement(_e.a,{min:5,max:1440,step:5,disabled:!0})),r.a.createElement(I.a.Item,{name:"interval",label:"Interval"},r.a.createElement(_e.a,{min:0,max:1440,step:5,disabled:!0})),r.a.createElement(I.a.Item,{name:"expireOffset",label:"Slot expiration"},r.a.createElement(_e.a,{min:0,max:1440,step:5})),r.a.createElement(I.a.Item,{name:"cancelationNotice",label:"Slot cancellation (days)"},r.a.createElement(_e.a,{min:0,max:365,step:1})),r.a.createElement(I.a.Item,{name:"day",label:"Day settings"},r.a.createElement(be.a,{onSelect:function(e){return m(e)},options:o.map((function(e,t){return{label:e,value:t}}))})),r.a.createElement(I.a.Item,{label:"Day options"},r.a.createElement(g,{dayIndex:s})),r.a.createElement(I.a.Item,c,r.a.createElement(U.a,{size:"small",type:"primary",loading:n,htmlType:"submit"},"Save")))};function Je(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return Je=function(){return e},e}var $e=function(){var e=Object(a.useState)(!0),t=Object(S.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(),o=Object(S.a)(c,2),i=o[0],u=o[1];return Object(a.useEffect)((function(){l(!0),j.getSettings().then((function(e){return u(e.data)})).finally((function(){return l(!1)}))}),[]),n?r.a.createElement(ae.a,null):r.a.createElement(Ge,null,r.a.createElement(We,{settings:i,loading:n,onComplete:function(e){l(!0),j.saveSettings(e).then((function(e){return u(e.data)})).finally((function(){return l(!1)}))}}))},Ge=B.a.div(Je()),Qe=function(){return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:["/","/home"],component:function(){return r.a.createElement(le,null)}}),r.a.createElement(i.b,{exact:!0,path:"/schedule",component:function(){return r.a.createElement(je,null)}}),r.a.createElement(i.b,{exact:!0,path:"/change-password",component:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(i.b,{exact:!0,path:"/users",component:function(){return r.a.createElement(Le,null)}}),r.a.createElement(i.b,{exact:!0,path:"/create-user",component:function(){return r.a.createElement(He,null)}}),r.a.createElement(i.b,{exact:!0,path:"/settings",component:function(){return r.a.createElement($e,null)}}))};function Xe(){var e=Object(C.a)(["\n\n  .layout {\n    min-height: 100vh;\n  }\n\n  .footer {\n    font-size: 11px;\n  }\n\n"]);return Xe=function(){return e},e}var Ze=T.a.Content,et=T.a.Footer,tt=function(){return r.a.createElement(nt,null,r.a.createElement(T.a,{className:"layout",theme:"light"},r.a.createElement(Y,null),r.a.createElement(X,null),r.a.createElement(Ze,{style:{padding:"16px 20px"}},r.a.createElement(Qe,null)),r.a.createElement(et,{className:"footer",style:{textAlign:"center"}},"Booking Manager \xa92020 Created by Sickdyd")))},nt=B.a.div(Xe()),at=function(){return r.a.createElement(o.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(M,null)),r.a.createElement(w,{path:"/",component:function(){return r.a.createElement(tt,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(432);c.a.render(r.a.createElement(at,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[231,1,2]]]);
//# sourceMappingURL=main.28d2bea0.chunk.js.map